{"config":{"lang":["ru"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"\u041e\u0441\u0432\u0430\u0438\u0432\u0430\u0435\u043c STM32 \u0441\u043d\u0438\u0437\u0443","text":"<p>\u0412 \u0434\u0430\u043d\u043d\u043e\u0439 \u0441\u0442\u0430\u0442\u044c\u0435 \u043c\u044b \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0435\u043c \u043f\u043e\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0441 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440\u043e\u043c STM32 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e GNU \u0443\u0442\u0438\u043b\u0438\u0442, \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u043f\u043e\u0437\u043d\u0430\u043a\u043e\u043c\u0438\u043c\u0441\u044f \u0441 \u0430\u0441\u0441\u0435\u043c\u0431\u043b\u0435\u0440\u043e\u043c \u0438 \u043e\u0442\u043b\u0430\u0434\u043a\u043e\u0439.</p> <p>\u041f\u0440\u0438\u043c\u0435\u0440\u044b \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u044b \u0434\u043b\u044f \u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u043e\u0439 \u043f\u043b\u0430\u0442\u044b blue pill, \u043f\u043e\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u043e\u0439 \u043d\u0430 \u043c\u0438\u043a\u0440\u043e\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440\u0435 STM32F103C8T6.</p> <p>\u041f\u0440\u0438\u043c\u0435\u0440\u043d\u044b\u0439 \u043f\u043b\u0430\u043d:</p> <ol> <li> <p>\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043f\u043b\u0430\u0442\u0443 \u043a \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u0443 \u0438 \u0443\u0431\u0435\u0434\u0438\u0442\u044c\u0441\u044f, \u0447\u0442\u043e \u0442\u0430\u043c \u0447\u0442\u043e-\u0442\u043e \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442.    \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0431\u0443\u0434\u0435\u043c st-util \u0438 gdb.</p> </li> <li> <p>\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043f\u0440\u043e\u0441\u0442\u0435\u0439\u0448\u0443\u044e \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0443 \u043d\u0430 \u0430\u0441\u0441\u0435\u043c\u0431\u043b\u0435\u0440\u0435, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0432 \u0446\u0438\u043a\u043b\u0435 \u043f\u0440\u0438\u0431\u0430\u0432\u043b\u044f\u0435\u0442    \u0440\u0435\u0433\u0438\u0441\u0442\u0440, \u0441\u043a\u043e\u043c\u043f\u0438\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0438\u0437 \u043d\u0435\u0451 \u043f\u0440\u043e\u0448\u0438\u0432\u043a\u0443, \u0437\u0430\u043b\u0438\u0442\u044c \u043d\u0430 \u043f\u043b\u0430\u0442\u0443 \u0438 \u043f\u0440\u043e\u043d\u0430\u0431\u043b\u044e\u0434\u0430\u0442\u044c \u0435\u0451    \u0440\u0430\u0431\u043e\u0442\u0443. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0431\u0443\u0434\u0435\u043c binutils \u0438 st-flash.</p> </li> <li> <p>\u041f\u043e\u043c\u0438\u0433\u0430\u0442\u044c \u0434\u0438\u043e\u0434\u043e\u043c (\u043d\u0430 \u0430\u0441\u0441\u0435\u043c\u0431\u043b\u0435\u0440\u0435 \u0436\u0435).</p> </li> <li> <p>\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043f\u0440\u043e\u0441\u0442\u0435\u0439\u0448\u0443\u044e \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0443 \u043d\u0430 C, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0432 \u0446\u0438\u043a\u043b\u0435 \u043f\u0440\u0438\u0431\u0430\u0432\u043b\u044f\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435    \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e\u0439 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439. \u0421\u043a\u043e\u043c\u043f\u0438\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0438\u0437 \u043d\u0435\u0451 \u043f\u0440\u043e\u0448\u0438\u0432\u043a\u0443, \u0437\u0430\u043b\u0438\u0442\u044c \u043d\u0430 \u043f\u043b\u0430\u0442\u0443 \u0438    \u043f\u043e\u043d\u0430\u0431\u043b\u044e\u0434\u0430\u0442\u044c \u0435\u0451 \u0440\u0430\u0431\u043e\u0442\u0443 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e gdb.</p> </li> <li> <p>\u041f\u043e\u043c\u0438\u0433\u0430\u0442\u044c \u0434\u0438\u043e\u0434\u043e\u043c \u043d\u0430 \u0421 (\u0434\u0430\u043b\u044c\u0448\u0435 \u0432\u0441\u0451 \u043d\u0430 \u0421).</p> </li> <li> <p>\u041f\u0435\u0440\u0435\u043f\u0438\u0441\u0430\u0442\u044c \u043c\u0438\u0433\u0430\u043d\u0438\u0435 \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0442\u0430\u0439\u043c\u0435\u0440\u0430, \u0447\u0442\u043e\u0431\u044b \u0432\u043d\u0435\u0441\u0442\u0438 \u0441\u0432\u043e\u0439 \u0432\u043a\u043b\u0430\u0434 \u0432 \u0431\u043e\u0440\u044c\u0431\u0443    \u0441 \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u043c \u043f\u043e\u0442\u0435\u043f\u043b\u0435\u043d\u0438\u0435\u043c.</p> </li> <li> <p>\u0421\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u043d\u0435\u0448\u043d\u0435\u043c\u0443 \u043c\u0438\u0440\u0443 \"Hello world\" \u0447\u0435\u0440\u0435\u0437 UART.</p> </li> <li> <p>\u041f\u0435\u0440\u0435\u043f\u0438\u0441\u0430\u0442\u044c \"Hello world\" \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e CMSIS, \u0443\u0436\u0435 \u0441 \u043f\u043e\u043d\u0438\u043c\u0430\u043d\u0438\u0435\u043c \u0442\u043e\u0433\u043e, \u0447\u0442\u043e \u0442\u0430\u043c    \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442.</p> </li> </ol> <p>\u0412 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435 \u0431\u0443\u0434\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u043e \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u043c\u043d\u043e\u0433\u043e \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u043e\u0432 \u0432\u0440\u043e\u0434\u0435 make, ld, gdb, as, gcc \u0438 \u0442\u0434, \u043f\u043e \u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u0438\u0437 \u043d\u0438\u0445 \u043c\u043e\u0436\u043d\u043e \u043a\u043d\u0438\u0433\u0438 \u043f\u0438\u0441\u0430\u0442\u044c (\u0438 \u043f\u0438\u0448\u0443\u0442). \u041f\u043e\u044d\u0442\u043e\u043c\u0443, \u043a\u043e\u043d\u0435\u0447\u043d\u043e, \u0443\u0433\u043b\u0443\u0431\u043b\u044f\u0442\u044c\u0441\u044f \u0432 \u043d\u0438\u0445 \u043c\u044b \u043d\u0435 \u0431\u0443\u0434\u0435\u043c, \u0430 \u043d\u0430\u043f\u0440\u043e\u0442\u0438\u0432, \u044d\u0442\u0438 \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u044b \u0431\u0443\u0434\u0443\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e \u043f\u0440\u0438\u043c\u0438\u0442\u0438\u0432\u043d\u043e\u043c \u0432\u0438\u0434\u0435.</p> <p>\u041d\u0438\u0436\u0435 \u0441\u0441\u044b\u043b\u043a\u0438 \u043d\u0430 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044e, \u0433\u0434\u0435 \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0439 \u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0441\u044f \u0441 \u043b\u044e\u0431\u044b\u043c\u0438 \u043d\u044e\u0430\u043d\u0441\u0430\u043c\u0438.</p> <ul> <li>STM32F103x8 Datasheet.   \u042d\u0442\u043e \u0441\u043f\u0435\u0446\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438 \u043c\u0438\u043a\u0440\u043e\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440\u0430, \u0442\u0443\u0442 \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u044b \u043a\u043e\u0440\u043f\u0443\u0441\u043e\u0432,   \u0432\u044b\u0445\u043e\u0434\u044b, \u044d\u043b\u0435\u043a\u0442\u0440\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438.</li> <li>STM32F103xx Reference Manual.   \u0422\u0443\u0442 \u0432\u0441\u044f \u0441\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043f\u043e \u0432\u0441\u0435\u043c \u0431\u0438\u0442\u0430\u043c \u0438 \u0431\u0430\u0439\u0442\u0430\u043c \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u043c\u0438\u043a\u0440\u043e\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440\u0430.</li> <li>STM32F10xxx Programming Manual.   \u0422\u0443\u0442 \u0441\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043f\u043e ARM: \u0432\u0441\u0435 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438, \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0440\u0430\u0431\u043e\u0442\u044b \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440\u0430.</li> <li>GNU debugger GDB.   \u042d\u0442\u043e \u043e\u0442\u043b\u0430\u0434\u0447\u0438\u043a.</li> <li>GNU make. \u042d\u0442\u043e   \u0443\u0442\u0438\u043b\u0438\u0442\u0430 \u0434\u043b\u044f \u0441\u0431\u043e\u0440\u043a\u0438 \u043f\u0440\u043e\u0435\u043a\u0442\u043e\u0432.</li> <li>GNU linker ld. \u042d\u0442\u043e \u043a\u043e\u043c\u043f\u043e\u043d\u043e\u0432\u0449\u0438\u043a   (\u043b\u0438\u043d\u043a\u0435\u0440).</li> <li>GNU assembler as. \u042d\u0442\u043e \u0430\u0441\u0441\u0435\u043c\u0431\u043b\u0435\u0440.</li> </ul>"},{"location":"1-explore/","title":"\u0427\u0430\u0441\u0442\u044c 1: \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0435\u043c \u0438 \u0438\u0441\u0441\u043b\u0435\u0434\u0443\u0435\u043c \u043f\u043b\u0430\u0442\u0443","text":"<p>\u041d\u0430\u043c \u043d\u0443\u0436\u0435\u043d \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440, \u043f\u043b\u0430\u0442\u0430 \u0441 \u043c\u0438\u043a\u0440\u043e\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440\u043e\u043c \u0438 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430\u0442\u043e\u0440 ST-Link.</p> <p>\u041d\u0430 \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440 \u043d\u0443\u0436\u043d\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c Arm GNU Toolchain. \u0415\u0433\u043e \u043c\u043e\u0436\u043d\u043e \u0441\u043a\u0430\u0447\u0430\u0442\u044c \u0442\u0443\u0442, \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0432 \u0432\u0430\u0448\u0435\u043c \u0434\u0438\u0441\u0442\u0440\u0438\u0431\u0443\u0442\u0438\u0432\u0435 \u0443\u0436\u0435 \u0435\u0441\u0442\u044c \u0433\u043e\u0442\u043e\u0432\u044b\u0435 \u043f\u0430\u043a\u0435\u0442\u044b. \u0423 \u0432\u0430\u0441 \u0434\u043e\u043b\u0436\u043d\u0430 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u043a\u043e\u043c\u0430\u043d\u0434\u0430 arm-none-eabi-gdb. \u0422\u0430\u043a\u0436\u0435 \u043d\u0443\u0436\u043d\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c st-link (\u0438\u0441\u0445\u043e\u0434\u043d\u0438\u043a\u0438), \u043e\u043d \u0442\u043e\u0436\u0435 \u0435\u0441\u0442\u044c \u0432\u043e \u043c\u043d\u043e\u0433\u0438\u0445 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u044f\u0445. \u042f \u0432\u0441\u0451 \u0434\u0435\u043b\u0430\u043b \u043d\u0430 \u043b\u0438\u043d\u0443\u043a\u0441\u0435, \u043d\u043e \u0432 \u0442\u0435\u043e\u0440\u0438\u0438 \u043c\u0430\u043a\u043e\u0441\u044c \u0438 \u0432\u0438\u043d\u0434\u0430 \u0442\u043e\u0436\u0435 \u0434\u043e\u043b\u0436\u043d\u044b \u043f\u043e\u0434\u043e\u0439\u0442\u0438.</p> <p>\u041f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430\u0442\u043e\u0440 \u0443 \u043c\u0435\u043d\u044f - \u0444\u0438\u0440\u043c\u0435\u043d\u043d\u044b\u0439 st-link, \u0432\u044b\u043b\u043e\u043c\u0430\u043d\u043d\u044b\u0439 \u0438\u0437 \u0444\u0438\u0440\u043c\u0435\u043d\u043d\u043e\u0439 \u043f\u043b\u0430\u0442\u044b Nucleo. \u041d\u043e \u0431\u043e\u043b\u044c\u0448\u0435 \u0440\u0430\u0441\u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0435\u043d\u044b \u043a\u0438\u0442\u0430\u0439\u0441\u043a\u0438\u0435 st-link \u0432 \u0432\u0438\u0434\u0435 \u0444\u043b\u0435\u0448\u043a\u0438, \u043e\u043d\u0438 \u0442\u043e\u0436\u0435 \u0434\u043e\u0432\u043e\u043b\u044c\u043d\u043e \u0434\u0451\u0448\u0435\u0432\u044b.</p> <p>\u041f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430\u0442\u043e\u0440 \u043d\u0443\u0436\u043d\u043e \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043a \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u0443 \u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u043a\u043e\u043c\u0430\u043d\u0434\u0443 <code>st-info --probe</code>. \u041e\u043d \u0434\u043e\u043b\u0436\u0435\u043d \u043e\u0442\u043e\u0431\u0440\u0430\u0437\u0438\u0442\u044c \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430\u0442\u043e\u0440\u0435. \u0415\u0441\u043b\u0438 \u0443 \u0432\u0430\u0441 \u043e\u0448\u0438\u0431\u043a\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 <code>sudo st-info --probe</code>. \u0415\u0441\u043b\u0438 \u0441\u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442, \u0437\u043d\u0430\u0447\u0438\u0442 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0441 \u043f\u0440\u0430\u0432\u0430\u043c\u0438, \u0440\u0430\u0437\u0431\u0438\u0440\u0430\u0439\u0442\u0435\u0441\u044c \u0441 udev, \u043d\u0443 \u0438\u043b\u0438 \u0440\u0430\u0431\u043e\u0442\u0430\u0439\u0442\u0435 \u043e\u0442 \u0440\u0443\u0442\u0430.</p> <p>\u041f\u043b\u0430\u0442\u0430 \u0443 \u043c\u0435\u043d\u044f \u0442.\u043d. blue pill \u0441 \u043c\u0438\u043a\u0440\u043e\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440\u043e\u043c STM32F103C8T6. \u042d\u0442\u043e \u0434\u0435\u0448\u0451\u0432\u0430\u044f \u0438 \u0440\u0430\u0441\u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0451\u043d\u043d\u0430\u044f \u043a\u0438\u0442\u0430\u0439\u0441\u043a\u0430\u044f \u043f\u043b\u0430\u0442\u0430. \u041d\u0430\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043c\u043d\u0435 \u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e, \u043d\u0430 \u0431\u0430\u0437\u043e\u0432\u043e\u043c \u0443\u0440\u043e\u0432\u043d\u0435 \u043c\u043d\u043e\u0433\u0438\u0435 \u043c\u0438\u043a\u0440\u043e\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440\u044b STM32 \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0442 \u043f\u0440\u0438\u043c\u0435\u0440\u043d\u043e \u043e\u0434\u0438\u043d\u0430\u043a\u043e\u0432\u043e, \u043f\u043e\u044d\u0442\u043e\u043c\u0443, \u043d\u0430\u0434\u0435\u044e\u0441\u044c, \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u0431\u0443\u0434\u0435\u0442 \u0447\u0430\u0441\u0442\u0438\u0447\u043d\u043e \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u043c\u0430 \u0438 \u0434\u043b\u044f \u0434\u0440\u0443\u0433\u0438\u0445 \u043f\u043b\u0430\u0442.</p> <p>\u0423 \u043c\u0435\u043d\u044f \u043f\u043b\u0430\u0442\u0430 \u043f\u043e\u0441\u043b\u0435 \u043f\u043e\u043a\u0443\u043f\u043a\u0438 \u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044e \u043a \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u0443 \u043c\u043e\u0440\u0433\u0430\u043b\u0430 \u0441\u0438\u043d\u0438\u043c \u0434\u0438\u043e\u0434\u043e\u043c. \u0422\u043e \u0431\u0438\u0448\u044c \u0432 \u043d\u0435\u0439 \u0443\u0436\u0435 \u0431\u044b\u043b\u0430 \u043a\u0430\u043a\u0430\u044f-\u0442\u043e \u043f\u0440\u043e\u0441\u0442\u0435\u0439\u0448\u0430\u044f \u043f\u0440\u043e\u0448\u0438\u0432\u043a\u0430 \u0434\u043b\u044f \u0434\u0435\u043c\u043e\u043d\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u0440\u0430\u0431\u043e\u0442\u043e\u0441\u043f\u043e\u0441\u043e\u0431\u043d\u043e\u0441\u0442\u0438.</p> <p>\u041f\u043b\u0430\u0442\u0443 \u043a \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430\u0442\u043e\u0440\u0443 \u043d\u0430\u0434\u043e \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0442\u0440\u0435\u043c\u044f \u043f\u0440\u043e\u0432\u043e\u0434\u0430\u043c\u0438: GND, SWCLK, SWDIO. \u0422\u0430\u043a\u0436\u0435 \u043f\u043b\u0430\u0442\u0435 \u043d\u0443\u0436\u043d\u043e \u043f\u0438\u0442\u0430\u043d\u0438\u0435, \u043b\u0443\u0447\u0448\u0435 \u0432\u0441\u0435\u0433\u043e \u043f\u043e\u0434\u0430\u0442\u044c \u043f\u0438\u0442\u0430\u043d\u0438\u0435 \u0447\u0435\u0442\u0432\u0451\u0440\u0442\u044b\u043c \u043f\u0440\u043e\u0432\u043e\u0434\u043e\u043c \u043e\u0442 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430\u0442\u043e\u0440\u0430. \u041d\u0430 \u043f\u043b\u0430\u0442\u0435 \u044d\u0442\u0438 \u043f\u0438\u043d\u044b \u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u044b \u0441 \u043f\u0440\u043e\u0442\u0438\u0432\u043e\u043f\u043e\u043b\u043e\u0436\u043d\u043e\u0439 USB-\u0440\u0430\u0437\u044a\u0451\u043c\u0443 \u0441\u0442\u043e\u0440\u043e\u043d\u0435, \u043d\u0430 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430\u0442\u043e\u0440\u0435 - \u0441\u043e\u0433\u043b\u0430\u0441\u043d\u043e \u0441\u0445\u0435\u043c\u044b, \u0432\u0441\u0451 \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u043e, \u0442\u0443\u0442 \u0441\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u0435\u0439 \u0431\u044b\u0442\u044c \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e.</p> <p>\u041f\u043e\u0441\u043b\u0435 \u0442\u043e\u0433\u043e, \u043a\u0430\u043a \u043f\u043b\u0430\u0442\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0430 \u043a \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430\u0442\u043e\u0440\u0443, <code>st-info --probe</code> \u0434\u043e\u043b\u0436\u0435\u043d \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u043f\u043b\u0430\u0442\u0435. \u0415\u0441\u043b\u0438 \u043d\u0430 \u044d\u0442\u043e\u043c \u044d\u0442\u0430\u043f\u0435 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b, \u043d\u0443\u0436\u043d\u043e \u0438\u0445 \u0440\u0435\u0448\u0438\u0442\u044c.</p> <p>\u0412\u043e\u0442 \u0447\u0442\u043e \u0432\u044b\u0432\u043e\u0434\u0438\u0442 \u0443 \u043c\u0435\u043d\u044f:</p> <pre><code>st-info --probe\nFound 1 stlink programmers\n  version:    V2J29S18\n  serial:     066CFF494849887767255731\n  flash:      65536 (pagesize: 1024)\n  sram:       20480\n  chipid:     0x0410\n  descr:      F1xx Medium-density\n</code></pre> <p>\u0422\u0435\u043f\u0435\u0440\u044c \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0435\u043c \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u043a \u043f\u043b\u0430\u0442\u0435 \u043e\u0442\u043b\u0430\u0434\u0447\u0438\u043a\u043e\u043c. \u042d\u0442\u043e \u0441\u0430\u043c\u043e\u0435 \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u043e\u0435. \u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0432 \u043e\u0434\u043d\u043e\u0439 \u0432\u043a\u043b\u0430\u0434\u043a\u0435 \u0442\u0435\u0440\u043c\u0438\u043d\u0430\u043b\u0430 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u043c <code>st-util --connect-under-reset</code></p> <p>\u041e\u043d \u0432\u044b\u0432\u0435\u0434\u0435\u0442 \u0447\u0442\u043e-\u0442\u043e \u0432\u0440\u043e\u0434\u0435</p> <pre><code>2023-09-08T17:26:46 WARN common.c: NRST is not connected\n2023-09-08T17:26:46 INFO common.c: F1xx Medium-density: 20 KiB SRAM, 64 KiB flash in at least 1 KiB pages.\n2023-09-08T17:26:46 INFO gdb-server.c: Listening at *:4242...\n</code></pre> <p>\u0427\u0442\u043e \u044d\u0442\u043e \u043f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u0435 \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442, \u044f \u043d\u0435 \u0437\u043d\u0430\u044e, \u0435\u0441\u043b\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043d\u043e\u0433\u0443 NRST \u043e\u0442 \u043c\u0438\u043a\u0440\u043e\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440\u0430 \u043a \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430\u0442\u043e\u0440\u0443, \u043e\u043d\u043e \u043d\u0435 \u0438\u0441\u0447\u0435\u0437\u0430\u0435\u0442. \u041d\u043e \u0432\u0440\u043e\u0434\u0435 \u0432\u0441\u0451 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0431\u0443\u0434\u0435\u043c \u0435\u0433\u043e \u0438\u0433\u043d\u043e\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c.</p> <p>\u0421\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u043e \u0432\u0438\u0434\u043d\u043e: \u0447\u0442\u043e st-util \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u043b TCP-\u0441\u0435\u0440\u0432\u0435\u0440 \u043d\u0430 \u043f\u043e\u0440\u0442\u0443 4242. \u041a \u044d\u0442\u043e\u043c\u0443 \u0441\u0435\u0440\u0432\u0435\u0440\u0443 \u0431\u0443\u0434\u0435\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0442\u044c\u0441\u044f gdb.</p> <p>\u0412\u043e \u0432\u0442\u043e\u0440\u043e\u0439 \u0432\u043a\u043b\u0430\u0434\u043a\u0435 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u043c <code>arm-none-eabi-gdb</code> (\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043e\u0431\u044b\u0447\u043d\u044b\u0439 gdb \u0442\u043e\u0436\u0435 \u043f\u043e\u0434\u043e\u0439\u0434\u0451\u0442, \u044f \u043d\u0435 \u0437\u043d\u0430\u044e, \u0447\u0435\u0441\u0442\u043d\u043e \u0433\u043e\u0432\u043e\u0440\u044f, \u0432 \u0447\u0451\u043c \u043e\u0442\u043b\u0438\u0447\u0438\u0435):</p> <pre><code>arm-none-eabi-gdb\nGNU gdb (Arm GNU Toolchain 12.3.Rel1 (Build arm-12.35)) 13.2.90.20230627-git\nCopyright (C) 2023 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.\nType \"show copying\" and \"show warranty\" for details.\nThis GDB was configured as \"--host=x86_64-pc-linux-gnu --target=arm-none-eabi\".\nType \"show configuration\" for configuration details.\nFor bug reporting instructions, please see:\n&lt;https://bugs.linaro.org/&gt;.\nFind the GDB manual and other documentation resources online at:\n    &lt;http://www.gnu.org/software/gdb/documentation/&gt;.\n\nFor help, type \"help\".\nType \"apropos word\" to search for commands related to \"word\".\n(gdb)\n</code></pre> <p>\u0418 \u0434\u0430\u043b\u044c\u0448\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0435\u043c\u0441\u044f \u043a \u0432\u044b\u0448\u0435\u0443\u043f\u043e\u043c\u044f\u043d\u0443\u0442\u043e\u043c\u0443 \u0441\u0435\u0440\u0432\u0435\u0440\u0443:</p> <pre><code>(gdb) target remote 127.0.0.1:4242\nRemote debugging using 127.0.0.1:4242\nwarning: No executable has been specified and target does not support\ndetermining executable automatically.  Try using the \"file\" command.\n0x08000130 in ?? ()\n</code></pre> <p>\u0418\u0442\u0430\u043a \u043c\u044b \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u043b\u0438\u0441\u044c \u043e\u0442\u043b\u0430\u0434\u0447\u0438\u043a\u043e\u043c \u043a \u043f\u043b\u0430\u0442\u0435. \u0412 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0439 \u0441\u0442\u0440\u043e\u0447\u043a\u0435 \u0443 \u0432\u0430\u0441 \u0441\u043a\u043e\u0440\u0435\u0439 \u0432\u0441\u0435\u0433\u043e \u0431\u0443\u0434\u0435\u0442 \u0434\u0440\u0443\u0433\u043e\u0439 \u0430\u0434\u0440\u0435\u0441.</p> <p>\u0422\u0435\u043f\u0435\u0440\u044c \u043f\u0430\u0440\u0443 \u0441\u043b\u043e\u0432 \u043f\u0440\u043e \u0442\u043e, \u043a\u0430\u043a \u0432\u043e\u043e\u0431\u0449\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u044d\u0442\u043e\u0442 \u043c\u0438\u043a\u0440\u043e\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440. \u042f, \u043a\u043e\u043d\u0435\u0447\u043d\u043e, \u0431\u0443\u0434\u0443 \u0443\u043f\u0443\u0441\u043a\u0430\u0442\u044c \u043c\u043d\u043e\u0433\u043e \u0434\u0435\u0442\u0430\u043b\u0435\u0439, \u043f\u043e\u043f\u044b\u0442\u0430\u044e\u0441\u044c \u043f\u0435\u0440\u0435\u0434\u0430\u0442\u044c \u0441\u0443\u0442\u044c.</p> <p>\u0412\u0441\u0451 \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u0441\u043e \u0432\u0441\u0435\u043c\u0438 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430\u043c\u0438 \u0432\u0435\u0434\u0451\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 \u0430\u0434\u0440\u0435\u0441\u043d\u043e\u0435 \u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0441\u0442\u0432\u043e (\u0438 \u043f\u0440\u0435\u0440\u044b\u0432\u0430\u043d\u0438\u044f) \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f\u043c\u0438 \u0447\u0442\u0435\u043d\u0438\u044f \u0438 \u0437\u0430\u043f\u0438\u0441\u0438 \u043f\u0430\u043c\u044f\u0442\u0438. \u042d\u0442\u043e 32-\u0431\u0438\u0442\u043d\u044b\u0439 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440, \u0442.\u0435. \u043e\u043d \u043c\u043e\u0436\u0435\u0442 \u0430\u0434\u0440\u0435\u0441\u043e\u0432\u0430\u0442\u044c 4 \u0413\u0438\u0411 \u0430\u0434\u0440\u0435\u0441\u043d\u043e\u0433\u043e \u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0441\u0442\u0432\u0430. \u041a\u043e\u043d\u0435\u0447\u043d\u043e \u043f\u0430\u043c\u044f\u0442\u0438 \u0443 \u043d\u0435\u0433\u043e \u0433\u043e\u0440\u0430\u0437\u0434\u043e \u043c\u0435\u043d\u044c\u0448\u0435, \u043d\u0430 \u043c\u043e\u0451\u043c \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0435 20 \u041a\u0438\u0411 \u043e\u043f\u0435\u0440\u0430\u0442\u0438\u0432\u043d\u043e\u0439 \u043f\u0430\u043c\u044f\u0442\u0438 \u0438 64 \u041a\u0438\u0411 \u0444\u043b\u0435\u0448-\u043f\u0430\u043c\u044f\u0442\u0438. \u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u0430\u0434\u0440\u0435\u0441\u043d\u043e\u0433\u043e \u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0441\u0442\u0432\u0430 \u0445\u0432\u0430\u0442\u0430\u0435\u0442 \u0438 \u043d\u0430 \u043e\u043f\u0435\u0440\u0430\u0442\u0438\u0432\u043d\u0443\u044e \u043f\u0430\u043c\u044f\u0442\u044c, \u0438 \u043d\u0430 \u0444\u043b\u0435\u0448-\u043f\u0430\u043c\u044f\u0442\u044c, \u0438 \u043d\u0430 \u0432\u0441\u0435 \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0435 \u043f\u0435\u0440\u0438\u0444\u0435\u0440\u0438\u0439\u043d\u044b\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430. \u041e\u043f\u0435\u0440\u0430\u0442\u0438\u0432\u043d\u0430\u044f \u043f\u0430\u043c\u044f\u0442\u044c \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442\u0441\u044f \u0441 \u0430\u0434\u0440\u0435\u0441\u0430 <code>0x2000_0000</code>, \u0430 \u0444\u043b\u0435\u0448-\u043f\u0430\u043c\u044f\u0442\u044c \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442\u0441\u044f \u0441 \u0430\u0434\u0440\u0435\u0441\u0430 <code>0x0800_0000</code>. \u041a\u0440\u043e\u043c\u0435 \u0442\u043e\u0433\u043e \u0443 \u043c\u0438\u043a\u0440\u043e\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440\u0430 \u0438\u043c\u0435\u0435\u0442\u0441\u044f \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0434\u0435\u0441\u044f\u0442\u043a\u043e\u0432 \u043f\u0435\u0440\u0438\u0444\u0435\u0440\u0438\u0439\u043d\u044b\u0445 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432 (\u0426\u0410\u041f, \u0410\u0426\u041f, DMA-\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u0435\u0440, \u0442\u0430\u0439\u043c\u0435\u0440\u044b, \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u0434\u043b\u044f \u0432\u0432\u043e\u0434\u0430-\u0432\u044b\u0432\u043e\u0434\u0430 \u043f\u043e \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u043c \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u0430\u043c \u0438 \u043c\u043d\u043e\u0433\u043e\u0435 \u0434\u0440\u0443\u0433\u043e\u0435), \u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u0438\u0437 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u044b \u0441\u0432\u043e\u0438 \u0443\u0447\u0430\u0441\u0442\u043a\u0438 \u0430\u0434\u0440\u0435\u0441\u043d\u043e\u0433\u043e \u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0441\u0442\u0432\u0430, \u0447\u0435\u0440\u0435\u0437 \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0438\u0434\u0451\u0442 \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u0441 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0432\u0443\u044e\u0449\u0438\u043c \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e\u043c.</p> <p>\u0412 \u0434\u0430\u043b\u044c\u043d\u0435\u0439\u0448\u0435\u043c \u044f \u0431\u0443\u0434\u0443 \u0432\u043e\u043b\u044c\u043d\u043e \u043e\u0431\u0440\u0430\u0449\u0430\u0442\u044c\u0441\u044f \u0441 \u0442\u0435\u0440\u043c\u0438\u043d\u043e\u043c \"\u043f\u0430\u043c\u044f\u0442\u044c\", \u043e\u0431\u043e\u0437\u043d\u0430\u0447\u0430\u044f \u0438\u043c \u0433\u0434\u0435-\u0442\u043e \u0430\u0434\u0440\u0435\u0441\u043d\u043e\u0435 \u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0441\u0442\u0432\u043e, \u0433\u0434\u0435-\u0442\u043e \u043e\u043f\u0435\u0440\u0430\u0442\u0438\u0432\u043d\u0443\u044e \u043f\u0430\u043c\u044f\u0442\u044c, \u0433\u0434\u0435-\u0442\u043e \u0444\u043b\u0435\u0448 \u043f\u0430\u043c\u044f\u0442\u044c, \u0438\u0437 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043f\u043e\u043d\u044f\u0442\u043d\u043e.</p> <p>\u0418\u0442\u0430\u043a \u043c\u044b \u043f\u043e\u0434\u0430\u043b\u0438 \u043f\u0438\u0442\u0430\u043d\u0438\u0435. \u0423 \u043c\u0438\u043a\u0440\u043e\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440\u0430 \u0435\u0441\u0442\u044c \u0434\u0432\u0430 \u043f\u0438\u043d\u0430 BOOT0 \u0438 BOOT1. \u041d\u0430 \u043f\u043b\u0430\u0442\u0435 \u043e\u043d\u0438 \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u0434\u0432\u0443\u043c\u044f \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0430\u043c\u0438. \u0415\u0441\u0442\u044c \u0442\u0440\u0438 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438, \u043d\u0430\u0441 \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u0443\u0435\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0438\u0437 \u0444\u043b\u0435\u0448-\u043f\u0430\u043c\u044f\u0442\u0438. \u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u043d\u0443\u0436\u043d\u043e \u0432\u044b\u0441\u0442\u0430\u0432\u0438\u0442\u044c BOOT0 \u0432 <code>0</code> (\u0442.\u0435. \u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c \u0441 \u00ab\u0437\u0435\u043c\u043b\u0451\u0439\u00bb), \u043d\u0430 \u043c\u043e\u0435\u0439 \u043f\u043b\u0430\u0442\u0435 \u044d\u0442\u043e\u043c\u0443 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u043c\u044b\u0447\u043a\u0438 \u0431\u043b\u0438\u0436\u0435 \u043a USB-\u043f\u043e\u0440\u0442\u0443. \u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043f\u0440\u043e \u044d\u0442\u043e \u043c\u043e\u0436\u043d\u043e \u0432 Reference Manual, \u0440\u0430\u0437\u0434\u0435\u043b 3.4. \u0412 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u0439 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440 \u0434\u0435\u043b\u0430\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u043c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043f\u043e \u0430\u0434\u0440\u0435\u0441\u0443 <code>0x0000_0000</code>. \u0418\u043d\u044b\u043c\u0438 \u0441\u043b\u043e\u0432\u0430\u043c\u0438, \u043a\u043e\u0433\u0434\u0430 \u043c\u044b \u0433\u0440\u0443\u0437\u0438\u043c\u0441\u044f \u0441 \u0444\u043b\u0435\u0448-\u043f\u0430\u043c\u044f\u0442\u0438, \u0442\u043e \u0430\u0434\u0440\u0435\u0441 <code>0x0800_0000</code> (\u0430 \u0442\u0430\u043a\u0436\u0435 \u043f\u043e\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0430\u0434\u0440\u0435\u0441\u0430 \u0444\u043b\u0435\u0448-\u043f\u0430\u043c\u044f\u0442\u0438) \u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0441\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u043c \u0438 \u043f\u043e \u0430\u0434\u0440\u0435\u0441\u0443 <code>0x0000_0000</code> . \u0414\u0430\u043b\u0435\u0435 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440 \u0447\u0438\u0442\u0430\u0435\u0442 \u043f\u043e \u0430\u0434\u0440\u0435\u0441\u0443 <code>0x0000_0000</code> 4 \u0431\u0430\u0439\u0442\u0430 \u0438 \u043f\u0440\u0438\u0441\u0432\u0430\u0438\u0432\u0430\u0435\u0442 \u044d\u0442\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0443 sp (stack pointer, \u0432\u0435\u0440\u0448\u0438\u043d\u0430 \u0441\u0442\u0435\u043a\u0430). \u0414\u0430\u043b\u0435\u0435 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440 \u0447\u0438\u0442\u0430\u0435\u0442 \u043f\u043e \u0430\u0434\u0440\u0435\u0441\u0443 <code>0x0000_0004</code> 4 \u0431\u0430\u0439\u0442\u0430 \u0438 \u043f\u0440\u0438\u0441\u0432\u0430\u0438\u0432\u0430\u0435\u0442 \u044d\u0442\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0443 pc (program counter), \u0438\u043d\u044b\u043c\u0438 \u0441\u043b\u043e\u0432\u0430\u043c\u0438 \u0434\u0435\u043b\u0430\u0435\u0442 \u043f\u0435\u0440\u0435\u0445\u043e\u0434 \u043f\u043e \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u043c\u0443 \u0430\u0434\u0440\u0435\u0441\u0443. \u041d\u0443 \u0438, \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u043e, \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442 \u0440\u0430\u0431\u043e\u0442\u0443. \u0427\u0438\u0442\u0430\u0435\u0442 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044e, \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 \u0438 \u0442\u0434.</p> <p>\u041f\u043e\u043c\u0438\u043c\u043e \u044d\u0442\u043e\u0433\u043e \u0443 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440\u0430 \u0435\u0441\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0435\u0433\u043e \u043e\u0442\u043b\u0430\u0434\u043a\u0438. \u0421\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u043e \u0447\u0442\u043e \u043c\u044b \u0438 \u0441\u0434\u0435\u043b\u0430\u043b\u0438, \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0432 \u043a \u043d\u0435\u043c\u0443 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430\u0442\u043e\u0440. \u0412 \u044d\u0442\u043e\u043c \u0440\u0435\u0436\u0438\u043c\u0435 \u043e\u043d \u043f\u043e\u0441\u043b\u0435 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c, \u0430 \u0436\u0434\u0451\u0442 \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u043e\u0442 \u043e\u0442\u043b\u0430\u0434\u0447\u0438\u043a\u0430. \u041a\u0440\u043e\u043c\u0435 \u0442\u043e\u0433\u043e \u043e\u0442\u043b\u0430\u0434\u0447\u0438\u043a \u043c\u043e\u0436\u0435\u0442 \u0447\u0438\u0442\u0430\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0432\u0441\u0435\u0445 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u043e\u0432, \u043b\u044e\u0431\u043e\u0433\u043e \u0430\u0434\u0440\u0435\u0441\u0430 \u043e\u043f\u0435\u0440\u0430\u0442\u0438\u0432\u043d\u043e\u0439 \u043f\u0430\u043c\u044f\u0442\u0438 \u0438 \u0442\u0434.</p> <p>\u0421\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u043e \u0434\u043b\u044f \u043d\u0430\u0447\u0430\u043b\u0430 \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u0435\u043c \u043f\u043e 8 \u0431\u0430\u0439\u0442\u043e\u0432 \u043f\u043e \u0430\u0434\u0440\u0435\u0441\u0430\u043c <code>0x0000_0000</code> \u0438 <code>0x0800_0000</code>, \u0443\u0431\u0435\u0434\u0438\u043c\u0441\u044f, \u0447\u0442\u043e \u043e\u043d\u0438 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442, \u0430 \u0442\u0430\u043a\u0436\u0435 \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0435\u043c \u043f\u043e\u043d\u044f\u0442\u044c \u0438\u0445 \u0441\u043c\u044b\u0441\u043b.</p> <pre><code>(gdb) x/2z 0x00000000\n0x0:    0x20004ffc  0x08000131\n(gdb) x/2z 0x08000000\n0x8000000:  0x20004ffc  0x08000131\n</code></pre> <p>\u041a\u043e\u043c\u0430\u043d\u0434\u0430 <code>x</code> (\u043e\u0442 \u0441\u043b\u043e\u0432\u0430 eXamine) \u0447\u0438\u0442\u0430\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0438\u0437 \u043f\u0430\u043c\u044f\u0442\u0438 \u043f\u043e \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u043c\u0443 \u0430\u0434\u0440\u0435\u0441\u0443. \u0421\u0443\u0444\u0444\u0438\u043a\u0441 <code>/2z</code> \u0433\u043e\u0432\u043e\u0440\u0438\u0442 \u043e \u0442\u043e\u043c, \u0447\u0442\u043e \u043c\u044b \u0445\u043e\u0442\u0438\u043c \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u0442\u044c 2 \u0441\u043b\u043e\u0432\u0430 (\u0442.\u0435. 4-\u0431\u0430\u0439\u0442\u043e\u0432\u044b\u0445 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f) \u0438 \u043d\u0430\u043f\u0435\u0447\u0430\u0442\u0430\u0442\u044c \u0438\u0445 \u0432 16-\u0440\u0438\u0447\u043d\u043e\u043c \u0444\u043e\u0440\u043c\u0430\u0442\u0435.</p> <p>\u041a\u0430\u043a \u0432\u0438\u0434\u043d\u043e, \u043f\u043e \u043e\u0431\u043e\u0438\u043c \u0430\u0434\u0440\u0435\u0441\u0430\u043c \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u043b\u0435\u0436\u0430\u0442 \u043e\u0434\u0438\u043d\u0430\u043a\u043e\u0432\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435. \u0418\u043d\u044b\u043c\u0438 \u0441\u043b\u043e\u0432\u0430\u043c\u0438, \u0435\u0441\u043b\u0438 \u0432\u0435\u0440\u0438\u0442\u044c \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044e \u0432\u044b\u0448\u0435, \u0442\u043e \u043f\u043e\u0441\u043b\u0435 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0443 sp \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u043b\u043e \u043f\u0440\u0438\u0441\u0432\u043e\u0438\u0442\u044c\u0441\u044f \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 <code>0x2000_4ffc</code>, \u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0443 pc \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 <code>0x0800_0131</code>. \u0421\u0435\u0439\u0447\u0430\u0441 \u043c\u044b \u044d\u0442\u043e\u043c \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u043c, \u0430 \u043f\u043e\u043a\u0430 \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0435\u043c \u0447\u0443\u0442\u044c-\u0447\u0443\u0442\u044c \u043f\u043e\u0445\u0443\u043b\u0438\u0433\u0430\u043d\u0438\u0442\u044c. \u041d\u0430 \u043c\u043e\u0435\u0439 \u043f\u043b\u0430\u0442\u0435 64 \u043a\u0438\u0431\u0438\u0431\u0430\u0439\u0442\u0430 \u0444\u043b\u0435\u0448\u0430, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0435\u043c \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u0442\u044c \u043f\u0430\u0440\u0443 \u0441\u043b\u043e\u0432 \u0432 \u0441\u0430\u043c\u043e\u043c \u043a\u043e\u043d\u0446\u0435.</p> <pre><code>(gdb) x/2z 0x08000000 + 64 * 1024 - 4\n0x800fffc:  0xffffffff  Cannot access memory at address 0x8010000\n(gdb)\n</code></pre> <p>\u0421\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u043e \u043a\u0430\u043a \u0438 \u043e\u0436\u0438\u0434\u0430\u043b\u043e\u0441\u044c: \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0435 \u0441\u043b\u043e\u0432\u043e \u0435\u0449\u0451 \u0447\u0442\u043e-\u0442\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442, \u0430 \u043f\u043e\u0441\u043b\u0435 \u043d\u0435\u0433\u043e \u0443\u0436\u0435 \u0430\u0434\u0440\u0435\u0441\u0430 \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u0434\u043b\u044f \u0447\u0442\u0435\u043d\u0438\u044f. \u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439 x \u043c\u043e\u0436\u043d\u043e \u0438\u0441\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u044c \u0447\u0442\u043e \u0443\u0433\u043e\u0434\u043d\u043e \u0431\u0435\u0437\u043e \u0432\u0441\u044f\u043a\u0438\u0445 \u043e\u043f\u0430\u0441\u0435\u043d\u0438\u0439.</p> <p>\u0422\u0435\u043f\u0435\u0440\u044c \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u043c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u043e\u0432:</p> <pre><code>(gdb) print/z $sp\n$1 = 0x20004ffc\n(gdb) print/z $pc\n$2 = 0x08000130\n</code></pre> <p>\u0414\u043b\u044f \u0447\u0442\u0435\u043d\u0438\u044f \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043a\u043e\u043c\u0430\u043d\u0434\u0430 <code>print</code>. \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u044b \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u0447\u0435\u0440\u0435\u0437 \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441 <code>$sp</code>, <code>$pc</code>, <code>$r0</code> \u0438 \u0442\u0434. \u0422\u0430\u043a\u0436\u0435 \u0432\u0441\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u044b \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439 <code>info registers</code>. \u0412\u0430\u0436\u043d\u043e \u043f\u043e\u043d\u0438\u043c\u0430\u0442\u044c \u0440\u0430\u0437\u043d\u0438\u0446\u0443 \u043c\u0435\u0436\u0434\u0443 <code>print $sp</code> \u0438 <code>x $s</code>p. \u041f\u0435\u0440\u0432\u0430\u044f \u043a\u043e\u043c\u0430\u043d\u0434\u0430 \u043f\u0435\u0447\u0430\u0442\u0430\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430, \u0432\u0442\u043e\u0440\u0430\u044f \u043a\u043e\u043c\u0430\u043d\u0434\u0430 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430 \u0438\u043d\u0442\u0435\u0440\u043f\u0440\u0435\u0442\u0438\u0440\u0443\u0435\u0442, \u043a\u0430\u043a \u0430\u0434\u0440\u0435\u0441 \u0438 \u043f\u0435\u0447\u0430\u0442\u0430\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0438\u0437 \u043f\u0430\u043c\u044f\u0442\u0438.</p> <p>\u0421\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u043c \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430 <code>$sp</code> \u0432\u0441\u0451 \u043e\u0436\u0438\u0434\u0430\u0435\u043c\u043e - \u043e\u043d \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u043b\u0441\u044f \u0438\u0437 \u0430\u0434\u0440\u0435\u0441\u0430 <code>0x0000_0000</code>, \u0430 \u0432\u043e\u0442 <code>$pc</code> \u043e\u043a\u0430\u0437\u0430\u043b\u0441\u044f \u043d\u0430 \u0435\u0434\u0438\u043d\u0438\u0446\u0443 \u043c\u0435\u043d\u044c\u0448\u0435. \u0422\u0443\u0442 \u043c\u043e\u0436\u043d\u043e \u043c\u043d\u043e\u0433\u043e \u0440\u0430\u0441\u0441\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c, \u043d\u043e \u044d\u0442\u043e \u0432\u0441\u0451 \u043d\u0435 \u043e\u0447\u0435\u043d\u044c \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u043e - \u043f\u0440\u043e\u0441\u0442\u043e \u0437\u0430\u043f\u043e\u043c\u043d\u0438\u0442\u0435, \u0447\u0442\u043e \u0432 \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0435 arm cortex \u0430\u0434\u0440\u0435\u0441\u0430 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0439 \u0432\u0441\u0435\u0433\u0434\u0430 \u0447\u0451\u0442\u043d\u044b\u0435, \u043f\u0440\u0438 \u044d\u0442\u043e\u043c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0435\u0439 \u0438\u043d\u043e\u0433\u0434\u0430 \u043d\u0435\u0447\u0451\u0442\u043d\u044b\u0435. \u0421\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u043e \u0430\u0434\u0440\u0435\u0441 <code>0x0000_0004</code>, \u0441 \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u043d\u0430\u0447\u043d\u0451\u0442\u0441\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435, \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0435\u0447\u0451\u0442\u043d\u044b\u043c, \u043f\u0440\u0438 \u044d\u0442\u043e\u043c \u043c\u043b\u0430\u0434\u0448\u0438\u0439 \u0431\u0438\u0442 \u043e\u0431\u043d\u0443\u043b\u0438\u0442\u0441\u044f \u043f\u0435\u0440\u0435\u0434 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u043e\u043c. \u0422\u0430\u043a\u0436\u0435 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0430 <code>BX</code>, <code>BLX</code> \u0442\u0440\u0435\u0431\u0443\u044e\u0442 \u0442\u043e \u0436\u0435 \u0441\u0430\u043c\u043e\u0435: \u043c\u043b\u0430\u0434\u0448\u0438\u0439 \u0431\u0438\u0442 \u0430\u0434\u0440\u0435\u0441\u0430, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u043f\u0435\u0440\u0435\u0445\u043e\u0434, \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0440\u0430\u0432\u0435\u043d \u0435\u0434\u0438\u043d\u0438\u0446\u0435, \u043d\u043e \u043f\u0440\u0438 \u044d\u0442\u043e\u043c \u043f\u0435\u0440\u0435\u0445\u043e\u0434 \u0434\u0435\u043b\u0430\u0435\u0442\u0441\u044f \u043d\u0430 \u0430\u0434\u0440\u0435\u0441 \u0441 \u043d\u0443\u043b\u0435\u0432\u044b\u043c \u043c\u043b\u0430\u0434\u0448\u0438\u043c \u0431\u0438\u0442\u043e\u043c. \u0410 \u043a\u043e\u043c\u0430\u043d\u0434\u044b <code>B</code> \u0438 <code>BL</code> \u043d\u0435 \u0442\u0440\u0435\u0431\u0443\u044e\u0442, \u0432\u043e\u0442 \u0442\u0430\u043a\u0430\u044f \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u044c.</p> <p>\u0412 \u0438\u0442\u043e\u0433\u0435 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440 \u043f\u0435\u0440\u0435\u0448\u0451\u043b \u043d\u0430 \u0430\u0434\u0440\u0435\u0441 <code>0x0800_0130</code> \u0438 \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u043b\u0441\u044f \u0432 \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u0438 \u043a\u043e\u043c\u0430\u043d\u0434 \u043e\u0442 \u043e\u0442\u043b\u0430\u0434\u0447\u0438\u043a\u0430. \u041d\u0430 \u0432\u0430\u0448\u0435\u0439 \u043f\u043b\u0430\u0442\u0435 \u0441\u043a\u043e\u0440\u0435\u0439 \u0432\u0441\u0435\u0433\u043e \u0432\u0441\u0435 \u044d\u0442\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0431\u0443\u0434\u0443\u0442 \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u0434\u0440\u0443\u0433\u0438\u043c\u0438, \u044f \u00ab\u0437\u0430\u0432\u043e\u0434\u0441\u043a\u0443\u044e\u00bb \u043f\u0440\u043e\u0448\u0438\u0432\u043a\u0443 \u0441\u0442\u0451\u0440, \u043d\u043e \u043f\u0440\u0438\u043d\u0446\u0438\u043f \u0440\u043e\u0432\u043d\u043e \u0442\u043e\u0442 \u0436\u0435. \u041d\u0430 \u0432\u0441\u044f\u043a\u0438\u0439 \u0441\u043b\u0443\u0447\u0430\u0439 \u043d\u0430\u043f\u043e\u043c\u043d\u044e, \u0447\u0442\u043e \u043f\u043e \u0430\u0434\u0440\u0435\u0441\u0443 <code>0x0800_0130</code> \u0443 \u043d\u0430\u0441 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u0444\u043b\u0435\u0448-\u043f\u0430\u043c\u044f\u0442\u044c, \u0442.\u0435. \u044d\u0442\u043e \u043a\u043e\u0434 \u0438\u0437 \u0444\u043b\u0435\u0448-\u043f\u0430\u043c\u044f\u0442\u0438.</p> <p>\u0422\u0435\u043f\u0435\u0440\u044c \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0434\u0438\u0437\u0430\u0441\u0441\u0435\u043c\u0431\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044e, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0441\u0435\u0439\u0447\u0430\u0441 \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c\u0441\u044f:</p> <pre><code>(gdb) x/i $pc\n=&gt; 0x8000130:   add.w   r0, r0, #1\n</code></pre> <p>\u041a\u0430\u043a \u0432\u0438\u0434\u043d\u043e, \u0434\u043b\u044f \u0434\u0438\u0437\u0430\u0441\u0441\u0435\u043c\u0431\u043b\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0442\u0430 \u0436\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u0430 <code>x</code>. \u0422\u043e\u043b\u044c\u043a\u043e \u0432\u043c\u0435\u0441\u0442\u043e <code>/z</code> \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0444\u043e\u0440\u043c\u0430\u0442 <code>/i</code>. <code>z</code> \u044d\u0442\u043e \u0448\u0435\u0441\u0442\u043d\u0430\u0434\u0446\u0430\u0442\u0435\u0440\u0438\u0447\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442, <code>i</code> \u044d\u0442\u043e \u0438\u043d\u0442\u0435\u0440\u043f\u0440\u0435\u0442\u0430\u0446\u0438\u044f \u0447\u0438\u0441\u043b\u0430, \u043a\u0430\u043a \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438. \u0414\u043b\u044f \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u0430 \u043f\u043e\u043a\u0430\u0436\u0443 \u0435\u0449\u0451 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0444\u043e\u0440\u043c\u0430\u0442\u043e\u0432, \u0434\u0443\u043c\u0430\u044e, \u0432\u0441\u0451 \u0438 \u0442\u0430\u043a \u043e\u0447\u0435\u0432\u0438\u0434\u043d\u043e.</p> <pre><code>(gdb) x/z $pc\n0x8000130:  0x0001f100\n(gdb) x/d $pc\n0x8000130:  127232\n(gdb) x/x $pc\n0x8000130:  0x0001f100\n(gdb) x/t $pc\n0x8000130:  00000000000000011111000100000000\n</code></pre> <p>\u0424\u043e\u0440\u043c\u0430\u0442\u044b <code>/z</code> \u0438 <code>/x</code> \u043e\u0437\u043d\u0430\u0447\u0430\u044e\u0442 \u043e\u0434\u043d\u043e \u0438 \u0442\u043e \u0436\u0435, \u043d\u043e \u0432 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0441\u043b\u0443\u0447\u0430\u044f\u0445 <code>/x</code> \u043d\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442 \u043d\u0443\u043b\u0438 \u0441\u043b\u0435\u0432\u0430, \u0430 <code>/z</code> \u0432\u0441\u0435\u0433\u0434\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442 \u043d\u0443\u043b\u0438.</p> <p>\u0418\u043d\u044b\u043c\u0438 \u0441\u043b\u043e\u0432\u0430\u043c\u0438 4 \u0431\u0430\u0439\u0442\u0430 <code>01 00 f1 00</code> \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440\u043e\u043c \u0438\u043d\u0442\u0435\u0440\u043f\u0440\u0435\u0442\u0438\u0440\u0443\u044e\u0442\u0441\u044f, \u043a\u0430\u043a \u043a\u043e\u043c\u0430\u043d\u0434\u0430 <code>add.w r0, r0, #1</code>. \u042d\u0442\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0430 \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u0430 \u043f\u0441\u0435\u0432\u0434\u043e\u043a\u043e\u0434\u0443 <code>r0 := r0 + 1</code>.</p> <p>\u0412\u0430\u0436\u043d\u043e \u043f\u043e\u043d\u0438\u043c\u0430\u0442\u044c, \u0447\u0442\u043e \u044d\u0442\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0430 \u0435\u0449\u0451 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430, \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440 \u0442\u043e\u043b\u044c\u043a\u043e \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f \u0435\u0451 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c.</p> <p>\u0422\u0435\u043f\u0435\u0440\u044c \u0440\u0430\u0441\u043f\u0435\u0447\u0430\u0442\u0430\u0435\u043c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430 <code>r0</code>, \u0434\u0430\u043b\u0435\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u043c \u043a\u043e\u043c\u0430\u043d\u0434\u0443 \u0438 \u0440\u0430\u0441\u043f\u0435\u0447\u0430\u0442\u0430\u0435\u043c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430 \u0435\u0449\u0451 \u0440\u0430\u0437.</p> <pre><code>(gdb) p/z $r0\n$6 = 0x48b503b6\n(gdb) stepi\n0x08000134 in ?? ()\n(gdb) p/z $r0\n$7 = 0x48b503b7\n</code></pre> <p>\u041a\u0430\u043a \u0432\u0438\u0434\u043d\u043e, \u0432 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0435 <code>r0</code> \u0431\u044b\u043b\u043e \u043a\u0430\u043a\u043e\u0435-\u0442\u043e \u043d\u0435\u043f\u043e\u043d\u044f\u0442\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0438 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0443\u0432\u0435\u043b\u0438\u0447\u0438\u043b \u044d\u0442\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0432 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0435 <code>r0</code> \u043d\u0430 \u0435\u0434\u0438\u043d\u0438\u0446\u0443. \u041f\u043e\u0441\u043b\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b <code>stepi</code> \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440 \u043f\u0435\u0440\u0435\u0448\u0451\u043b \u043d\u0430 4 \u0431\u0430\u0439\u0442\u0430 \u0432\u043f\u0435\u0440\u0451\u0434 \u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0443\u044e \u043a\u043e\u043c\u0430\u043d\u0434\u0443. \u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0438\u043c, \u0447\u0442\u043e \u0442\u0430\u043c \u0437\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0430.</p> <pre><code>x/i $pc\n=&gt; 0x8000134:   b.w 0x8000130\n</code></pre> <p>\u042d\u0442\u043e \u043a\u043e\u043c\u0430\u043d\u0434\u0430 branch, \u043a\u043e\u043c\u0430\u043d\u0434\u0430 \u0431\u0435\u0437\u0443\u0441\u043b\u043e\u0432\u043d\u043e\u0433\u043e \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0430 \u043f\u043e \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u043c\u0443 \u0430\u0434\u0440\u0435\u0441\u0443. \u0415\u0441\u043b\u0438 \u0435\u0451 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c, \u0442\u043e \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440 \u0432\u0435\u0440\u043d\u0451\u0442\u0441\u044f \u043d\u0430 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0443\u044e \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044e. \u0422\u0430\u043a \u0438 \u0431\u0443\u0434\u0435\u0442 \u0442\u0443\u0434\u0430-\u0441\u044e\u0434\u0430 \u043f\u0440\u044b\u0433\u0430\u0442\u044c, \u0441\u0447\u0438\u0442\u0430\u044f \u043e\u0442 0 \u0434\u043e 4 \u043c\u0438\u043b\u043b\u0438\u0430\u0440\u0434\u043e\u0432 \u043f\u043e \u043a\u0440\u0443\u0433\u0443, \u043f\u043e\u043a\u0430 \u043d\u0435 \u0432\u044b\u043a\u043b\u044e\u0447\u0438\u043c \u043f\u0438\u0442\u0430\u043d\u0438\u0435 \u0438\u043b\u0438 \u043d\u0435 \u043d\u0430\u0436\u043c\u0451\u043c \u043a\u043d\u043e\u043f\u043a\u0443 reset.</p> <p>\u0412 \u043f\u0441\u0435\u0432\u0434\u043e\u043a\u043e\u0434\u0435 \u044d\u0442\u0430 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430 \u0432\u044b\u0433\u043b\u044f\u0434\u0438\u0442 \u043f\u0440\u0438\u043c\u0435\u0440\u043d\u043e \u0442\u0430\u043a:</p> <pre><code>loop: r0 := r0 + 1;\ngoto loop;\n</code></pre> <p>\u0412 \u0434\u0430\u043b\u044c\u043d\u0435\u0439\u0448\u0435\u043c \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u044b \u043d\u0430 \u044f\u0437\u044b\u043a\u0435 \u0430\u0441\u0441\u0435\u043c\u0431\u043b\u0435\u0440\u0430 \u0431\u0443\u0434\u0443\u0442 \u0438\u043b\u043b\u044e\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043f\u0441\u0435\u0432\u0434\u043e\u043a\u043e\u043c.</p> <p>\u041d\u0430 \u0432\u0430\u0448\u0435\u0439 \u043f\u043b\u0430\u0442\u0435 \u0438\u0437 \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0430 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430 \u0431\u0443\u0434\u0435\u0442 \u0434\u0440\u0443\u0433\u0430\u044f. \u041d\u043e \u043f\u0440\u0438\u043d\u0446\u0438\u043f\u044b \u0440\u0430\u0431\u043e\u0442\u044b \u0442\u0435 \u0436\u0435.</p> <p>\u041d\u0430 \u044d\u0442\u043e\u043c \u043f\u0435\u0440\u0432\u0430\u044f \u0447\u0430\u0441\u0442\u044c \u0437\u0430\u043a\u043e\u043d\u0447\u0435\u043d\u0430. \u041c\u044b \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u043b\u0438 \u043f\u043b\u0430\u0442\u0443, \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u043b\u0438\u0441\u044c \u043a \u043d\u0435\u0439 \u0438 \u0443\u0431\u0435\u0434\u0438\u043b\u0438\u0441\u044c, \u0447\u0442\u043e \u0442\u0430\u043c \u0432\u043d\u0443\u0442\u0440\u0438 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440, \u0430 \u043d\u0435 \u043d\u0435\u043e\u043d\u043a\u0430.</p>"},{"location":"2-loop/","title":"\u0427\u0430\u0441\u0442\u044c 2: \u043f\u0438\u0448\u0435\u043c \u043f\u0440\u043e\u0441\u0442\u0435\u0439\u0448\u0443\u044e \u043f\u0440\u043e\u0448\u0438\u0432\u043a\u0443","text":"<p>\u0412\u043e\u043e\u0431\u0449\u0435 \u0433\u043e\u0432\u043e\u0440\u044f, \u043f\u0440\u043e\u0448\u0438\u0432\u043a\u0430 \u0443\u0436\u0435 \u0431\u044b\u043b\u0430 \u043e\u043f\u0438\u0441\u0430\u043d\u0430 \u0432 \u043f\u0435\u0440\u0432\u043e\u0439 \u0447\u0430\u0441\u0442\u0438. \u041d\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0430\u043a\u043e\u0439 \u0444\u0430\u0439\u043b, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u0431\u0443\u0434\u0435\u0442 \u0437\u0430\u043f\u0438\u0441\u0430\u043d\u043e \u043d\u0435\u043a\u043e\u0435 \u0447\u0438\u0441\u043b\u043e \u0438\u0437 \u0447\u0435\u0442\u044b\u0440\u0451\u0445 \u0431\u0430\u0439\u0442\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440 \u043f\u0440\u0438\u0441\u0432\u043e\u0438\u0442 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0443 sp, \u0434\u0430\u043b\u0435\u0435 \u0442\u0430\u043c \u0431\u0443\u0434\u0435\u0442 \u0437\u0430\u043f\u0438\u0441\u0430\u043d, \u043a \u043f\u0440\u0438\u043c\u0435\u0440\u0443, \u0430\u0434\u0440\u0435\u0441 <code>0x08000131</code> \u0432 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0445 \u0447\u0435\u0442\u044b\u0440\u0451\u0445 \u0431\u0430\u0439\u0442\u0430\u0445, \u0434\u0430\u043b\u0435\u0435 \u0431\u0443\u0434\u0443\u0442 \u0440\u0430\u0441\u043f\u043e\u043b\u0430\u0433\u0430\u0442\u044c\u0441\u044f 296 \u043d\u0443\u043b\u0435\u0432\u044b\u0445 \u0431\u0430\u0439\u0442\u043e\u0432 (0x130 - 4 - 4 = 304 - 4 - 4 = 296), \u0430 \u0437\u0430 \u043d\u0438\u043c\u0438 2 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 \u043f\u043e 4 \u0431\u0430\u0439\u0442\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0438 \u0431\u0443\u0434\u0443\u0442 \u0447\u0442\u043e-\u0442\u043e \u0434\u0435\u043b\u0430\u0442\u044c. \u0418\u0442\u043e\u0433\u043e \u0444\u0430\u0439\u043b \u043f\u0440\u043e\u0448\u0438\u0432\u043a\u0438 \u0434\u043e\u043b\u0436\u0435\u043d \u0437\u0430\u043d\u0438\u043c\u0430\u0442\u044c 4 + 4 + 296 + 4 + 4 = 312 \u0431\u0430\u0439\u0442\u043e\u0432. \u0421\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u044d\u0442\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430 \u043c\u044b \u0437\u0430\u043f\u0438\u0448\u0435\u043c \u0432 \u043c\u0438\u043a\u0440\u043e\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440 \u043f\u043e \u0430\u0434\u0440\u0435\u0441\u0443 0x08000000, \u0433\u0434\u0435 \u0438 \u0440\u0430\u0441\u043f\u043e\u043b\u0430\u0433\u0430\u0435\u0442\u0441\u044f \u0444\u043b\u0435\u0448-\u043f\u0430\u043c\u044f\u0442\u044c.</p> <p>\u041f\u0435\u0440\u0432\u043e\u0435, \u0447\u0442\u043e \u043c\u044b \u0441\u0434\u0435\u043b\u0430\u0435\u043c - \u043d\u0430\u043f\u0438\u0448\u0435\u043c, \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u043e, \u043a\u043e\u0434 \u043d\u0430 \u044f\u0437\u044b\u043a\u0435 \u0430\u0441\u0441\u0435\u043c\u0431\u043b\u0435\u0440\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0441\u043e\u0431\u0435\u0440\u0451\u043c \u0432 \u043e\u0431\u044a\u0435\u043a\u0442\u043d\u044b\u0439 \u0444\u0430\u0439\u043b:</p> <p><code>loop.s</code>:</p> <pre><code>.cpu cortex-m3\n.syntax unified\n.thumb\n\n.global reset_exception_handler\n\n.section code\n\nreset_exception_handler:\nadd r0, r0, 1\nbl reset_exception_handler\n</code></pre> <p>\u0412\u0441\u0451, \u0447\u0442\u043e \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442\u0441\u044f \u0441 \u0442\u043e\u0447\u043a\u0438 - \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0434\u0438\u0440\u0435\u043a\u0442\u0438\u0432\u0430\u043c\u0438 \u0430\u0441\u0441\u0435\u043c\u0431\u043b\u0435\u0440\u0430 \u0438 \u043d\u0435\u043f\u043e\u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0435\u043d\u043d\u043e \u0432 \u043a\u043e\u0434 \u043d\u0435 \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u044b\u0432\u0430\u0435\u0442\u0441\u044f.</p> <p>\u041f\u0435\u0440\u0432\u044b\u0435 3 \u0441\u0442\u0440\u043e\u0447\u043a\u0438 \u044d\u0442\u043e \u043d\u0435\u043a\u043e\u0435 \u043c\u0443\u043c\u0431\u043e-\u044e\u043c\u0431\u043e, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u043e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c \u043a\u0440\u0430\u0442\u043a\u043e \u0432\u0440\u044f\u0434 \u043b\u0438 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0441\u044f. \u0421\u0430\u043c\u0430\u044f \u043f\u0435\u0440\u0432\u0430\u044f \u0441\u0442\u0440\u043e\u0447\u043a\u0430 \u0433\u043e\u0432\u043e\u0440\u0438\u0442 \u043e \u0442\u043e\u043c, \u0447\u0442\u043e \u0443 \u043d\u0430\u0441 \u043a\u043e\u0434 \u0434\u043b\u044f \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440\u0430 cortex-m3. \u042d\u0442\u043e \u0441\u0435\u043c\u0435\u0439\u0441\u0442\u0432\u043e ARM-\u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440\u043e\u0432, \u043e\u0434\u043d\u0438\u043c \u0438\u0437 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u0438\u0442\u0435\u043b\u0435\u0439 \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u0438 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440 STM32F103. \u041f\u043e\u0447\u0438\u0442\u0430\u0439\u0442\u0435 \u043c\u0430\u043d\u0443\u0430\u043b, \u0435\u0441\u043b\u0438 \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u043e, \u043d\u043e \u043a\u0440\u043e\u043b\u0438\u0447\u044c\u044f \u043d\u043e\u0440\u0430 \u0442\u0430\u043c \u0433\u043b\u0443\u0431\u043e\u043a\u0430. \u041f\u0440\u043e\u0449\u0435 \u043f\u0440\u043e\u0441\u0442\u043e \u0437\u0430\u043f\u043e\u043c\u043d\u0438\u0442\u044c.</p> <p><code>.global reset_exception_handler</code> \u0433\u043e\u0432\u043e\u0440\u0438\u0442 \u043e \u0442\u043e\u043c, \u0447\u0442\u043e \u043c\u044b \u0445\u043e\u0442\u0438\u043c \u044d\u043a\u0441\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0438\u0437 \u044d\u0442\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430 \u0441\u0438\u043c\u0432\u043e\u043b \u0441 \u0438\u043c\u0435\u043d\u0435\u043c <code>reset_exception_handler</code>. \u041a\u0430\u0436\u0434\u044b\u0439 \u043e\u0431\u044a\u0435\u043a\u0442\u043d\u044b\u0439 \u0444\u0430\u0439\u043b \u043e\u0431\u044b\u0447\u043d\u043e \u044d\u043a\u0441\u043f\u043e\u0440\u0442\u0438\u0440\u0443\u0435\u0442 \u043a\u0430\u043a\u0438\u0435-\u0442\u043e \u0441\u0438\u043c\u0432\u043e\u043b\u044b. \u0427\u0430\u0449\u0435 \u0432\u0441\u0435\u0433\u043e \u0441\u0438\u043c\u0432\u043e\u043b \u043c\u043e\u0436\u043d\u043e \u0432\u043e\u0441\u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0442\u044c, \u043a\u0430\u043a \u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c.</p> <p>\u0414\u0430\u043b\u0435\u0435 \u0438\u0434\u0451\u0442 \u0434\u0438\u0440\u0435\u043a\u0442\u0438\u0432\u0430 <code>.section code</code>. \u041e\u0431\u044a\u0435\u043a\u0442\u043d\u044b\u0439 \u0444\u0430\u0439\u043b \u044d\u0442\u043e \u043f\u043e \u0441\u0443\u0442\u0438 \u043d\u0430\u0431\u043e\u0440 \u0441\u0435\u043a\u0446\u0438\u0439, \u0432 \u043a\u0430\u0436\u0434\u043e\u0439 \u0441\u0435\u043a\u0446\u0438\u0438 \u043b\u0435\u0436\u0430\u0442 \u0434\u0430\u043d\u043d\u044b\u0435. \u0412 \u043d\u0430\u0448\u0435\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u043d\u044b\u0439 \u0444\u0430\u0439\u043b \u0431\u0443\u0434\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043e\u0434\u043d\u0443 \u0441\u0435\u043a\u0446\u0438\u044e \u0441 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\u043c <code>code</code>, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u0431\u0443\u0434\u0443\u0442 \u043b\u0435\u0436\u0430\u0442\u044c 2 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 (8 \u0431\u0430\u0439\u0442\u043e\u0432). \u0410 \u0442\u0430\u043a\u0436\u0435 \u0441\u0438\u043c\u0432\u043e\u043b <code>reset_exception_handler</code>, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u0443\u0434\u0435\u0442 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043d\u0430 \u043f\u0435\u0440\u0432\u0443\u044e \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044e (\u043f\u043e \u0441\u0443\u0442\u0438 \u043e\u043d \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0432\u0435\u043d \u043d\u0443\u043b\u044e).</p> <p><code>reset_exception_handler:</code> \u044d\u0442\u043e \u0442\u043e\u0436\u0435 \u043d\u0435 \u043a\u043e\u0434, \u0445\u043e\u0442\u044c \u0438 \u043d\u0435 \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442\u0441\u044f \u043d\u0430 \u0442\u043e\u0447\u043a\u0443. \u042d\u0442\u043e \u043c\u0435\u0442\u043a\u0430, \u0438\u043b\u0438 \u0441\u0438\u043c\u0432\u043e\u043b, \u043a\u0430\u043a \u0443\u0433\u043e\u0434\u043d\u043e.</p> <p>\u0410 \u0434\u0430\u043b\u044c\u0448\u0435, \u043d\u0430\u043a\u043e\u043d\u0435\u0446-\u0442\u043e, \u0438\u0434\u0451\u0442 \u043a\u043e\u0434, \u0440\u0430\u0434\u0438 \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u0432\u0441\u0451 \u0438 \u0437\u0430\u0442\u0435\u0432\u0430\u043b\u043e\u0441\u044c. \u0414\u0432\u0435 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438: \u0438\u043d\u043a\u0440\u0435\u043c\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0432 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0435 <code>r0</code> \u0438 \u043f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0443\u044e \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044e, \u0432 \u043d\u0430\u0447\u0430\u043b\u043e \u0446\u0438\u043a\u043b\u0430.</p> <p>\u0414\u043b\u044f \u0442\u043e\u0433\u043e, \u0447\u0442\u043e\u0431\u044b \u0441\u043e\u0431\u0440\u0430\u0442\u044c \u044d\u0442\u043e\u0442 \u043a\u043e\u0434 \u0432 \u043e\u0431\u044a\u0435\u043a\u0442\u043d\u044b\u0439 \u0444\u0430\u0439\u043b, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430 <code>as</code> (\u0430\u0441\u0441\u0435\u043c\u0431\u043b\u0435\u0440). \u0410 \u0442\u043e\u0447\u043d\u0435\u0439 <code>arm-none-eabi-as</code>:</p> <pre><code>$ arm-none-eabi-as -o loop.o loop.s\n</code></pre> <p>\u0424\u0430\u0439\u043b <code>loop.o</code> \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043e\u0431\u044a\u0435\u043a\u0442\u043d\u044b\u043c \u0444\u0430\u0439\u043b\u043e\u043c \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 ELF. \u0415\u0433\u043e \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c objdump \u0438 nm:</p> <pre><code>$ arm-none-eabi-nm -g blink.o\n00000000 N reset_exception_handler\n\n$ arm-none-eabi-objdump -D blink.o\n\nblink.o:     file format elf32-littlearm\n\n\nDisassembly of section code:\n\n00000000 &lt;reset_exception_handler&gt;:\n   0:   f100 0001   add.w   r0, r0, #1\n   4:   f7ff fffe   bl  0 &lt;reset_exception_handler&gt;\n\nDisassembly of section .ARM.attributes:\n\n00000000 &lt;.ARM.attributes&gt;:\n   0:   00002041    andeq   r2, r0, r1, asr #32\n   4:   61656100    cmnvs   r5, r0, lsl #2\n   8:   01006962    tsteq   r0, r2, ror #18\n   c:   00000016    andeq   r0, r0, r6, lsl r0\n  10:   726f4305    rsbvc   r4, pc, #335544320  @ 0x14000000\n  14:   2d786574    cfldr64cs   mvdx6, [r8, #-464]! @ 0xfffffe30\n  18:   0600334d    streq   r3, [r0], -sp, asr #6\n  1c:   094d070a    stmdbeq sp, {r1, r3, r8, r9, sl}^\n  20:   Address 0x20 is out of bounds.\n</code></pre> <p>\u041a\u0430\u043a \u0432\u0438\u0434\u043d\u043e \u0438\u0437 \u0432\u044b\u0432\u043e\u0434\u0430 <code>nm</code>, \u0432 \u044d\u0442\u043e\u043c \u0444\u0430\u0439\u043b\u0435 \u044d\u043a\u0441\u043f\u043e\u0440\u0442\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u043e\u0434\u0438\u043d \u0441\u0438\u043c\u0432\u043e\u043b <code>reset_exception_handler</code> \u0441\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u043c <code>0</code>.</p> <p>\u0421 \u0432\u044b\u0432\u043e\u0434\u043e\u043c <code>objdump</code> \u043f\u043e\u0441\u043b\u043e\u0436\u043d\u0435\u0439. \u0412 \u0444\u0430\u0439\u043b\u0435 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u0434\u0432\u0435 \u0441\u0435\u043a\u0446\u0438\u0438: <code>code</code> \u0438 <code>.ARM.attributes</code>. <code>code</code> \u044d\u0442\u043e \u0442\u043e, \u0447\u0442\u043e \u043c\u044b \u043e\u0431\u044a\u044f\u0432\u0438\u043b\u0438. \u0412 \u043d\u0451\u043c 8 \u0431\u0430\u0439\u0442\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0430\u043c \u043b\u044e\u0431\u0435\u0437\u043d\u043e \u0434\u0438\u0437\u0430\u0441\u0441\u0435\u043c\u0431\u043b\u0438\u0440\u043e\u0432\u0430\u043b\u0438. \u0421\u0435\u043a\u0446\u0438\u044f <code>.ARM.attributes</code> \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u0441\u043b\u0443\u0436\u0435\u0431\u043d\u044b\u0435 \u0441\u0432\u0435\u0434\u0435\u043d\u0438\u044f, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0432 \u043a\u043e\u043d\u0435\u0447\u043d\u043e\u0439 \u043f\u0440\u043e\u0448\u0438\u0432\u043a\u0435 \u043d\u0435 \u043f\u043e\u044f\u0432\u044f\u0442\u0441\u044f, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0435\u0451 \u043c\u043e\u0436\u043d\u043e \u0438\u0433\u043d\u043e\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c. objdump \u043f\u043e\u043f\u044b\u0442\u0430\u043b\u0441\u044f \u044d\u0442\u0438 \u0441\u0432\u0435\u0434\u0435\u043d\u0438\u044f \u0434\u0438\u0437\u0430\u0441\u0441\u0435\u043c\u0431\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c, \u043d\u043e \u043d\u0430 \u0441\u0430\u043c\u043e\u043c \u0434\u0435\u043b\u0435 \u044d\u0442\u043e \u043d\u0435 \u043c\u0430\u0448\u0438\u043d\u043d\u044b\u0439 \u043a\u043e\u0434, \u0430 \u043f\u0440\u043e\u0441\u0442\u043e \u0444\u043e\u0440\u043c\u0430\u0442 \u0442\u0430\u043a\u043e\u0439. <code>objdump -D</code> \u043f\u044b\u0442\u0430\u0435\u0442\u0441\u044f \u0432\u0441\u0451 \u0434\u0438\u0437\u0430\u0441\u0441\u0435\u043c\u0431\u0438\u0440\u043e\u0432\u0430\u0442\u044c, \u0434\u0430\u0436\u0435 \u0435\u0441\u043b\u0438 \u044d\u0442\u043e \u043d\u0435 \u0438\u043c\u0435\u0435\u0442 \u0441\u043c\u044b\u0441\u043b\u0430.</p> <p>\u0423 \u043d\u0430\u0441 \u0442\u0435\u043f\u0435\u0440\u044c \u0435\u0441\u0442\u044c 8 \u0431\u0430\u0439\u0442\u043e\u0432 \u043d\u0430\u0448\u0435\u0433\u043e \u043a\u043e\u0434\u0430, \u043d\u043e \u043d\u0443\u0436\u043d\u043e \u0441\u043a\u043e\u043c\u043f\u043e\u043d\u043e\u0432\u0430\u0442\u044c \u0432\u0441\u0451 \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u043e\u0435. \u041a\u043e\u043d\u0435\u0447\u043d\u043e \u043c\u043e\u0436\u043d\u043e \u0432 \u043a\u0430\u043a\u043e\u043c-\u043d\u0438\u0431\u0443\u0434\u044c <code>hex</code>-\u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440\u0435 \u044d\u0442\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0432\u0440\u0443\u0447\u043d\u0443\u044e, \u043d\u043e \u0432\u043e\u043e\u0431\u0449\u0435 \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043a\u043e\u043c\u043f\u043e\u043d\u043e\u0432\u0449\u0438\u043a (linker, \u0434\u0430\u043b\u0435\u0435 \u043b\u0438\u043d\u043a\u0435\u0440). \u0412 \u0441\u043e\u0441\u0442\u0430\u0432\u0435 GNU binutils \u0438\u043c\u0435\u0435\u0442\u0441\u044f \u043b\u0438\u043d\u043a\u0435\u0440 ld, \u0435\u0433\u043e \u043c\u044b \u0438 \u0431\u0443\u0434\u0435\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c, \u0430 \u0442\u043e\u0447\u043d\u0435\u0439 \u0435\u0433\u043e \u0432\u0435\u0440\u0441\u0438\u044e \u0434\u043b\u044f ARM <code>arm-none-eabi-ld</code>.</p> <p>\u041b\u0438\u043d\u043a\u0435\u0440 \u0442\u0430\u043a\u0436\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 \u0441\u0432\u043e\u0439 \u043e\u0441\u043e\u0431\u044b\u0439 \u044f\u0437\u044b\u043a: linker script. \u041f\u043e \u0441\u0443\u0442\u0438 \u0437\u0430\u0434\u0430\u0447\u0430 \u043b\u0438\u043d\u043a\u0435\u0440\u0430 \u0441\u043e\u0441\u0442\u043e\u0438\u0442 \u0432 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u043c: \u043e\u043d \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 \u043d\u0430 \u0432\u0445\u043e\u0434 \u043d\u0430\u0431\u043e\u0440 \u043e\u0431\u044a\u0435\u043a\u0442\u043d\u044b\u0445 \u0444\u0430\u0439\u043b\u043e\u0432 (\u0432 \u043d\u0430\u0448\u0435\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u044d\u0442\u043e \u043e\u0434\u0438\u043d \u0444\u0430\u0439\u043b <code>loop.o</code>). \u0412 \u043a\u0430\u0436\u0434\u043e\u043c \u0438\u0437 \u044d\u0442\u0438\u0445 \u0444\u0430\u0439\u043b\u043e\u0432 \u0435\u0441\u0442\u044c \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u043e \u0441\u0435\u043a\u0446\u0438\u0439 \u0438 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432. \u0412 \u0441\u0435\u043a\u0446\u0438\u044f\u0445 \u0435\u0441\u0442\u044c \u043a\u0430\u043a\u0438\u0435-\u0442\u043e \u0434\u0430\u043d\u043d\u044b\u0435: \u043a\u043e\u0434, \u043d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u0438 \u0442\u0434. \u041e\u043d\u0438 \u043d\u0430\u0437\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u0432 \u0442\u0435\u0440\u043c\u0438\u043d\u0430\u0445 \u043b\u0438\u043d\u043a\u0435\u0440\u0430 \u0432\u0445\u043e\u0434\u043d\u044b\u0435 \u0441\u0435\u043a\u0446\u0438\u0438 (input sections). \u041d\u0430 \u0432\u044b\u0445\u043e\u0434\u0435 \u0443 \u043b\u0438\u043d\u043a\u0435\u0440\u0430 \u0442\u043e\u0436\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u043d\u044b\u0439 \u0444\u0430\u0439\u043b, \u0438 \u0432 \u043d\u0451\u043c \u0442\u043e\u0436\u0435 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043d\u0430\u0431\u043e\u0440 \u0441\u0435\u043a\u0446\u0438\u0439 \u0438 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432: \u0432\u044b\u0445\u043e\u0434\u043d\u044b\u0435 \u0441\u0435\u043a\u0446\u0438\u0438 (output sections). \u0423 \u043d\u0430\u0441 \u0437\u0430\u0434\u0430\u0447\u0430 \u043f\u0440\u043e\u0441\u0442\u0430\u044f, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0432\u044b\u0445\u043e\u0434\u043d\u0430\u044f \u0441\u0435\u043a\u0446\u0438\u044f \u0431\u0443\u0434\u0435\u0442 \u0440\u043e\u0432\u043d\u043e \u043e\u0434\u043d\u0430, \u0441 \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u0443\u044e\u0449\u0438\u043c\u0438 \u043d\u0430\u0441 \u0434\u0430\u043d\u043d\u044b\u043c\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0431\u0443\u0434\u0443\u0442 \u043f\u0440\u043e\u0448\u0438\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u043c\u0438\u043a\u0440\u043e\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440.</p> <p>\u0412\u043e\u0442 \u0442\u0430\u043a\u043e\u0439 \u0441\u043a\u0440\u0438\u043f\u0442 \u0434\u043b\u044f \u043b\u0438\u043d\u043a\u0435\u0440\u0430 \u043c\u044b \u0431\u0443\u0434\u0435\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c:</p> <p><code>loop.ld</code>:</p> <pre><code>SECTIONS {\n    flash 0x08000000 : {\n        LONG(0x20000000 + 20K);\n        LONG(reset_exception_handler | 1);\n        . = 0x130;\n        loop.o(code)\n    }\n}\n</code></pre> <p><code>SECTIONS</code> \u043e\u0431\u044a\u044f\u0432\u043b\u044f\u0435\u0442 \u0432\u044b\u0445\u043e\u0434\u043d\u044b\u0435 \u0441\u0435\u043a\u0446\u0438\u0438. <code>flash</code> \u044d\u0442\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043d\u0430\u0448\u0435\u0439 \u0432\u044b\u0445\u043e\u0434\u043d\u043e\u0439 \u0441\u0435\u043a\u0446\u0438\u0438. \u041c\u043e\u0436\u043d\u043e \u043d\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0435\u0451 \u043a\u0430\u043a \u0443\u0433\u043e\u0434\u043d\u043e. <code>0x0800 0000</code> \u044d\u0442\u043e \u0430\u0434\u0440\u0435\u0441, \u043f\u043e \u043a\u043e\u0442\u043e\u0440\u043e\u043c\u0443 \u044d\u0442\u0430 \u0441\u0435\u043a\u0446\u0438\u044f \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0441\u043f\u043e\u043b\u0430\u0433\u0430\u0442\u044c\u0441\u044f \u0432 \u043f\u0430\u043c\u044f\u0442\u0438. \u042d\u0442\u043e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043b\u044f \u0442\u043e\u0433\u043e, \u0447\u0442\u043e\u0431\u044b \u043b\u0438\u043d\u043a\u0435\u0440 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u043f\u043e\u0434\u0441\u0447\u0438\u0442\u0430\u043b \u0441\u043c\u0435\u0449\u0435\u043d\u0438\u044f. \u0418\u0437 <code>loop.o</code> \u043c\u044b \u044d\u043a\u0441\u043f\u043e\u0440\u0442\u0438\u0440\u0443\u0435\u043c \u0441\u0438\u0432\u043e\u043b <code>reset_exception_handler</code> \u0441\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u043c 0, \u043d\u043e \u043d\u0430 \u0441\u0430\u043c\u043e\u043c \u0434\u0435\u043b\u0435 \u0432 \u043a\u043e\u043d\u0435\u0447\u043d\u043e\u0439 \u043f\u0440\u043e\u0448\u0438\u0432\u043a\u0435 \u0443 \u043d\u0435\u0433\u043e \u0431\u0443\u0434\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 <code>0x0800 0130</code>.</p> <p><code>LONG(0x20000000 + 20K);</code> \u0437\u0430\u043f\u0438\u0448\u0435\u0442 \u043f\u043e \u043f\u0435\u0440\u0432\u043e\u043c\u0443 \u0430\u0434\u0440\u0435\u0441\u0443 \u0432 \u0434\u0430\u043d\u043d\u043e\u0439 \u0441\u0435\u043a\u0446\u0438\u0438 4-\u0445 \u0431\u0430\u0439\u0442\u043e\u0432\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440 \u043f\u0440\u0438\u0441\u0432\u043e\u0438\u0442 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0443 <code>sp</code>. \u0412 \u043f\u0440\u0438\u043d\u0446\u0438\u043f\u0435 \u043f\u043e \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044e \u043e\u0447\u0435\u0432\u0438\u0434\u043d\u043e, \u0447\u0442\u043e \u043c\u044b \u0435\u043c\u0443 \u043f\u0440\u0438\u0441\u0432\u0430\u0438\u0432\u0430\u0435\u043c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0430\u0434\u0440\u0435\u0441\u0430 \u0441\u0440\u0430\u0437\u0443 \u0437\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u0435\u043c \u0430\u0434\u0440\u0435\u0441\u043d\u043e\u0433\u043e \u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0441\u0442\u0432\u0430 \u043e\u043f\u0435\u0440\u0430\u0442\u0438\u0432\u043d\u043e\u0439 \u043f\u0430\u043c\u044f\u0442\u0438. \u0427\u0443\u0442\u044c \u043d\u0438\u0436\u0435 \u0431\u0443\u0434\u0435\u0442 \u043f\u043e\u043f\u044b\u0442\u043a\u0430 \u043e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c, \u043f\u043e\u0447\u0435\u043c\u0443 \u0438\u043c\u0435\u043d\u043d\u043e \u0442\u0430\u043a\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435.</p> <p><code>LONG(reset_exception_handler | 1);</code> \u0437\u0430\u043f\u0438\u0448\u0435\u0442 \u043f\u043e \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u043c\u0443 \u0430\u0434\u0440\u0435\u0441\u0443 4-\u0445 \u0431\u0430\u0439\u0442\u043e\u0432\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0441\u043e\u0431\u043e\u0439 \u043c\u043e\u0434\u0438\u0444\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0430\u0434\u0440\u0435\u0441 \u043a\u043e\u0434\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043c\u044b \u0445\u043e\u0442\u0438\u043c \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u043f\u043e\u0441\u043b\u0435 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f. \u0421\u0438\u043c\u0432\u043e\u043b <code>reset_exception_handler</code> \u043a \u043d\u0430\u043c \u043f\u0440\u0438\u0448\u0451\u043b \u0438\u0437 <code>loop.o</code>. \u041a\u0430\u043a \u0431\u044b\u043b\u043e \u043e\u043f\u0438\u0441\u0430\u043d\u043e \u0432 \u043f\u0435\u0440\u0432\u043e\u0439 \u0447\u0430\u0441\u0442\u0438, \u044d\u0442\u043e\u0442 \u0430\u0434\u0440\u0435\u0441 \u0434\u043e\u043b\u0436\u0435\u043d \u0438\u043c\u0435\u0442\u044c \u0432\u044b\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0439 \u0435\u0434\u0438\u043d\u0438\u0447\u043d\u044b\u0439 \u0431\u0438\u0442, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u043c\u044b \u0435\u0433\u043e \u0438 \u0432\u044b\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u043c \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \"\u043f\u043e\u0431\u0438\u0442\u043e\u0432\u044b\u0439 \u0418\u041b\u0418\".</p> <p><code>. = 0x130;</code> \u044d\u0442\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0430 \u0441\u0442\u0430\u0432\u0438\u0442 \u0442\u0435\u043a\u0443\u0449\u0443\u044e \u043f\u043e\u0437\u0438\u0446\u0438\u044e \u0432 \u0432\u044b\u0445\u043e\u0434\u043d\u043e\u0439 \u0441\u0435\u043a\u0446\u0438\u0438 \u043d\u0430 <code>0x130</code> \u0431\u0430\u0439\u0442\u043e\u0432. \u0412\u043e\u043e\u0431\u0449\u0435 <code>.</code> \u044d\u0442\u043e \u0442\u0430\u043a\u043e\u0435 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u0440\u0430\u0432\u043d\u043e \u0430\u0434\u0440\u0435\u0441\u0443, \u043a\u0443\u0434\u0430 \u043b\u0438\u043d\u043a\u0435\u0440 \u0441\u0435\u0439\u0447\u0430\u0441 \u0431\u0443\u0434\u0435\u0442 \u0447\u0442\u043e-\u0442\u043e \u043f\u0438\u0441\u0430\u0442\u044c. \u0418\u0437\u043d\u0430\u0447\u0430\u043b\u044c\u043d\u043e \u043e\u043d\u043e \u0440\u0430\u0432\u043d\u043e <code>0</code>, \u043f\u043e\u0441\u043b\u0435 \u043f\u0435\u0440\u0432\u044b\u0445 4 \u0431\u0430\u0439\u0442\u043e\u0432 \u043e\u043d\u043e \u0440\u0430\u0432\u043d\u043e 4, \u043f\u043e\u0441\u043b\u0435 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0445 4 \u0431\u0430\u0439\u0442\u043e\u0432 \u043e\u043d\u043e \u0440\u0430\u0432\u043d\u043e 8, \u043d\u0443 \u0430 \u043f\u043e\u0441\u043b\u0435 \u043f\u0440\u0438\u0441\u0432\u0430\u0438\u0432\u0430\u043d\u0438\u044f \u043e\u043d\u043e \u0440\u0430\u0432\u043d\u043e <code>0x130</code> \u0438 \u043f\u043e\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0431\u0443\u0434\u0443\u0442 \u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f \u0443\u0436\u0435 \u0441 \u044d\u0442\u0438\u043c \u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u043c. \u041f\u043e\u0447\u0435\u043c\u0443 <code>0x130</code> - \u0442\u043e\u0436\u0435 \u043d\u0438\u0436\u0435 \u0431\u0443\u0434\u0435\u0442 \u043e\u0431\u044a\u044f\u0441\u043d\u0435\u043d\u0438\u0435.</p> <p><code>loop.o(code)</code> \u044d\u0442\u043e \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0431\u0435\u0440\u0451\u0442 \u0432\u0445\u043e\u0434\u043d\u043e\u0439 \u0444\u0430\u0439\u043b <code>loop.o</code>, \u0431\u0435\u0440\u0451\u0442 \u0432 \u043d\u0451\u043c \u0441\u0435\u043a\u0446\u0438\u044e <code>code</code> \u0438 \u043a\u043e\u043f\u0438\u0440\u0443\u0435\u0442 \u0435\u0451 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u0432 \u0432\u044b\u0445\u043e\u0434\u043d\u0443\u044e \u0441\u0435\u043a\u0446\u0438\u044e. \u041a\u0440\u043e\u043c\u0435 \u0442\u043e\u0433\u043e \u043b\u0438\u043d\u043a\u0435\u0440 \u0434\u0435\u043b\u0430\u0435\u0442 \u0442\u043e, \u0440\u0430\u0434\u0438 \u0447\u0435\u0433\u043e \u0435\u0433\u043e, \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u043e, \u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442. \u041e\u043d \u043f\u043e\u043d\u0438\u043c\u0430\u0435\u0442, \u0447\u0442\u043e <code>reset_exception_handler</code> \u0443\u0436\u0435 \u0440\u0430\u0432\u0435\u043d \u043d\u0435 <code>0</code>, \u0430 <code>0x0800_0130</code> \u0438 \u0432 \u043d\u0443\u0436\u043d\u043e\u043c \u043c\u0435\u0441\u0442\u0435 \u0437\u0430\u043f\u0438\u0448\u0435\u0442 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0430\u0434\u0440\u0435\u0441. \u0415\u0441\u043b\u0438 \u0443 \u043d\u0430\u0441 \u0435\u0441\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0444\u0443\u043d\u043a\u0446\u0438\u0439 \u0432 \u0440\u0430\u0437\u043d\u044b\u0445 \u0444\u0430\u0439\u043b\u0430\u0445, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0432\u044b\u0437\u044b\u0432\u0430\u044e\u0442 \u0434\u0440\u0443\u0433 \u0434\u0440\u0443\u0433\u0430, \u0442\u043e \u043b\u0438\u043d\u043a\u0435\u0440 \u0440\u0430\u0437\u0431\u0435\u0440\u0451\u0442\u0441\u044f, \u0443 \u043a\u0430\u043a\u043e\u0439 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u043a\u0430\u043a\u043e\u0439 \u0438\u0442\u043e\u0433\u043e\u0432\u044b\u0439 \u0430\u0434\u0440\u0435\u0441 \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u0432\u0441\u0451 \u0441\u043a\u043e\u043c\u043f\u043e\u043d\u0443\u0435\u0442. \u0415\u0441\u043b\u0438 \u0432\u044b \u0432\u0438\u0434\u0435\u043b\u0438 \u0432 \u0434\u0440\u0443\u0433\u0438\u0445 \u043b\u0438\u043d\u043a\u0435\u0440 \u0441\u043a\u0440\u0438\u043f\u0442\u0430\u0445 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0432\u0440\u043e\u0434\u0435 <code>*(.text)</code>, \u0442\u043e \u044d\u0442\u043e \u043f\u0440\u0438\u043c\u0435\u0440\u043d\u043e \u0442\u043e \u0436\u0435: <code>*</code> \u044d\u0442\u043e \u0432\u0441\u0435 \u0444\u0430\u0439\u043b\u044b, <code>.text</code> \u044d\u0442\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u0435\u043a\u0446\u0438\u0438, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043f\u0440\u0438\u043d\u044f\u0442\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0434\u043b\u044f \u043a\u043e\u0434\u0430. \u041d\u043e \u0432 \u0434\u0430\u043d\u043d\u043e\u043c \u043f\u0440\u0438\u043c\u0435\u0440\u0435 \u0432\u0441\u0451 \u0443\u043a\u0430\u0437\u0430\u043d\u043e \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e \u044f\u0432\u043d\u043e \u0438 \u0434\u043b\u044f \u043d\u0430\u0433\u043b\u044f\u0434\u043d\u043e\u0441\u0442\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u043e \u043d\u0435\u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u043e\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u0435\u043a\u0446\u0438\u0438.</p> <p>\u041b\u0438\u043d\u043a\u0435\u0440 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442\u0441\u044f \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439:</p> <pre><code>arm-none-eabi-ld -T loop.ld -o loop.elf loop.o\n</code></pre> <p>\u0415\u0441\u043b\u0438 \u043d\u0435 \u0431\u044b\u043b\u043e \u0434\u043e\u043f\u0443\u0449\u0435\u043d\u043e \u043d\u0438\u043a\u0430\u043a\u0438\u0445 \u043e\u0448\u0438\u0431\u043e\u043a, \u0442\u043e \u0443 \u043d\u0430\u0441 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0441\u044f \u0444\u0430\u0439\u043b <code>loop.elf</code>. \u041f\u043e \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u044e, \u043d\u0430\u0432\u0435\u0440\u043d\u043e\u0435, \u043e\u0447\u0435\u0432\u0438\u0434\u043d\u043e, \u0447\u0442\u043e \u044d\u0442\u043e \u043e\u0431\u044a\u0435\u043a\u0442\u043d\u044b\u0439 \u0444\u0430\u0439\u043b \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 ELF (\u043a\u0430\u043a \u0438 <code>loop.o</code>). \u0415\u0441\u043b\u0438 \u0435\u0433\u043e \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e <code>nm</code> \u0438 <code>objdump</code>, \u0442\u043e \u043c\u043e\u0436\u043d\u043e \u0443\u0432\u0438\u0434\u0435\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435:</p> <pre><code>$ arm-none-eabi-nm loop.elf\n08000130 R reset_exception_handler\n\n$ arm-none-eabi-objdump -D loop.elf\n\nloop.elf:     file format elf32-littlearm\n\n\nDisassembly of section flash:\n\n08000000 &lt;reset_exception_handler-0x130&gt;:\n 8000000:   20005000    andcs   r5, r0, r0\n 8000004:   08000131    stmdaeq r0, {r0, r4, r5, r8}\n    ...\n\n08000130 &lt;reset_exception_handler&gt;:\n 8000130:   f100 0001   add.w   r0, r0, #1\n 8000134:   f7ff fffc   bl  8000130 &lt;reset_exception_handler&gt;\n\nDisassembly of section .ARM.attributes:\n\n00000000 &lt;.ARM.attributes&gt;:\n   0:   00002041    andeq   r2, r0, r1, asr #32\n   4:   61656100    cmnvs   r5, r0, lsl #2\n   8:   01006962    tsteq   r0, r2, ror #18\n   c:   00000016    andeq   r0, r0, r6, lsl r0\n  10:   726f4305    rsbvc   r4, pc, #335544320  @ 0x14000000\n  14:   2d786574    cfldr64cs   mvdx6, [r8, #-464]! @ 0xfffffe30\n  18:   0600334d    streq   r3, [r0], -sp, asr #6\n  1c:   094d070a    stmdbeq sp, {r1, r3, r8, r9, sl}^\n  20:   Address 0x20 is out of bounds.\n</code></pre> <p>\u041a\u0430\u043a \u0432\u0438\u0434\u043d\u043e, \u044d\u0442\u043e\u0442 \u0444\u0430\u0439\u043b \u0442\u043e\u0436\u0435 \u044d\u043a\u0441\u043f\u043e\u0440\u0442\u0438\u0440\u0443\u0435\u0442 \u0441\u0438\u043c\u0432\u043e\u043b <code>reset_exception_handler</code>, \u043d\u043e \u0442\u0435\u043f\u0435\u0440\u044c \u0443\u0436\u0435 \u0441\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u043c <code>0x0800_0130</code>. \u0412 \u044d\u0442\u043e\u043c \u0444\u0430\u0439\u043b\u0435 \u0438\u043c\u0435\u044e\u0442\u0441\u044f \u0434\u0432\u0435 \u0441\u0435\u043a\u0446\u0438\u0438 <code>flash</code> \u0438 <code>.ARM.attributes</code>. \u041f\u043e\u0441\u043b\u0435\u0434\u043d\u044e\u044e \u043c\u044b \u0442\u0430\u043a \u0436\u0435 \u043f\u0440\u043e\u0438\u0433\u043d\u043e\u0440\u0438\u0440\u0443\u0435\u043c, \u0430 \u0432\u043e\u0442 \u0432 \u0441\u0435\u043a\u0446\u0438\u0438 <code>flash</code> \u0437\u0430\u043f\u0438\u0441\u0430\u043d\u043e \u0442\u043e, \u0447\u0442\u043e \u043c\u044b \u0438 \u0445\u043e\u0442\u0435\u043b\u0438 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c. <code>objdump -D</code> \u043f\u044b\u0442\u0430\u0435\u0442\u0441\u044f \u0434\u0438\u0437\u0430\u0441\u0441\u0435\u043c\u0431\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0435\u0440\u0432\u044b\u0435 8 \u0431\u0430\u0439\u0442\u043e\u0432, \u0438 \u0443 \u043d\u0435\u0433\u043e \u0434\u0430\u0436\u0435 \u0447\u0442\u043e-\u0442\u043e \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442\u0441\u044f, \u043d\u043e, \u043a\u043e\u043d\u0435\u0447\u043d\u043e, \u044d\u0442\u043e \u043d\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b, \u0430 \u0430\u0434\u0440\u0435\u0441\u0430. \u0410 \u0432\u043e\u0442 \u0442\u043e, \u0447\u0442\u043e \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442\u0441\u044f \u0441 \u0430\u0434\u0440\u0435\u0441\u0430 <code>0x0800_0130</code> \u044d\u0442\u043e \u0443\u0436\u0435 \u0441\u0430\u043c\u044b\u0439, \u0447\u0442\u043e \u043d\u0438 \u043d\u0430 \u0435\u0441\u0442\u044c, \u043c\u0430\u0448\u0438\u043d\u043d\u044b\u0439 \u043a\u043e\u0434 \u0434\u043b\u044f ARM.</p> <p>\u041d\u043e \u043e\u0441\u0442\u0430\u0451\u0442\u0441\u044f \u043e\u0434\u043d\u0430 \u043c\u0430\u043b\u0435\u043d\u044c\u043a\u0430\u044f \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430. \u041a\u0430\u043a \u0432 \u0441\u0430\u043c\u043e\u043c \u043d\u0430\u0447\u0430\u043b\u0435 \u0431\u044b\u043b\u043e \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u043e, \u0444\u0430\u0439\u043b \u043f\u0440\u043e\u0448\u0438\u0432\u043a\u0438 \u0434\u043e\u043b\u0436\u0435\u043d \u0437\u0430\u043d\u0438\u043c\u0430\u0442\u044c 312 \u0431\u0430\u0439\u0442\u043e\u0432. \u0410 \u0443 \u043d\u0430\u0441 \u0432\u0440\u043e\u0434\u0435 \u044d\u0442\u0438 \u0431\u0430\u0439\u0442\u044b \u0438 \u0435\u0441\u0442\u044c, \u043d\u043e \u043e\u043d\u0438 \u043d\u0435 \u043f\u043e\u0439\u043c\u0438 \u0433\u0434\u0435, \u0430 \u0432\u0435\u0441\u044c elf \u0444\u0430\u0439\u043b \u0437\u0430\u043d\u0438\u043c\u0430\u0435\u0442 4864 \u0431\u0430\u0439\u0442\u043e\u0432, \u0432 \u043e\u0431\u0449\u0435\u043c \u043d\u0435 \u0441\u043e\u0432\u0441\u0435\u043c \u0442\u043e. \u0427\u0442\u043e\u0431\u044b \u0432\u044b\u0442\u0430\u0449\u0438\u0442\u044c \u043a\u043e\u043d\u0435\u0447\u043d\u0443\u044e \u043f\u0440\u043e\u0448\u0438\u0432\u043a\u0443, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043a\u043e\u043c\u0430\u043d\u0434\u0430 objcopy:</p> <pre><code>arm-none-eabi-objcopy -O binary -j flash loop.elf loop.bin\n</code></pre> <p><code>-O binary</code> \u0433\u043e\u0432\u043e\u0440\u0438\u0442 \u043e \u0442\u043e\u043c, \u0447\u0442\u043e \u043c\u044b \u0445\u043e\u0442\u0438\u043c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0431\u0438\u043d\u0430\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u043d\u0430 \u0432\u044b\u0445\u043e\u0434\u0435. <code>-j flash</code> \u0433\u043e\u0432\u043e\u0440\u0438\u0442, \u0447\u0442\u043e \u043d\u0430\u0441 \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u0443\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u0441\u0435\u043a\u0446\u0438\u044f <code>flash</code> (\u044d\u0442\u043e\u0442 \u0444\u043b\u0430\u0433 \u0438\u0437\u0431\u044b\u0442\u043e\u0447\u0435\u043d, \u043a\u043e\u0433\u0434\u0430 \u0443 \u043d\u0430\u0441 \u0442\u043e\u043b\u044c\u043a\u043e \u043e\u0434\u043d\u0430 \u043d\u0435-\u0441\u043b\u0443\u0436\u0435\u0431\u043d\u0430\u044f \u0441\u0435\u043a\u0446\u0438\u044f, \u043d\u043e \u043f\u0443\u0441\u0442\u044c \u0431\u0443\u0434\u0435\u0442 \u0434\u043b\u044f \u044f\u0441\u043d\u043e\u0441\u0442\u0438).</p> <p>\u0422\u0435\u043f\u0435\u0440\u044c \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0438\u043c, \u0447\u0442\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u043e\u0441\u044c:</p> <pre><code>ls -l loop.bin\n-rwxr-xr-x. 1 vbezhenar vbezhenar 312 Sep  9 11:30 loop.bin\n\nhexdump -C loop.bin\n00000000  00 50 00 20 31 01 00 08  00 00 00 00 00 00 00 00  |.P. 1...........|\n00000010  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|\n*\n00000130  00 f1 01 00 ff f7 fc ff                           |........|\n00000138\n</code></pre> <p>\u041d\u0443, \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u043e, 312 \u043e\u0436\u0438\u0434\u0430\u0435\u043c\u044b\u0445 \u0431\u0430\u0439\u0442\u043e\u0432 \u0438 \u0432\u043d\u0443\u0442\u0440\u0438 \u0447\u0442\u043e-\u0442\u043e, \u043f\u043e\u0445\u043e\u0436\u0435\u0435 \u043d\u0430 \u043f\u0440\u0430\u0432\u0434\u0443. \u0412 \u043a\u043e\u0434\u0438\u0440\u043e\u0432\u043a\u0435 little-endian \u0447\u0438\u0441\u043b\u043e <code>0x2000_5000</code> \u043a\u043e\u0434\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u0431\u0430\u0439\u0442\u0430\u043c\u0438 \u0432 \u043e\u0431\u0440\u0430\u0442\u043d\u043e\u043c \u043f\u043e\u0440\u044f\u0434\u043a\u0435: <code>00 50 00 20</code>, \u0430 \u0447\u0438\u0441\u043b\u043e <code>0x0800_0131</code> \u043a\u043e\u0434\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u0431\u0430\u0439\u0442\u0430\u043c\u0438 <code>31 01 00 08</code>.</p> <p>\u041f\u043e\u0440\u0430 \u0437\u0430\u043b\u0438\u0432\u0430\u0442\u044c \u044d\u0442\u0443 \u043f\u0440\u043e\u0448\u0438\u0432\u043a\u0443 \u0432 \u043c\u0438\u043a\u0440\u043e\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440:</p> <pre><code>st-flash write loop.bin 0x08000000\nst-flash 1.7.0\n2023-09-09T11:36:28 WARN common.c: NRST is not connected\n2023-09-09T11:36:28 INFO common.c: F1xx Medium-density: 20 KiB SRAM, 64 KiB flash in at least 1 KiB pages.\nfile loop.bin md5 checksum: 20b87b3b138d91c38b47d29d95f773b, stlink checksum: 0x0000058d\n2023-09-09T11:36:28 INFO common.c: Attempting to write 312 (0x138) bytes to stm32 address: 134217728 (0x8000000)\n2023-09-09T11:36:28 INFO common.c: Flash page at addr: 0x08000000 erased\n2023-09-09T11:36:28 INFO common.c: Finished erasing 1 pages of 1024 (0x400) bytes\n2023-09-09T11:36:28 INFO common.c: Starting Flash write for VL/F0/F3/F1_XL\n2023-09-09T11:36:28 INFO flash_loader.c: Successfully loaded flash loader in sram\n2023-09-09T11:36:28 INFO flash_loader.c: Clear DFSR\n  1/  1 pages written\n2023-09-09T11:36:28 INFO common.c: Starting verification of write complete\n2023-09-09T11:36:28 INFO common.c: Flash written and verified! jolly good!\n</code></pre> <p>\u0421\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u043e: \u0432\u0441\u0451. \u041f\u0440\u043e\u0448\u0438\u0432\u043a\u0430 \u0437\u0430\u043b\u0438\u0442\u0430 \u0432 \u043c\u0438\u043a\u0440\u043e\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440, \u043e\u043d \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u043b\u0441\u044f \u0438 \u0442\u0435\u043f\u0435\u0440\u044c \u043a\u0440\u0443\u0442\u0438\u0442\u0441\u044f \u0432 \u0432\u0435\u0447\u043d\u043e\u043c \u0446\u0438\u043a\u043b\u0435, \u043d\u0435\u043c\u043d\u043e\u0436\u043a\u043e \u0441\u043e\u0433\u0440\u0435\u0432\u0430\u044f \u0432\u043e\u0437\u0434\u0443\u0445. \u0422\u0435\u043f\u0435\u0440\u044c \u043a \u043d\u0435\u043c\u0443 \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u0447\u0435\u0440\u0435\u0437 <code>st-util</code> \u0438 <code>gdb</code> \u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c, \u0447\u0442\u043e \u0442\u0430\u043c \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442, \u0432 \u043f\u0435\u0440\u0432\u043e\u0439 \u0447\u0430\u0441\u0442\u0438 \u044d\u0442\u043e \u0438 \u0431\u044b\u043b\u043e \u043e\u043f\u0438\u0441\u0430\u043d\u043e.</p> <p>\u0422\u0435\u043f\u0435\u0440\u044c \u043f\u0430\u0440\u0443 \u043c\u043e\u043c\u0435\u043d\u0442\u043e\u0432. \u0412\u043e-\u043f\u0435\u0440\u0432\u044b\u0445 \u043f\u043e\u0447\u0435\u043c\u0443 \u0438\u043c\u0435\u043d\u043d\u043e \u0442\u0430\u043a\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043c\u044b \u043f\u0438\u0448\u0435\u043c \u0432 \u0440\u0435\u0433\u0438\u0441\u0442\u0440 <code>sp</code>. \u0412\u043e\u043e\u0431\u0449\u0435 \u0441\u0442\u0435\u043a \u044d\u0442\u043e \u0442\u0430\u043a\u0430\u044f \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 \u0434\u0430\u043d\u043d\u044b\u0445, \u0438 \u0435\u0441\u043b\u0438 \u0432\u0434\u0440\u0443\u0433 \u0432\u044b \u043d\u0435 \u0437\u043d\u0430\u0435\u0442\u0435, \u0447\u0442\u043e \u044d\u0442\u043e \u0442\u0430\u043a\u043e\u0435, \u0442\u043e \u043f\u0440\u043e\u0433\u043b\u044f\u0434\u0438\u0442\u0435 \u0432\u0438\u043a\u0438\u043f\u0435\u0434\u0438\u044e, \u043f\u0440\u0435\u0436\u0434\u0435 \u0447\u0435\u043c \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0430\u0442\u044c. \u042d\u0442\u0430 \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 \u0434\u0430\u043d\u043d\u044b\u0445 \u043d\u0430\u0441\u0442\u043e\u043b\u044c\u043a\u043e \u0432\u0430\u0436\u043d\u0430, \u0447\u0442\u043e \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440\u0435 \u0435\u0441\u0442\u044c \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u044b \u0438 \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u043d\u0438\u043c, \u0442.\u043d. \u0430\u043f\u043f\u0430\u0440\u0430\u0442\u043d\u044b\u0439 \u0441\u0442\u0435\u043a. \u0412\u043e\u043f\u0440\u0435\u043a\u0438 \u0438\u043d\u0442\u0443\u0438\u0442\u0438\u0432\u043d\u043e\u043c\u0443 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044e, \u0430\u043f\u043f\u0430\u0440\u0430\u0442\u043d\u044b\u0439 \u0441\u0442\u0435\u043a \u0440\u0430\u0441\u0442\u0451\u0442 \"\u0441\u0432\u0435\u0440\u0445\u0443 \u0432\u043d\u0438\u0437\", \u0438\u043b\u0438 \u043e\u0442 \u0431\u043e\u043b\u044c\u0448\u0438\u0445 \u0430\u0434\u0440\u0435\u0441\u043e\u0432 \u043a \u043c\u0435\u043d\u044c\u0448\u0438\u043c. \u0420\u0435\u0433\u0438\u0441\u0442\u0440 <code>sp</code> \u0445\u0440\u0430\u043d\u0438\u0442 \u0430\u0434\u0440\u0435\u0441, \u043a\u0443\u0434\u0430 \u0431\u044b\u043b\u043e \u0437\u0430\u043f\u0438\u0441\u0430\u043d\u043e \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435. \u041a\u043e\u043c\u0430\u043d\u0434\u0430 <code>push {r0}</code> \u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u0443\u043c\u0435\u043d\u044c\u0448\u0430\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 <code>sp</code> \u043d\u0430 4, \u0430 \u043f\u043e\u0442\u043e\u043c \u0437\u0430\u043f\u0438\u0441\u044b\u0432\u0430\u0435\u0442 \u0432 \u043f\u0430\u043c\u044f\u0442\u044c \u043f\u043e \u0430\u0434\u0440\u0435\u0441\u0443 <code>$sp</code> \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 <code>$r0</code>. \u041a\u043e\u043c\u0430\u043d\u0434\u0430 <code>pop {r1}</code> \u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u043f\u0440\u0438\u0441\u0432\u0430\u0438\u0432\u0430\u0435\u0442 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0443 <code>r1</code> \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0438\u0437 \u043f\u0430\u043c\u044f\u0442\u0438 \u043f\u043e \u0430\u0434\u0440\u0435\u0441\u0443 <code>$sp</code>, \u0430 \u043f\u043e\u0442\u043e\u043c \u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0432\u0430\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430 <code>sp</code> \u043d\u0430 4. \u041d\u0430 \u0441\u0430\u043c\u043c\u043e\u043c \u0434\u0435\u043b\u0435 \u043d\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c <code>sp</code> \u0438\u043c\u0435\u043d\u043d\u043e \u0432 \u043a\u043e\u043d\u0446\u0435, \u0434\u043b\u044f \u0441\u0442\u0435\u043a\u0430 \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u0434\u0435\u043b\u0438\u0442\u044c \u043b\u044e\u0431\u043e\u0439 \u0443\u0434\u043e\u0431\u043d\u044b\u0439 \u0443\u0447\u0430\u0441\u0442\u043e\u043a \u043e\u043f\u0435\u0440\u0430\u0442\u0438\u0432\u043d\u043e\u0439 \u043f\u0430\u043c\u044f\u0442\u0438, \u043d\u043e \u0432 \u043f\u0440\u043e\u0441\u0442\u044b\u0445 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430\u0445 \u0440\u0430\u0437\u0443\u043c\u043d\u043e \u0441\u0442\u0435\u043a\u0443 \u043e\u0442\u0434\u0430\u0442\u044c \u0432\u0435\u0440\u0445\u043d\u044e\u044e \u0447\u0430\u0441\u0442\u044c \u043f\u0430\u043c\u044f\u0442\u0438, \u0441 \u0431\u043e\u043b\u044c\u0448\u0438\u043c\u0438 \u0430\u0434\u0440\u0435\u0441\u0430\u043c\u0438, \u0430 \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u0440\u0430\u0441\u043f\u043e\u043b\u0430\u0433\u0430\u0442\u044c \u0432 \u043d\u0438\u0436\u043d\u0435\u0439 \u0447\u0430\u0441\u0442\u0438 \u043f\u0430\u043c\u044f\u0442\u0438, \u0441 \u043c\u0435\u043d\u044c\u0448\u0438\u043c\u0438 \u0430\u0434\u0440\u0435\u0441\u0430\u043c\u0438.</p> <p>\u0412 \u043d\u0430\u0448\u0435\u0439 \u043f\u0440\u043e\u0441\u0442\u0435\u0439\u0448\u0435\u0439 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0435 \u0441\u0442\u0435\u043a \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0440\u0435\u0433\u0438\u0441\u0442\u0440 <code>sp</code> \u043c\u043e\u0436\u043d\u043e \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043b\u044e\u0431\u044b\u043c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u043c. \u041d\u043e \u043f\u043e\u0447\u0442\u0438 \u0432 \u043b\u044e\u0431\u043e\u0439 \u043d\u0435\u0442\u0440\u0438\u0432\u0438\u0430\u043b\u044c\u043d\u043e\u0439 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0435 \u0441\u0442\u0435\u043a \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0431\u0443\u0434\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u044f.</p> <p>\u0412\u043e-\u0432\u0442\u043e\u0440\u044b\u0445 \u043e\u0442\u043a\u0443\u0434\u0430 \u0432\u0437\u044f\u043b\u043e\u0441\u044c \u0447\u0438\u0441\u043b\u043e <code>0x130</code>, \u043f\u043e\u0447\u0435\u043c\u0443 \u0431\u044b \u043d\u0430\u043c \u043d\u0435 \u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0438\u0442\u044c \u043d\u0430\u0448 \u043a\u043e\u0434 \u0441\u0440\u0430\u0437\u0443 \u0436\u0435 \u0441\u043e \u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u043c 8. \u041d\u0430 \u0441\u0430\u043c\u043e\u043c \u0434\u0435\u043b\u0435 \u044d\u0442\u043e \u043c\u043e\u0436\u043d\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0438 \u0432\u0441\u0451 \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0432 \u0434\u0430\u043d\u043d\u043e\u043c \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435. \u041d\u043e \u0432 \u043e\u0431\u0449\u0435\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u0442\u0430\u043a \u0434\u0435\u043b\u0430\u0442\u044c \u043d\u0435 \u043d\u0443\u0436\u043d\u043e. \u0412 \u043d\u0430\u0447\u0430\u043b\u0435 \u0430\u0434\u0440\u0435\u0441\u043d\u043e\u0433\u043e \u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0441\u0442\u0432\u0430 \u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0430 \u0442.\u043d. \u0442\u0430\u0431\u043b\u0438\u0446\u0430 \u0432\u0435\u043a\u0442\u043e\u0440\u043e\u0432 (\u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u0442\u0440\u0430\u043d\u043d\u043e\u0435, \u043d\u0435 \u0438\u0449\u0438\u0442\u0435 \u0432 \u043d\u0451\u043c \u0441\u043c\u044b\u0441\u043b). \u041f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u0435\u0439 \u0431\u044b\u043b\u043e \u0431\u044b \u0435\u0451 \u043d\u0430\u0437\u0432\u0430\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u0435\u0439 \u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0435\u0439 \u043d\u0430 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0438 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0439. \u0421\u0440\u0430\u0437\u0443 \u0441\u043a\u0430\u0436\u0443, \u0447\u0442\u043e \u044d\u0442\u043e \u043d\u0435 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0438\u0437 C++, \u044d\u0442\u043e \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440\u0430. \u041d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0432\u044b\u0437\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u043f\u0440\u0435\u0440\u044b\u0432\u0430\u043d\u0438\u044f\u043c\u0438, \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0432\u044b\u0437\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u043f\u043e \u0434\u0440\u0443\u0433\u0438\u043c \u043f\u0440\u0438\u0447\u0438\u043d\u0430\u043c. \u041a \u043f\u0440\u0438\u043c\u0435\u0440\u0443 \u0435\u0441\u043b\u0438 \u0432\u044b \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0435\u0442\u0435 \u0441\u043a\u043e\u0440\u043c\u0438\u0442\u044c \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440\u0443 \u043a\u0430\u043a\u0443\u044e-\u043d\u0438\u0431\u0443\u0434\u044c \u0434\u0438\u0447\u044c, \u0442\u043e \u0432\u044b\u0437\u043e\u0432\u0435\u0442\u0441\u044f \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043f\u043e\u0434 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\u043c usage fault. \u041a\u043e\u0433\u0434\u0430 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440 \u0432\u044b\u0437\u044b\u0432\u0430\u0435\u0442 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435, \u043e\u043d \u043f\u0440\u0438\u043e\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442 \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u043a\u043e\u0434 (\u043a\u043e\u0442\u043e\u0440\u044b\u0439, \u043a\u0441\u0442\u0430\u0442\u0438, \u043c\u043e\u0436\u0435\u0442 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0442\u044c \u0434\u0440\u0443\u0433\u043e\u0435 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435), \u043d\u0430\u0445\u043e\u0434\u0438\u0442 \u0430\u0434\u0440\u0435\u0441 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0439 \u0432 \u0442\u0430\u0431\u043b\u0438\u0446\u0435 \u0432\u0435\u043a\u0442\u043e\u0440\u043e\u0432, \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442, \u0447\u0442\u043e \u0443 \u044d\u0442\u043e\u0433\u043e \u0430\u0434\u0440\u0435\u0441\u0430 \u043c\u043b\u0430\u0434\u0448\u0438\u0439 \u0431\u0438\u0442 \u0432\u044b\u0441\u0442\u0430\u0432\u043b\u0435\u043d \u0432 \u0435\u0434\u0438\u043d\u0438\u0446\u0443 \u0438 \u0432\u044b\u0437\u044b\u0432\u0430\u0435\u0442 \u0444\u0443\u043d\u043a\u0446\u0438\u044e \u0441 \u044d\u0442\u0438\u043c \u0430\u0434\u0440\u0435\u0441\u043e\u043c.</p> <p>\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 \u043f\u043e \u0441\u043c\u0435\u0449\u0435\u043d\u0438\u044e <code>0x0000 000c</code> \u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d \u0430\u0434\u0440\u0435\u0441 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f <code>hard fault</code>.</p> <p>\u0427\u0438\u0441\u043b\u043e \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u043e\u0432 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0439 \u0434\u043b\u044f \u0440\u0430\u0437\u043d\u044b\u0445 \u043c\u043e\u0434\u0435\u043b\u0435\u0439 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440\u043e\u0432 \u0440\u0430\u0437\u043d\u043e\u0435, \u0434\u043b\u044f STM32F103 \u044d\u0442\u0443 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432 Reference Manual, \u0440\u0430\u0437\u0434\u0435\u043b 10.1.2, \u0442\u0430\u0431\u043b\u0438\u0446\u0430 63. \u0422\u0430\u043c \u0432\u0438\u0434\u043d\u043e, \u0447\u0442\u043e \u0430\u0434\u0440\u0435\u0441 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0433\u043e \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430 <code>DMA2_Channel4_5</code> \u0440\u0430\u0432\u0435\u043d <code>0x0000_012C</code>. \u041f\u0440\u0438\u0431\u0430\u0432\u0438\u043c 4 \u0438 \u043f\u043e\u043b\u0443\u0447\u0438\u043c \"\u0441\u0432\u043e\u0431\u043e\u0434\u043d\u0443\u044e\" \u043f\u0430\u043c\u044f\u0442\u044c \u043f\u043e \u0430\u0434\u0440\u0435\u0441\u0443 <code>0x0000_0130</code>. \u0412 \u043f\u0435\u0440\u0432\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u043c\u044b \u0432\u044b\u044f\u0441\u043d\u0438\u043b\u0438, \u0447\u0442\u043e \u0444\u043b\u0435\u0448 \u043f\u0430\u043c\u044f\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u0441 \u0430\u0434\u0440\u0435\u0441\u0430 <code>0x0800_0000</code>, \u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0441 \u0444\u043b\u0435\u0448-\u043f\u0430\u043c\u044f\u0442\u0438 \u043e\u043d\u0430 \u0442\u0430\u043a\u0436\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u0441 \u0430\u0434\u0440\u0435\u0441\u0430 <code>0x0000_0000</code>. \u041e\u0442\u0441\u044e\u0434\u0430 \u0438 \u0432\u0437\u044f\u043b\u0441\u044f \u044d\u0442\u043e\u0442 <code>0x0800_0130</code>.</p> <p>\u0418 \u043d\u0430\u043f\u043e\u0441\u043b\u0435\u0434\u043e\u043a \u0434\u0430\u0432\u0430\u0439\u0442\u0435 \u043d\u0430\u043f\u0438\u0448\u0435\u043c Makefile. \u041a\u043e\u043c\u0430\u043d\u0434\u044b \u0432\u044b\u0448\u0435, \u043a\u043e\u043d\u0435\u0447\u043d\u043e, \u043f\u0440\u043e\u0441\u0442\u044b\u0435 \u0438 \u0432 \u0446\u0435\u043b\u043e\u043c \u043f\u043e\u043d\u044f\u0442\u043d\u044b\u0435, \u043e\u0442\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u044e\u0442 \u0437\u0430 \u0442\u044b\u0441\u044f\u0447\u043d\u044b\u0435 \u0434\u043e\u043b\u0438 \u0441\u0435\u043a\u0443\u043d\u0434\u044b, \u043d\u043e \u0432\u0441\u0451 \u0436\u0435 \u0434\u043b\u044f \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0430 \u0441\u0431\u043e\u0440\u043a\u0438 \u0440\u0430\u0437\u0443\u043c\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c make.</p> <p><code>Makefile</code>:</p> <pre><code>loop.bin: loop.elf\n    arm-none-eabi-objcopy -O binary -j flash loop.elf loop.bin\n\nflash: loop.bin\n    st-flash write loop.bin 0x08000000\n\nloop.elf: loop.ld loop.o\n    arm-none-eabi-ld -T loop.ld -o loop.elf loop.o\n\nloop.o: loop.s\n    arm-none-eabi-as -o loop.o loop.s\n\nclean:\n    rm -f loop.o loop.elf loop.bin\n</code></pre> <p>\u041a\u0430\u0436\u0434\u043e\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u043e \u0438\u043c\u0435\u0435\u0442 \u0432\u0438\u0434</p> <pre><code>target-file: source-file1 source-file2\n    program argument1 argument2 ...\n</code></pre> <p>\u041e\u0447\u0435\u043d\u044c \u0432\u0430\u0436\u043d\u043e, \u0447\u0442\u043e \u0432\u043e \u0432\u0442\u043e\u0440\u043e\u0439 \u0441\u0442\u0440\u043e\u0447\u043a\u0435 \u0434\u043b\u044f \u043e\u0442\u0441\u0442\u0443\u043f\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0442\u0441\u044f \u0441\u0438\u043c\u0432\u043e\u043b \u0442\u0430\u0431\u0443\u043b\u044f\u0446\u0438\u0438, \u043d\u0435 \u043f\u0440\u043e\u0431\u0435\u043b\u044b. \u0423\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044c, \u0447\u0442\u043e \u0432\u0430\u0448 \u0440\u0435\u0434\u0430\u043a\u0442\u043e\u0440 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e.</p> <p>\u0421\u0445\u0435\u043c\u0430 \u0440\u0430\u0431\u043e\u0442\u044b make \u043e\u0447\u0435\u043d\u044c \u043f\u0440\u043e\u0441\u0442\u0430\u044f:</p> <ol> <li>\u0415\u0441\u043b\u0438 \u0432 Makefile-\u0435 \u0435\u0441\u0442\u044c \u043f\u0440\u0430\u0432\u0438\u043b\u043e \u0434\u043b\u044f \u0441\u0431\u043e\u0440\u043a\u0438 <code>source-file</code>, \u0442\u043e \u0441\u043d\u0430\u0447\u0430\u043b\u0430    \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442\u0441\u044f \u043e\u043d\u043e. \u0427\u0442\u043e-\u0442\u043e \u0432\u0440\u043e\u0434\u0435 \u0440\u0435\u043a\u0443\u0440\u0441\u0438\u0438.</li> <li>\u0415\u0441\u043b\u0438 <code>target-file</code> \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0438\u043b\u0438 \u0435\u0433\u043e \u0434\u0430\u0442\u0430 \u043c\u043e\u0434\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438 \u043c\u0435\u043d\u044c\u0448\u0435 \u0434\u0430\u0442\u044b    \u043c\u043e\u0434\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438 \u043e\u0434\u043d\u043e\u0433\u043e \u0438\u0437 <code>source-file</code>-\u043e\u0432, \u0442\u043e <code>make</code> \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u0443\u044e \u043a\u043e\u043c\u0430\u043d\u0434\u0443    \u0441\u043e \u0432\u0442\u043e\u0440\u043e\u0439 \u0441\u0442\u0440\u043e\u0447\u043a\u0438.</li> </ol> <p>\u041a\u043e\u043d\u0435\u0447\u043d\u043e \u0443 GNU make \u043d\u0430 \u0441\u0430\u043c\u043e\u043c \u0434\u0435\u043b\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u0430 \u043d\u0435\u0441\u043e\u0438\u0437\u043c\u0435\u0440\u0438\u043c\u043e \u0431\u043e\u043b\u044c\u0448\u0435, \u0438 \u0432 \u0441\u043b\u043e\u0436\u043d\u044b\u0445 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430\u0445 \u044d\u0442\u043e\u0442 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0432\u0435\u0441\u044c\u043c\u0430 \u043f\u043e\u043b\u0435\u0437\u0435\u043d.</p> <p>\u0415\u0441\u043b\u0438 \u043c\u044b \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u043c <code>make loop.bin</code> \u0432 \u043f\u0435\u0440\u0432\u044b\u0439 \u0440\u0430\u0437, \u0442\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u044e\u0442\u0441\u044f \u0432\u0441\u0435 \u043d\u0443\u0436\u043d\u044b\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b:</p> <pre><code>make loop.bin\narm-none-eabi-as -o loop.o loop.s\narm-none-eabi-ld -T linker.ld -o loop.elf loop.o\narm-none-eabi-objcopy -O binary -j flash loop.elf loop.bin\n</code></pre> <p>\u0415\u0441\u043b\u0438 \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u043c \u0432\u043e \u0432\u0442\u043e\u0440\u043e\u0439 \u0440\u0430\u0437, \u0442\u043e <code>make</code> \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0431\u0443\u0434\u0435\u0442 \u0434\u0435\u043b\u0430\u0442\u044c:</p> <pre><code>make loop.bin\nmake: 'loop.bin' is up to date.\n</code></pre> <p>\u0415\u0441\u043b\u0438 \u0438\u0437\u043c\u0435\u043d\u0438\u043c \u0434\u0430\u0442\u0443 \u043c\u043e\u0434\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438 \u043e\u0434\u043d\u043e\u0433\u043e \u0438\u0437 \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0445 \u0444\u0430\u0439\u043b\u043e\u0432, \u0442\u043e <code>make</code> \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442 \u0447\u0430\u0441\u0442\u044c \u043a\u043e\u043c\u0430\u043d\u0434:</p> <pre><code>touch linker.ld\nmake loop.bin\narm-none-eabi-ld -T linker.ld -o loop.elf loop.o\narm-none-eabi-objcopy -O binary -j flash loop.elf loop.bin\n</code></pre> <p><code>loop.s</code> \u043d\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u0441\u044f, \u0437\u043d\u0430\u0447\u0438\u0442 <code>loop.o</code> \u043f\u0435\u0440\u0435\u0441\u043e\u0431\u0438\u0440\u0430\u0442\u044c \u043d\u0435\u0442 \u043d\u0443\u0436\u0434\u044b.</p> <p>\u0412\u043d\u0438\u043c\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u0447\u0438\u0442\u0430\u0442\u0435\u043b\u044c \u043c\u043e\u0436\u0435\u0442 \u0443\u0432\u0438\u0434\u0435\u0442\u044c, \u0447\u0442\u043e \u0444\u0430\u0439\u043b\u043e\u0432 <code>clean</code> \u0438 <code>flash</code> \u0443 \u043d\u0430\u0441 \u0432 \u043f\u0440\u043e\u0435\u043a\u0442\u0435 \u043d\u0435\u0442, \u0430 \u043f\u0440\u0430\u0432\u0438\u043b\u0430 \u0435\u0441\u0442\u044c. \u042d\u0442\u043e \u0442.\u043d. phony targets, \u0438\u043c \u043d\u0438\u043a\u0430\u043a\u0438\u0435 \u0444\u0430\u0439\u043b\u044b \u043d\u0435 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0442, \u0430 \u043d\u0443\u0436\u043d\u044b \u043e\u043d\u0438 \u043f\u0440\u043e\u0441\u0442\u043e \u0434\u043b\u044f \u0443\u0434\u043e\u0431\u0441\u0442\u0432\u0430. \u041d\u0430\u0431\u0440\u0430\u043b\u0438 <code>make clean</code> \u0438 \u043f\u043e\u0447\u0438\u0441\u0442\u0438\u043b\u0438 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044e.</p>"},{"location":"3-blink/","title":"\u0427\u0430\u0441\u0442\u044c 3: \u043c\u0438\u0433\u0430\u0435\u043c \u0441\u0432\u0435\u0442\u043e\u0434\u0438\u043e\u0434\u043e\u043c","text":"<p>\u041c\u0438\u0433\u0430\u043d\u0438\u0435 \u0441\u0432\u0435\u0442\u043e\u0434\u0438\u043e\u0434\u043e\u043c \u044d\u0442\u043e \u0442\u0440\u0430\u0434\u0438\u0446\u0438\u043e\u043d\u043d\u044b\u0439 hello world \u0434\u043b\u044f \u043c\u0438\u043a\u0440\u043e\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440\u043e\u0432. \u042d\u0442\u043e \u043e\u0434\u0438\u043d \u0438\u0437 \u0441\u0430\u043c\u044b\u0445 \u043f\u0440\u043e\u0441\u0442\u044b\u0445 \u0441\u043f\u043e\u0441\u043e\u0431\u043e\u0432 \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0441 \u043e\u043a\u0440\u0443\u0436\u0430\u044e\u0449\u0435\u0439 \u0441\u0440\u0435\u0434\u043e\u0439 \u0431\u0435\u0437 \u043f\u043e\u043c\u043e\u0449\u0438 \u043e\u0442\u043b\u0430\u0434\u0447\u0438\u043a\u0430. \u0412 \u044d\u0442\u043e\u0439 \u0447\u0430\u0441\u0442\u0438 \u0438\u043c\u0435\u043d\u043d\u043e \u044d\u0442\u0438\u043c \u043c\u044b \u0438 \u0437\u0430\u0439\u043c\u0451\u043c\u0441\u044f.</p> <p>\u0421\u0440\u0430\u0437\u0443 \u043e\u0433\u043e\u0432\u043e\u0440\u0438\u043c\u0441\u044f, \u0447\u0442\u043e \u044d\u0442\u0430 \u0447\u0430\u0441\u0442\u044c \u0438 \u0434\u0430\u043b\u0435\u0435 \u0443\u0436\u0435 \u043e\u0447\u0435\u043d\u044c \u0441\u0438\u043b\u044c\u043d\u043e \u0437\u0430\u0432\u0438\u0441\u044f\u0442 \u043e\u0442 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0433\u043e \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440\u0430 \u0438 \u0434\u0430\u0436\u0435 \u043f\u043b\u0430\u0442\u044b. \u0412\u0441\u0435 \u0430\u0434\u0440\u0435\u0441\u0430 \u043f\u0440\u0438\u0432\u0435\u0434\u0435\u043d\u044b \u0441\u043e \u0441\u0441\u044b\u043b\u043a\u0430\u043c\u0438 \u043d\u0430 reference manual, \u0447\u0442\u043e \u0434\u043e\u043b\u0436\u043d\u043e \u043f\u043e\u043c\u043e\u0447\u044c \u0432 \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u0435 \u043a\u043e\u0434\u0430 \u043d\u0430 \u0434\u0440\u0443\u0433\u0438\u0435 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440\u044b.</p> <p>\u041d\u0430 \u043f\u043b\u0430\u0442\u0435 blue pill \u0441\u0438\u043d\u0438\u0439 \u0441\u0432\u0435\u0442\u043e\u0434\u0438\u043e\u0434 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d \u0430\u043d\u043e\u0434 (\u043f\u043b\u044e\u0441\u043e\u043c) \u043a \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u044e \u043d\u0430 3.3 \u0432\u043e\u043b\u044c\u0442\u0430, \u0430 \u043a\u0430\u0442\u043e\u0434\u043e\u043c (\u043c\u0438\u043d\u0443\u0441\u043e\u043c) \u043a \u0432\u044b\u0432\u043e\u0434\u0443 \u043c\u0438\u043a\u0440\u043e\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u0435\u0440\u0430, \u043e\u0431\u043e\u0437\u043d\u0430\u0447\u0435\u043d\u043d\u043e\u043c\u0443 C13 / 2 / PC13 / TAMPERRTC. \u0411\u043e\u043b\u044c\u0448\u0438\u043d\u0441\u0442\u0432\u043e \u0432\u044b\u0432\u043e\u0434\u043e\u0432 \u043c\u0438\u043a\u0440\u043e\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440\u0430 \u0441\u043f\u043e\u0441\u043e\u0431\u043d\u044b \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u0440\u0430\u0437\u043d\u044b\u0435 \u0437\u0430\u0434\u0430\u0447\u0438, \u043e\u0442\u0441\u044e\u0434\u0430 \u0438 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0439. \u0422\u0435\u043f\u0435\u0440\u044c \u043e\u0442\u043a\u0440\u043e\u0435\u043c Datasheet \u043d\u0430 \u043c\u0438\u043a\u0440\u043e\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440, \u0438 \u043d\u0430\u0439\u0434\u0451\u043c \u044d\u0442\u043e\u0442 \u0432\u044b\u0432\u043e\u0434 \u0442\u0430\u043c. \u041d\u0430 \u043f\u043b\u0430\u0442\u0435 \u0432\u0438\u0434\u043d\u043e, \u0447\u0442\u043e \u0443 \u043c\u0438\u043a\u0440\u043e\u0441\u0445\u0435\u043c\u044b \u0438\u043c\u0435\u0435\u0442\u0441\u044f 48 \u0432\u044b\u0432\u043e\u0434\u043e\u0432, \u043f\u043e 12 \u043d\u0430 \u043a\u0430\u0436\u0434\u043e\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u0435. \u042d\u0442\u043e\u043c\u0443 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0442\u0438\u043f \u043a\u043e\u0440\u043f\u0443\u0441\u0430 LQFP48, \u0435\u0433\u043e \u043c\u043e\u0436\u043d\u043e \u0443\u0432\u0438\u0434\u0435\u0442\u044c \u0432 \u0440\u0430\u0437\u0434\u0435\u043b\u0435 3, \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0438 8. \u0422\u0430\u043c \u0436\u0435 \u0432\u0438\u0434\u043d\u043e, \u0447\u0442\u043e \u0443 \u044d\u0442\u043e\u0433\u043e \u043a\u043e\u0440\u043f\u0443\u0441\u0430 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0435\u0441\u0442\u044c \u0432\u044b\u0432\u043e\u0434 \u0441 \u043d\u043e\u043c\u0435\u0440\u043e\u043c 2 \u0438 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u043e\u043c PC13-TAMPER-RTC. \u0421\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435 \u043c\u0435\u0436\u0434\u0443 \u043f\u043b\u0430\u0442\u044b \u0438 datasheet \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u0435\u0440\u0430 \u043c\u044b \u043f\u0440\u043e\u0432\u0435\u043b\u0438 \u0438 \u0442\u0435\u043f\u0435\u0440\u044c \u0442\u043e\u0447\u043d\u043e \u0437\u043d\u0430\u0435\u043c, \u0441 \u043a\u0430\u043a\u0438\u043c \u0432\u044b\u0432\u043e\u0434\u043e\u043c \u0431\u0443\u0434\u0435\u043c \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c.</p> <p>\u0414\u043b\u044f \u0442\u043e\u0433\u043e, \u0447\u0442\u043e\u0431\u044b \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u044d\u0442\u043e\u0442 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b, \u043c\u0438\u043a\u0440\u043e\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440 \u0438\u043c\u0435\u0435\u0442 \u043d\u0430\u0431\u043e\u0440 GPIO \u043f\u043e\u0440\u0442\u043e\u0432. \u041f\u043e\u0440\u0442 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0441\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0438\u0440\u043e\u0432\u0430\u043d \u0432 \u0440\u0435\u0436\u0438\u043c\u0435 \u0432\u0445\u043e\u0434\u0430 (input), \u0432 \u044d\u0442\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043e\u043d \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u0435 \u043c\u0435\u0436\u0434\u0443 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u043c \u0432\u044b\u0432\u043e\u0434\u043e\u043c \u0438 \"\u0437\u0435\u043c\u043b\u0451\u0439\" \u0432 \u0431\u0438\u043d\u0430\u0440\u043d\u043e\u043c \u0432\u0438\u0434\u0435 (<code>0</code> \u044d\u0442\u043e \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0435 \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u044f, <code>1</code> \u044d\u0442\u043e \u043d\u043e\u043c\u0438\u043d\u0430\u043b\u044c\u043d\u043e\u0435 \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u0435). \u041d\u043e \u043d\u0430\u0441 \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u0443\u0435\u0442 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u043f\u043e\u0440\u0442\u0430 \u0432 \u0440\u0435\u0436\u0438\u043c\u0435 \u0432\u044b\u0445\u043e\u0434\u0430 (output). \u0412 \u044d\u0442\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043c\u0438\u043a\u0440\u043e\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440 \u0434\u043b\u044f \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f <code>0</code> \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u0432\u044b\u0432\u043e\u0434 \u043a \u0437\u0435\u043c\u043b\u0435, \u0430 \u0434\u043b\u044f \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f <code>1</code> \u043b\u0438\u0431\u043e \u0441\u043e\u0435\u0434\u0438\u043d\u044f\u0435\u0442 \u0432\u044b\u0432\u043e\u0434 \u0441 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u043e\u043c \u043d\u0430\u043f\u0440\u044f\u0436\u0435\u043d\u0438\u044f \u0432 \u0440\u0435\u0436\u0438\u043c\u0435 \u0434\u0432\u0443\u0445\u0442\u0430\u043a\u0442\u043d\u043e\u0433\u043e \u0432\u044b\u0445\u043e\u0434\u0430 (push-pull output), \u043b\u0438\u0431\u043e \u043e\u0442\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u0432\u044b\u0432\u043e\u0434 \u043e\u0442 \u0441\u0445\u0435\u043c\u044b \u0432 \u0440\u0435\u0436\u0438\u043c\u0435 \u0432\u044b\u0445\u043e\u0434\u0430 \u0441 \u043e\u0442\u043a\u0440\u044b\u0442\u044b\u043c \u043a\u043e\u043b\u043b\u0435\u043a\u0442\u043e\u0440\u043e\u043c (open drain output).</p> <p>\u0412 \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u0438 \u043a \u043d\u0430\u0448\u0435\u0439 \u0441\u0445\u0435\u043c\u0435 <code>0</code> \u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442 \u0432\u044b\u0445\u043e\u0434 \u043c\u0438\u043a\u0440\u043e\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440\u0430 \u0441 \u0437\u0435\u043c\u043b\u0451\u0439, \u0430 \u0437\u043d\u0430\u0447\u0438\u0442 \u0438 \u0430\u043d\u043e\u0434 \u0441\u0432\u0435\u0442\u043e\u0434\u0438\u043e\u0434\u0430. \u0427\u0435\u0440\u0435\u0437 \u0441\u0432\u0435\u0442\u043e\u0434\u0438\u043e\u0434 \u043f\u043e\u0442\u0435\u0447\u0451\u0442 \u0442\u043e\u043a \u0438 \u043e\u043d \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u0441\u044f. <code>1</code> \u0432 \u043b\u044e\u0431\u043e\u043c \u0440\u0435\u0436\u0438\u043c\u0435 \u043e\u0442\u043a\u043b\u044e\u0447\u0438\u0442 \u0441\u0432\u0435\u0442\u043e\u0434\u0438\u043e\u0434 \u0438 \u043e\u043d \u0432\u044b\u043a\u043b\u044e\u0447\u0438\u0442\u0441\u044f.</p> <p>\u0418\u043d\u0442\u0435\u0440\u0435\u0441\u0443\u044e\u0449\u0438\u0439 \u043d\u0430\u0441 \u0432\u044b\u0432\u043e\u0434 \u043c\u0438\u043a\u0440\u043e\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440\u0430 \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f PC13, \u044d\u0442\u043e \u043c\u043e\u0436\u043d\u043e \u0440\u0430\u0441\u043a\u0440\u044b\u0442\u044c \u043a\u0430\u043a Port C 13. \u0423 \u043c\u0438\u043a\u0440\u043e\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440\u0430 \u0438\u043c\u0435\u0435\u0442\u0441\u044f \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043f\u043e\u0440\u0442\u043e\u0432 \u0432\u0432\u043e\u0434\u0430-\u0432\u044b\u0432\u043e\u0434\u0430 \u0438 \u043a\u0430\u0436\u0434\u044b\u0439 \u043f\u043e\u0440\u0442 \u0441\u043f\u043e\u0441\u043e\u0431\u0435\u043d \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0441 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u043c\u0438 \u0432\u044b\u0432\u043e\u0434\u0430\u043c\u0438. \u0414\u0440\u0443\u0433\u043e\u0435 \u043e\u0431\u043e\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e\u0440\u0442\u0430 C \u044d\u0442\u043e GPIOC. \u0415\u0441\u043b\u0438 \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432 Reference Manual, \u0440\u0430\u0437\u0434\u0435\u043b\u0435 3.1 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 1 (System Architecture), \u043c\u043e\u0436\u043d\u043e \u0443\u0432\u0438\u0434\u0435\u0442\u044c, \u0447\u0442\u043e \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e GPIOC \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u043e \u0447\u0435\u0440\u0435\u0437 \u0448\u0438\u043d\u0443 APB2 (Advanced Peripheral Bus). \u042d\u0442\u043e \u0432\u0430\u0436\u043d\u043e \u043f\u043e\u043d\u0438\u043c\u0430\u0442\u044c, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u0442\u043e\u043c \u043d\u0430\u0439\u0442\u0438 \u043d\u0443\u0436\u043d\u044b\u0435 \u043f\u0443\u043d\u043a\u0442\u044b \u0432 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438.</p> <p>\u041f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0443 \u043c\u0438\u043a\u0440\u043e\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440\u0430 \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u044b \u043f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0432\u0441\u0435 \u043f\u0435\u0440\u0438\u0444\u0435\u0440\u0438\u0439\u043d\u044b\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430. \u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u043f\u0435\u0440\u0432\u043e\u0435, \u0447\u0442\u043e \u043d\u0443\u0436\u043d\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c, \u044d\u0442\u043e \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043f\u043e\u0440\u0442 GPIOC. \u0414\u0430\u043b\u0435\u0435 \u043d\u0443\u0436\u043d\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0432\u044b\u0432\u043e\u0434 C13 \u043a\u0430\u043a \u0432\u044b\u0445\u043e\u0434 \u0441 \u043e\u0442\u043a\u0440\u044b\u0442\u044b\u043c \u043a\u043e\u043b\u043b\u0435\u043a\u0442\u043e\u0440\u043e\u043c. \u041f\u043e \u0441\u0443\u0442\u0438 \u044d\u0442\u043e \u0432\u0441\u0435 \u043f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f. \u041f\u043e\u0441\u043b\u0435 \u044d\u0442\u043e\u0433\u043e \u043c\u043e\u0436\u043d\u043e \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u0432\u044b\u0432\u043e\u0434\u043e\u043c C13, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0438 \u0432\u044b\u043a\u043b\u044e\u0447\u0430\u044f \u0441\u0432\u0435\u0442\u043e\u0434\u0438\u043e\u0434. \u0414\u043b\u044f \u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0438 \u043c\u0435\u0436\u0434\u0443 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435\u043c \u0438 \u0432\u044b\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435\u043c \u0431\u0443\u0434\u0435\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \"\u043f\u0443\u0441\u0442\u043e\u0439\" \u0446\u0438\u043a\u043b, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0437\u0430\u0439\u043c\u0451\u0442 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440 \u0440\u0430\u0431\u043e\u0442\u043e\u0439 \u043d\u0430 \u043d\u0443\u0436\u043d\u043e\u0435 \u0447\u0438\u0441\u043b\u043e \u043c\u0438\u043b\u043b\u0438\u0441\u0435\u043a\u0443\u043d\u0434.</p> <p>\u041f\u0440\u043e\u0435\u043a\u0442 \u0432\u043e\u0437\u044c\u043c\u0451\u043c \u0438\u0437 \u0432\u0442\u043e\u0440\u043e\u0439 \u0447\u0430\u0441\u0442\u0438, \u043f\u0435\u0440\u0435\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u0432 <code>loop</code> \u0432 <code>blink</code>.</p> <p>\u0418\u0442\u0430\u043a \u043f\u0435\u0440\u0432\u043e\u0435, \u0447\u0442\u043e \u043d\u0443\u0436\u043d\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c, \u044d\u0442\u043e \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043f\u043e\u0440\u0442 GPIOC. \u0414\u043b\u044f \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043f\u0435\u0440\u0438\u0444\u0435\u0440\u0438\u0439\u043d\u044b\u0445 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432 \u0432 \u043c\u0438\u043a\u0440\u043e\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440\u0435 \u0438\u043c\u0435\u0435\u0442\u0441\u044f RCC (reset and clock control, \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u0431\u0440\u043e\u0441\u043e\u043c \u0438 \u0442\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\u043c). \u0412\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u0441 RCC \u043e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 \u0437\u0430\u043f\u0438\u0441\u044c \u043d\u0443\u0436\u043d\u044b\u0445 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439 \u0432 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u044b RCC. \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u044d\u0442\u0438\u0445 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u043e\u0432 \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u0447\u0438\u0442\u0430\u0442\u044c \u0432 Reference Manual, \u0440\u0430\u0437\u0434\u0435\u043b\u0435 8.3. \u0412 \u0440\u0430\u0437\u0434\u0435\u043b\u0435 8.3.7 \u043e\u043f\u0438\u0441\u0430\u043d \u0440\u0435\u0433\u0438\u0441\u0442\u0440 RCC_APB2ENR, \u0432\u043a\u043b\u044e\u0447\u0430\u044e\u0449\u0438\u0439 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430 \u043d\u0430 \u0448\u0438\u043d\u0435 APB2. \u0412 \u0447\u0430\u0441\u0442\u043d\u043e\u0441\u0442\u0438 \u0431\u0438\u0442 4 IOPCEN \u043e\u0442\u0432\u0435\u0447\u0430\u0435\u0442 \u0438\u043c\u0435\u043d\u043d\u043e \u0437\u0430 \u043f\u043e\u0440\u0442 \u0432\u0432\u043e\u0434\u0430-\u0432\u044b\u0432\u043e\u0434\u0430 C. \u0420\u0435\u0433\u0438\u0441\u0442\u0440 RCC_APB2ENR \u0438\u043c\u0435\u0435\u0442 \u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435 <code>0x18</code> \u043e\u0442 \u043d\u0430\u0447\u0430\u043b\u0430 \u0430\u0434\u0440\u0435\u0441\u043d\u043e\u0433\u043e \u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0441\u0442\u0432\u0430, \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u043e\u0433\u043e \u0434\u043b\u044f RCC. \u0415\u0441\u043b\u0438 \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432 Reference Manual, \u0440\u0430\u0437\u0434\u0435\u043b\u0435 3.3, \u043c\u043e\u0436\u043d\u043e \u043d\u0430\u0439\u0442\u0438, \u0447\u0442\u043e \u0434\u043b\u044f RCC \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043e \u0430\u0434\u0440\u0435\u0441\u043d\u043e\u0435 \u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0441\u0442\u0432\u043e <code>0x4002_1000</code>-<code>0x4002_13FF</code>. \u0420\u0435\u0437\u044e\u043c\u0438\u0440\u0443\u044f: \u043d\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u043f\u0440\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0435\u0434\u0438\u043d\u0438\u0446\u0443 \u0432 4-\u0439 \u0431\u0438\u0442 \u043f\u043e \u0430\u0434\u0440\u0435\u0441\u0443 <code>0x4002_1000 + 0x18</code>.</p> <p>\u041d\u0430 \u0430\u0441\u0441\u0435\u043c\u0431\u043b\u0435\u0440\u0435 \u044d\u0442\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u0431\u0443\u0434\u0435\u0442 \u0437\u0430\u043f\u0438\u0441\u044b\u0432\u0430\u0442\u044c\u0441\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c:</p> <pre><code># enable I/O port C clock\nldr r0, =0x40021000 + 0x18\nldr r1, [r0]\norr r1, r1, 0x00000010\nstr r1, [r0]\n</code></pre> <p>\u042d\u0442\u043e\u043c\u0443 \u043a\u043e\u0434\u0443 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u043f\u0441\u0435\u0432\u0434\u043e\u043a\u043e\u0434</p> <pre><code># enable I/O port C clock\nr0 := 0x4002_1000 + 0x18;\nr1 := memory[r0];\nr1[5] := 1;\nmemory[r0] := r1;\n</code></pre> <p>\u041f\u043e\u0441\u043b\u0435 \u044d\u0442\u043e\u0433\u043e \u043d\u0443\u0436\u043d\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0432\u044b\u0432\u043e\u0434 \u042113. \u0412 reference manual, \u0440\u0430\u0437\u0434\u0435\u043b\u0435 9.2.2 \u043e\u043f\u0438\u0441\u0430\u043d \u0440\u0435\u0433\u0438\u0441\u0442\u0440 <code>GPIOx_CRH</code> \u0441\u043e \u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435\u043c <code>0x04</code>, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0442\u044c \u044d\u0442\u043e\u0442 \u0432\u044b\u0432\u043e\u0434: \u0431\u0438\u0442\u044b 20 \u0438 21 \u0441 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\u043c <code>MODE13</code> \u0438 \u0431\u0438\u0442\u044b 22 \u0438 23 \u0441 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\u043c <code>CNF13</code>. \u0412 \u0440\u0430\u0437\u0434\u0435\u043b\u0435 9.1, \u0442\u0430\u0431\u043b\u0438\u0446\u0435 21 \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u043e \u043e\u043f\u0438\u0441\u0430\u043d\u044b \u0432\u0441\u0435 \u0441\u043e\u0447\u0435\u0442\u0430\u043d\u0438\u044f \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439. \u0414\u043b\u044f \u043d\u0430\u0448\u0435\u0433\u043e \u0441\u043b\u0443\u0447\u0430\u044f \u043d\u0443\u0436\u043d\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c <code>CNF1</code> \u0432 0, <code>CNF0</code> \u0432 1, <code>MODE1</code> \u0432 1, <code>MODE0</code> \u0432 0. \u042d\u0442\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442 \u043f\u043e\u0440\u0442 \u0432 \u0440\u0435\u0436\u0438\u043c general purpose output, open-drain, maximum output speed 2 MHz. \u0412 reference manual, \u0440\u0430\u0437\u0434\u0435\u043b\u0435 3.3 \u043c\u043e\u0436\u043d\u043e \u043d\u0430\u0439\u0442\u0438 \u0430\u0434\u0440\u0435\u0441\u0430 \u0434\u043b\u044f GPIO Port C: <code>0x4001 1000 - 0x4001 13FF</code>. \u0422\u0430\u043a\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c \u043d\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u043c\u043e\u0434\u0438\u0444\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043c\u0430\u0448\u0438\u043d\u043d\u043e\u0435 \u0441\u043b\u043e\u0432\u043e \u043f\u043e \u0430\u0434\u0440\u0435\u0441\u0443 <code>0x4001 1000 + 0x04</code>.</p> <p>\u0414\u043b\u044f \u043d\u0430\u0433\u043b\u044f\u0434\u043d\u043e\u0441\u0442\u0438 \u043f\u0440\u0438\u0432\u0435\u0434\u0451\u043c \u0442\u043e, \u0447\u0442\u043e \u043d\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c. <code>?</code> \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442, \u0447\u0442\u043e \u043c\u044b \u043d\u0435 \u043c\u0435\u043d\u044f\u0435\u043c \u044d\u0442\u043e\u0442 \u0431\u0438\u0442.</p> <pre><code>                        +------------------------------ CNF13, bit 1\n                        |+----------------------------- CNF13, bit 0\n                        ||+---------------------------- MODE13, bit 1\n                        |||+--------------------------- MODE13, bit 0\n                        ||||\n0x4001 1004: ???? ????  0110 ????  ???? ????  ???? ????\n</code></pre> <p>\u041d\u0430 \u0430\u0441\u0441\u0435\u043c\u0431\u043b\u0435\u0440\u0435 \u044d\u0442\u043e \u0437\u0430\u043f\u0438\u0448\u0435\u0442\u0441\u044f \u0442\u0430\u043a:</p> <pre><code># configure PC13 as open-drain output with 10 MHz speed\nldr r0, =0x40011000 + 0x04\nldr r1, [r0]\norr r1, r1, 0x00600000\nbic r1, r1, 0x00900000\nstr r1, [r0]\n</code></pre> <p>\u042d\u0442\u043e\u043c\u0443 \u043a\u043e\u0434\u0443 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u043f\u0441\u0435\u0432\u0434\u043e\u043a\u043e\u0434</p> <pre><code># configure PC13 as open-drain output with 10 MHz speed\nr0 := 0x4001_1000 + 0x04;\nr1 := memory[r0];\nr1[21] := 1;\nr1[22] := 1;\nr1[20] := 0;\nr1[23] := 0;\nmemory[r0] := r1;\n</code></pre> <p>\u042d\u0442\u043e\u0433\u043e \u043a\u043e\u0434\u0430 \u0445\u0432\u0430\u0442\u0430\u0435\u0442, \u0447\u0442\u043e\u0431\u044b \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0441\u0432\u0435\u0442\u043e\u0434\u0438\u043e\u0434 (\u0442.\u043a. \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u043f\u043e\u0440\u0442 \u0438\u043c\u0435\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 0).</p> <p>\u0414\u043b\u044f \u0442\u043e\u0433\u043e, \u0447\u0442\u043e\u0431\u044b \u0441\u0432\u0435\u0442\u043e\u0434\u0438\u043e\u0434 \u043d\u0430\u0447\u0430\u043b \u043c\u0438\u0433\u0430\u0442\u044c, \u043d\u0443\u0436\u043d\u043e \u0435\u0449\u0451 \u043d\u0435\u043c\u043d\u043e\u0436\u043a\u043e \u043a\u043e\u0434\u0430. \u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u0440\u0442\u043e\u043c \u0432\u044b\u0445\u043e\u0434\u0430 \u043e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 \u0440\u0435\u0433\u0438\u0441\u0442\u0440 <code>GPIOx_ODR</code>, \u0438\u043c\u0435\u044e\u0449\u0438\u0439 \u0441\u043c\u0435\u0449\u0435\u043d\u0438\u0435 <code>0x0c</code>. \u041f\u043e\u0440\u0442\u0443 13, \u043a\u0430\u043a \u043d\u0435\u0441\u043b\u043e\u0436\u043d\u043e \u0434\u043e\u0433\u0430\u0434\u0430\u0442\u044c\u0441\u044f, \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0431\u0438\u0442 13. \u0414\u043b\u044f \u0437\u0430\u0434\u0435\u0440\u0436\u043a\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c \u043f\u0443\u0441\u0442\u043e\u0439 \u0446\u0438\u043a\u043b \u0438\u0437 \u043c\u0438\u043b\u043b\u0438\u043e\u043d\u0430 \u0438\u0442\u0435\u0440\u0430\u0446\u0438\u0439, \u043e\u043d \u0437\u0430\u043d\u0438\u043c\u0430\u0435\u0442 \u043f\u0440\u0438\u043c\u0435\u0440\u043d\u043e \u043f\u043e\u043b\u043e\u0432\u0438\u043d\u0443 \u0441\u0435\u043a\u0443\u043d\u0434\u044b.</p> <p>\u0412 \u0438\u0442\u043e\u0433\u0435 \u0443 \u043d\u0430\u0441 \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u0441\u044f \u0442\u0430\u043a\u043e\u0439 \u043a\u043e\u0434 \u0434\u043b\u044f \u043c\u0438\u0433\u0430\u043d\u0438\u044f:</p> <pre><code>blink_loop:\n\n# wait loop\nldr r0, =1000000\ndelay_loop:\nsubs r0, r0, #1\nbne delay_loop\n\n# toggle PC13\nldr r0, =0x40011000 + 0x0c\nldr r1, [r0]\neor r1, r1, 0x00002000\nstr r1, [r0]\n\nb blink_loop\n</code></pre> <p>\u0415\u043c\u0443 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u043f\u0441\u0435\u0432\u0434\u043e\u043a\u043e\u0434</p> <pre><code>blink_loop:\n\n# wait loop\nr0 := 1000000;\ndelay_loop:\nr0 := r0 - 1;\nif r0 != 0 goto delay_loop;\n\n# toggle PC13\nr0 := 0x4001_1000 + 0x0c;\nr1 := memory[r0];\nr1[13] := ~r1[13];\nmemory[r0] := r1;\n\ngoto blink_loop;\n</code></pre> <p>\u041f\u043e\u043b\u043d\u044b\u0439 \u043a\u043e\u0434 \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u043d\u0430 \u0433\u0438\u0442\u0445\u0430\u0431\u0435.</p>"},{"location":"4-loopc/","title":"\u0427\u0430\u0441\u0442\u044c 4: \u041d\u0430\u0447\u0438\u043d\u0430\u0435\u043c \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0441 C","text":"<p>\u0417\u043d\u0430\u043d\u0438\u0435 \u0430\u0441\u0441\u0435\u043c\u0431\u043b\u0435\u0440\u0430 \u0432\u0430\u0436\u043d\u043e, \u043d\u043e \u043c\u043d\u043e\u0433\u0438\u0435 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u044b \u0440\u0430\u0437\u0443\u043c\u043d\u0435\u0439 \u043f\u0438\u0441\u0430\u0442\u044c \u043d\u0430 C. \u0412 \u044d\u0442\u043e\u0439 \u0447\u0430\u0441\u0442\u0438 \u043c\u044b \u043d\u0430\u043f\u0438\u0448\u0435\u043c \u043f\u0440\u043e\u0441\u0442\u0443\u044e \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0443 \u043d\u0430 C, \u0441\u043a\u043e\u043c\u043f\u0438\u043b\u0438\u0440\u0443\u0435\u043c \u0435\u0451, \u0438\u0441\u0441\u043b\u0435\u0434\u0443\u0435\u043c \u043f\u043e\u043b\u0443\u0447\u0438\u0432\u0448\u0438\u0439\u0441\u044f \u043e\u0431\u044a\u0435\u043a\u0442\u043d\u044b\u0439 \u0444\u0430\u0439\u043b, \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u0441\u043a\u043e\u043c\u043f\u043e\u043d\u0443\u0435\u043c \u0438 \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u043c. \u041f\u043e\u0441\u043b\u0435 \u044d\u0442\u043e\u0433\u043e \u0435\u0449\u0451 \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u0438\u0437\u0443\u0447\u0438\u043c gdb.</p> <p>\u0412\u043e\u0442 \u043d\u0430\u0448\u0430 \u043f\u0440\u043e\u0441\u0442\u0430\u044f \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430:</p> <p><code>loopc.c</code></p> <pre><code>#include &lt;stdint.h&gt;\n\nstatic const uint32_t loop_start = 0x12345678;\nstatic const uint32_t loop_increment = 3;\nstatic uint32_t loop_value_1 = loop_start;\nstatic uint32_t loop_value_2;\n\nvoid start(void)\n{\n    for (;;)\n    {\n        loop_value_2 = loop_value_1 + loop_increment;\n        loop_value_1 = loop_value_2;\n    }\n}\n</code></pre> <p>\u0412 \u044d\u0442\u043e\u0439 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0435 \u0438\u043c\u0435\u044e\u0442\u0441\u044f \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u044b:</p> <ol> <li>\u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0435 \u043a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u044b.</li> <li>\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u0430\u044f \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f.</li> <li>\u041d\u0435\u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u0430\u044f \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f.</li> <li>\u041d\u0443 \u0438, \u043a\u043e\u043d\u0435\u0447\u043d\u043e, \u043a\u043e\u0434.</li> </ol> <p>\u0421\u043a\u043e\u043c\u043f\u0438\u043b\u0438\u0440\u0443\u0435\u043c \u044d\u0442\u0443 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0443:</p> <pre><code>arm-none-eabi-gcc -mcpu=cortex-m3 -g -O0 -c -o loopc.o loopc.c\n</code></pre> <p>\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 <code>-mcpu=cortex-m3</code> \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440\u0443, \u0447\u0442\u043e \u043c\u044b \u0445\u043e\u0442\u0438\u043c \u0441\u0433\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u043e\u0434 \u0434\u043b\u044f ARM Cortex M3.</p> <p>\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 <code>-g</code> \u0443\u043a\u0430\u0437\u0432\u044b\u0430\u0435\u0442 \u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440\u0443, \u0447\u0442\u043e \u043c\u044b \u0445\u043e\u0442\u0438\u043c \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043e\u0431\u044a\u0435\u043a\u0442\u043d\u044b\u0439 \u0444\u0430\u0439\u043b \u043e\u0442\u043b\u0430\u0434\u043e\u0447\u043d\u0443\u044e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e. \u041e\u043d\u0430 \u043f\u0440\u0438\u0433\u043e\u0434\u0438\u0442\u0441\u044f \u043f\u043e\u0437\u0434\u043d\u0435\u0439, \u043a\u043e\u0433\u0434\u0430 \u043c\u044b \u0431\u0443\u0434\u0435\u043c \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0442\u044c \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0443 \u043f\u043e\u0434 \u043e\u0442\u043b\u0430\u0434\u043a\u043e\u0439.</p> <p>\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 <code>-O0</code> \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440\u0443, \u0447\u0442\u043e \u043c\u044b \u043d\u0435 \u0445\u043e\u0442\u0438\u043c \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u043e\u0434. \u0414\u043b\u044f \u0440\u0435\u0430\u043b\u044c\u043d\u044b\u0445 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c \u0441\u0442\u043e\u0438\u0442 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 <code>-Os</code>, <code>-O2</code> \u0438\u043b\u0438 <code>-O3</code>, \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0442\u043e\u0433\u043e, \u0445\u043e\u0442\u0438\u0442\u0435 \u043b\u0438 \u0432\u044b \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432\u044b\u0445\u043e\u0434\u043d\u043e\u0439 \u043a\u043e\u0434 \u043f\u043e \u0440\u0430\u0437\u043c\u0435\u0440\u0443 \u0438\u043b\u0438 \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u0438. \u041d\u043e \u0434\u043b\u044f \u043d\u0430\u0448\u0435\u0433\u043e \u0441\u043b\u0443\u0447\u0430\u044f \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u044f \u0441\u043e\u0432\u0441\u0435\u043c \u043d\u0438 \u043a \u0447\u0435\u043c\u0443 \u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u043e\u043c\u0435\u0448\u0430\u0435\u0442.</p> <p>\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 <code>-c</code> \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440\u0443, \u0447\u0442\u043e \u043c\u044b \u0445\u043e\u0442\u0438\u043c \u0442\u043e\u043b\u044c\u043a\u043e \u0441\u043a\u043e\u043c\u043f\u0438\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0444\u0430\u0439\u043b. \u0411\u0435\u0437 \u043d\u0435\u0433\u043e \u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440 \u0432\u044b\u0437\u043e\u0432\u0435\u0442 \u043b\u0438\u043d\u043a\u0435\u0440, \u044d\u0442\u043e \u043d\u0430\u043c \u043d\u0435 \u043d\u0443\u0436\u043d\u043e.</p> <p>\u041f\u043e\u0441\u043b\u0435 \u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0446\u0438\u0438 \u0438\u0441\u0441\u043b\u0435\u0434\u0443\u0435\u043c \u043f\u043e\u043b\u0443\u0447\u0438\u0432\u0448\u0438\u0439\u0441\u044f \u043e\u0431\u044a\u0435\u043a\u0442\u043d\u044b\u0439 \u0444\u0430\u0439\u043b:</p> <pre><code>arm-none-eabi-objdump -D loopc.o\n\nloopc.o:     file format elf32-littlearm\n\n\nDisassembly of section .text:\n\n00000000 &lt;start&gt;:\n   0:   b480        push    {r7}\n   2:   af00        add r7, sp, #0\n   4:   4b05        ldr r3, [pc, #20]   @ (1c &lt;start+0x1c&gt;)\n   6:   681b        ldr r3, [r3, #0]\n   8:   2203        movs    r2, #3\n   a:   4413        add r3, r2\n   c:   4a04        ldr r2, [pc, #16]   @ (20 &lt;start+0x20&gt;)\n   e:   6013        str r3, [r2, #0]\n  10:   4b03        ldr r3, [pc, #12]   @ (20 &lt;start+0x20&gt;)\n  12:   681b        ldr r3, [r3, #0]\n  14:   4a01        ldr r2, [pc, #4]    @ (1c &lt;start+0x1c&gt;)\n  16:   6013        str r3, [r2, #0]\n  18:   e7f4        b.n 4 &lt;start+0x4&gt;\n  1a:   bf00        nop\n    ...\n\nDisassembly of section .data:\n\n00000000 &lt;loop_value_1&gt;:\n   0:   12345678    eorsne  r5, r4, #120, 12    @ 0x7800000\n\nDisassembly of section .bss:\n\n00000000 &lt;loop_value_2&gt;:\n   0:   00000000    andeq   r0, r0, r0\n\nDisassembly of section .rodata:\n\n00000000 &lt;loop_start&gt;:\n   0:   12345678    eorsne  r5, r4, #120, 12    @ 0x7800000\n\n00000004 &lt;loop_increment&gt;:\n   4:   00000003    andeq   r0, r0, r3\n\n...\n</code></pre> <p>\u041d\u0430\u0441 \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u0443\u044e\u0442 \u043f\u0435\u0440\u0432\u044b\u0435 \u0447\u0435\u0442\u044b\u0440\u0435 \u0441\u0435\u043a\u0446\u0438\u0438: <code>.text</code>, <code>.data</code>, <code>.bss</code> \u0438 <code>.rodata</code>. \u041e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0435 \u0441\u0435\u043a\u0446\u0438\u0438 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442 \u043e\u0442\u043b\u0430\u0434\u043e\u0447\u043d\u0443\u044e \u0438 \u043f\u0440\u043e\u0447\u0443\u044e \u0441\u043b\u0443\u0436\u0435\u0431\u043d\u0443\u044e \u0438\u043d\u0444\u043e\u043c\u0430\u0446\u0438\u044e \u0438 \u0432 \u043a\u043e\u043d\u0435\u0447\u043d\u044b\u0439 \u0444\u0430\u0439\u043b \u043d\u0435 \u043f\u043e\u043f\u0430\u0434\u0443\u0442.</p> <p>\u041a\u0430\u043a \u0432\u0438\u0434\u043d\u043e, \u0441\u0435\u043a\u0446\u0438\u044f <code>.text</code> \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u043c\u0430\u0448\u0438\u043d\u043d\u044b\u0439 \u043a\u043e\u0434 \u043d\u0430\u0448\u0435\u0439 \u0444\u0443\u043d\u043a\u0446\u0438\u0438. \u041a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440 \u0431\u0435\u0437 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438 \u043a\u043e\u043c\u043f\u0438\u043b\u0438\u0440\u0443\u0435\u0442 \u0432\u0435\u0441\u044c\u043c\u0430 \u043c\u043d\u043e\u0433\u043e\u0441\u043b\u043e\u0432\u043d\u044b\u0439 \u043a\u043e\u0434 \u0438 \u0440\u0430\u0437\u0431\u0438\u0440\u0430\u0442\u044c\u0441\u044f \u0432 \u043d\u0451\u043c \u043c\u044b \u043d\u0435 \u0431\u0443\u0434\u0435\u043c, \u0445\u043e\u0442\u044f \u0432 \u0446\u0435\u043b\u043e\u043c \u0442\u0430\u043c \u043d\u0435\u0442 \u043d\u0438\u0447\u0435\u0433\u043e \u0441\u043b\u043e\u0436\u043d\u043e\u0433\u043e.</p> <p>\u0421\u0435\u043a\u0446\u0438\u044f <code>.data</code> \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0435 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435. \u0412 \u043d\u0430\u0448\u0435\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u044d\u0442\u043e \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f loop_value_1.</p> <p>\u0421\u0435\u043a\u0446\u0438\u044f <code>.bss</code> \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u043d\u0435\u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0435 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435. \u0412 \u043d\u0430\u0448\u0435\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u044d\u0442\u043e \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f loop_value_2.</p> <p>\u0421\u0435\u043a\u0446\u0438\u044f <code>.rodata</code> \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u043a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u044b. \u0412 \u043d\u0430\u0448\u0435\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u044d\u0442\u043e \u043a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u044b loop_start \u0438 loop_increment.</p> <p>\u0422\u0435\u043f\u0435\u0440\u044c \u0434\u0430\u0432\u0430\u0439\u0442\u0435 \u043f\u043e\u0434\u0443\u043c\u0430\u0435\u043c, \u043a\u0430\u043a \u044d\u0442\u0438 \u0441\u0435\u043a\u0446\u0438\u0438 \u0434\u043e\u043b\u0436\u043d\u044b \u0440\u0430\u0441\u043f\u043e\u043b\u0430\u0433\u0430\u0442\u044c\u0441\u044f \u0432 \u043f\u0430\u043c\u044f\u0442\u0438. \u0421\u0435\u043a\u0446\u0438\u044f <code>.text</code> \u043f\u043e \u0441\u043c\u044b\u0441\u043b\u0443 \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u0430 \u0441\u0435\u043a\u0446\u0438\u0438 <code>code</code> \u0438\u0437 \u0432\u0442\u043e\u0440\u043e\u0439 \u0447\u0430\u0441\u0442\u0438. \u0415\u0451 \u043c\u044b \u043f\u0440\u043e\u0441\u0442\u043e \u0437\u0430\u043f\u0438\u0448\u0435\u043c \u043d\u0430 \u0444\u043b\u0435\u0448-\u043f\u0430\u043c\u044f\u0442\u044c \u043f\u043e\u0441\u043b\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b \u0432\u0435\u043a\u0442\u043e\u0440\u043e\u0432. \u0421\u0435\u043a\u0446\u0438\u044f <code>.rodata</code> \u043f\u043e \u0441\u0443\u0442\u0438 \u043d\u0438\u0447\u0435\u043c \u043d\u0435 \u043e\u0442\u043b\u0438\u0447\u0430\u0435\u0442\u0441\u044f, \u0435\u0451 \u0442\u043e\u0436\u0435 \u0437\u0430\u043f\u0438\u0448\u0435\u043c \u043d\u0430 \u0444\u043b\u0435\u0448-\u043f\u0430\u043c\u044f\u0442\u044c. \u0421\u0435\u043a\u0446\u0438\u044f <code>.bss</code> \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435. \u0414\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u043c\u0438 \u043d\u0443\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c SRAM, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0441\u0435\u043a\u0446\u0438\u044f <code>.bss</code> \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0430 \u0438\u043c\u0435\u043d\u043d\u043e \u0442\u0430\u043c. \u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0435\u0451 \u043d\u0435 \u043d\u0430\u0434\u043e, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u043d\u0438\u043a\u0430\u043a\u0438\u0445 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439 \u043d\u0435 \u043f\u043e\u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f.</p> <p>\u0410 \u0432\u043e\u0442 \u0441 \u0441\u0435\u043a\u0446\u0438\u0435\u0439 <code>.data</code> \u0432\u0441\u0451 \u0441\u043e\u0432\u0441\u0435\u043c \u043d\u0435\u043f\u0440\u043e\u0441\u0442\u043e. \u0421 \u043e\u0434\u043d\u043e\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u044b \u044d\u0442\u0430 \u0441\u0435\u043a\u0446\u0438\u044f \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0435\u0451 \u043d\u0443\u0436\u043d\u043e \u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0438\u0442\u044c \u0432 SRAM. \u0421 \u0434\u0440\u0443\u0433\u043e\u0439 \u0441\u0442\u043e\u0440\u043e\u043d\u044b \u044d\u0442\u0438 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u043f\u0440\u0438 \u0441\u0442\u0430\u0440\u0442\u0435 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u044b\u043c\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f\u043c\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u044b \u0443\u043a\u0430\u0437\u0430\u043b\u0438 \u0432 \u0442\u0435\u043a\u0441\u0442\u0435 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u044b. \u041d\u043e \u043a\u043e\u0433\u0434\u0430 \u043d\u0430\u0448\u0430 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442\u0441\u044f, \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 SRAM \u043d\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043e, \u0430 \u044d\u0442\u0438 \u043d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043c\u043e\u0436\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0432\u043e \u0444\u043b\u0435\u0448-\u043f\u0430\u043c\u044f\u0442\u0438.</p> <p>\u0420\u0435\u0448\u0435\u043d\u0438\u0435 \u0442\u0443\u0442 \u0442\u0430\u043a\u043e\u0435:</p> <ol> <li>\u0421\u0435\u043a\u0446\u0438\u044e <code>.data</code> \u043d\u0443\u0436\u043d\u043e \u0440\u0430\u0437\u043c\u0435\u0441\u0442\u0438\u0442\u044c \u0432\u043e \u0444\u043b\u0435\u0448-\u043f\u0430\u043c\u044f\u0442\u0438, \u0447\u0442\u043e\u0431\u044b \u0442\u0430\u043c \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0441\u044c    \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f.</li> <li>\u0422\u0430\u043a\u0436\u0435 \u0441\u0435\u043a\u0446\u0438\u044e <code>.data</code> \u043d\u0443\u0436\u043d\u043e \u0440\u0430\u0437\u043c\u0435\u0441\u0442\u0438\u0442\u044c \u0432 SRAM \u0438 \u0432\u0441\u0435 \u0430\u0434\u0440\u0435\u0441\u0430 \u0432 \u043a\u043e\u0434\u0435 \u0434\u043e\u043b\u0436\u043d\u044b    \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0438\u043c\u0435\u043d\u043d\u043e \u0432 SRAM.</li> <li>\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432 \u0441\u0430\u043c\u043e\u043c \u043d\u0430\u0447\u0430\u043b\u0435 \u0440\u0430\u0431\u043e\u0442\u044b \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u044b, \u0435\u0449\u0451 \u043f\u0435\u0440\u0435\u0434 \u0432\u044b\u0437\u043e\u0432\u043e\u043c \u043d\u0430\u0448\u0435\u0439 \u0444\u0443\u043d\u043a\u0446\u0438\u0438    <code>start</code> \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0435\u043a\u0446\u0438\u044e <code>.data</code> \u0438\u0437 \u0444\u043b\u0435\u0448-\u043f\u0430\u043c\u044f\u0442\u0438 \u0432 SRAM.</li> </ol> <p>\u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u043c\u044b \u043d\u0430\u043f\u0438\u0448\u0435\u043c \u043a\u043e\u0434 \u043d\u0430 \u044f\u0437\u044b\u043a\u0435 \u0430\u0441\u0441\u0435\u043c\u0431\u043b\u0435\u0440\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u0437\u0432\u0430\u043d \u0432 \u0441\u0430\u043c\u043e\u043c \u043d\u0430\u0447\u0430\u043b\u0435, \u0441\u043a\u043e\u043f\u0438\u0440\u0443\u0435\u0442 \u0441\u0435\u043a\u0446\u0438\u044e <code>.data</code> \u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u0441\u0442 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043d\u0430\u0448\u0435\u0439 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u043d\u0430 C.</p> <p>\u0412\u043e\u0442 \u043d\u0430\u0448 \u043b\u0438\u043d\u043a\u0435\u0440 \u0441\u043a\u0440\u0438\u043f\u0442:</p> <p><code>linker.ld</code>:</p> <pre><code>MEMORY\n{\n    Flash : ORIGIN = 0x08000000, LENGTH = 64K\n    SRAM : ORIGIN = 0x20000000, LENGTH = 20K\n}\n\nSECTIONS {\n    .isr_vector :\n    {\n        LONG(0x20000000 + 20K);\n        LONG(_startup | 1);\n        . = 0x130;\n    } &gt; Flash\n\n    .text :\n    {\n        . = ALIGN(4);\n        *(.text)\n        . = ALIGN(4);\n    } &gt; Flash\n\n    .rodata :\n    {\n        . = ALIGN(4);\n        *(.rodata)\n        . = ALIGN(4);\n    } &gt; Flash\n\n    .bss : {\n        . = ALIGN(4);\n        *(.bss)\n        . = ALIGN(4);\n    } &gt; SRAM\n\n    .data : {\n        . = ALIGN(4);\n        _flash_data_start = LOADADDR(.data);\n        _sram_data_start = .;\n        *(.data)\n        _sram_data_end = .;\n        . = ALIGN(4);\n    } &gt; SRAM AT&gt; Flash\n}\n</code></pre> <p>\u041e\u043d \u0443\u0436\u0435 \u0433\u043e\u0440\u0430\u0437\u0434\u043e \u0441\u043b\u043e\u0436\u043d\u0435\u0439 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0445. \u0412\u043e-\u043f\u0435\u0440\u0432\u044b\u0445 \u0432 \u043d\u0451\u043c \u043f\u043e\u044f\u0432\u0438\u043b\u0441\u044f \u0440\u0430\u0437\u0434\u0435\u043b <code>MEMORY</code>, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u043e\u043f\u0438\u0441\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u0440\u0435\u0433\u0438\u043e\u043d\u044b \u043f\u0430\u043c\u044f\u0442\u0438. \u0411\u0435\u0437 \u043d\u0438\u0445 \u043d\u0430\u043c \u043d\u0435 \u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0438\u0442\u044c <code>.data</code> \u0432 \u0434\u0432\u0443\u0445 \u043c\u0435\u0441\u0442\u0430\u0445. \u0412\u043e-\u0432\u0442\u043e\u0440\u044b\u0445 \u043c\u044b \u0434\u043e\u0431\u0430\u0432\u0438\u043b\u0438 \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u043e \u0432\u044b\u0445\u043e\u0434\u043d\u044b\u0445 \u0441\u0435\u043a\u0446\u0438\u0439 \u0441 \u0438\u043c\u0435\u043d\u0430\u043c\u0438, \u0438\u0434\u0435\u043d\u0442\u0438\u0447\u043d\u044b\u043c\u0438 \u0432\u0445\u043e\u0434\u043d\u044b\u043c. \u0412-\u0442\u0440\u0435\u0442\u044c\u0438\u0445 \u043c\u044b \u0434\u043e\u0431\u0430\u0432\u0438\u043b\u0438 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 <code>. = ALIGN(4);</code>, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0432\u044b\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u044e\u0442 \u043d\u0430\u0447\u0430\u043b\u043e \u0438 \u043a\u043e\u043d\u0435\u0446 \u043a\u0430\u0436\u0434\u043e\u0439 \u0432\u044b\u0445\u043e\u0434\u043d\u043e\u0439 \u0441\u0435\u043a\u0446\u0438\u0438 \u043f\u043e \u0433\u0440\u0430\u043d\u0438\u0446\u0435, \u043a\u0440\u0430\u0442\u043d\u043e\u0439 \u0447\u0435\u0442\u044b\u0440\u0451\u043c \u0431\u0430\u0439\u0442\u0430\u043c. \u0418 \u0432-\u0447\u0451\u0442\u0432\u0451\u0440\u0442\u044b\u0445 \u0443 \u043d\u0430\u0441 \u043f\u043e\u044f\u0432\u0438\u043b\u0430\u0441\u044c \u0434\u043e\u0432\u043e\u043b\u044c\u043d\u043e \u0441\u043b\u043e\u0436\u043d\u0430\u044f \u0441\u0435\u043a\u0446\u0438\u044f <code>.data</code>. \u0414\u0430\u0432\u0430\u0439\u0442\u0435 \u0440\u0430\u0437\u0431\u0435\u0440\u0451\u043c \u0435\u0451 \u043f\u043e \u0441\u0442\u0440\u043e\u0447\u043a\u0430\u043c.</p> <p>\u041d\u0430\u0447\u043d\u0451\u043c \u0441 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0439 \u0441\u0442\u0440\u043e\u0447\u043a\u0438: <code>&gt; SRAM AT&gt; Flash</code>. \u042d\u0442\u0430 \u0441\u0442\u0440\u043e\u0447\u043a\u0430 \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442, \u0447\u0442\u043e \u0441\u0435\u043a\u0446\u0438\u044f \u0440\u0430\u0441\u043f\u043e\u043b\u0430\u0433\u0430\u0435\u0442\u0441\u044f \u0432 \u0440\u0435\u0433\u0438\u043e\u043d\u0435 <code>SRAM</code>, \u043d\u043e \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442\u0441\u044f \u0432 \u0440\u0435\u0433\u0438\u043e\u043d <code>Flash</code>. \u0427\u0442\u043e \u0437\u043d\u0430\u0447\u0438\u0442 \"\u0440\u0430\u0441\u043f\u043e\u043b\u0430\u0433\u0430\u0435\u0442\u0441\u044f \u0432 \u0440\u0435\u0433\u0438\u043e\u043d\u0435 <code>SRAM</code>\"? \u042d\u0442\u043e \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442, \u0447\u0442\u043e \u0432\u0441\u0435 \u0443\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0441\u0441\u044b\u043b\u0430\u044e\u0442\u0441\u044f \u043d\u0430 \u044d\u0442\u0443 \u0441\u0435\u043a\u0446\u0438\u044e, \u043f\u043e\u0441\u043b\u0435 \u043a\u043e\u043c\u043f\u043e\u043d\u043e\u0432\u043a\u0438 \u0431\u0443\u0434\u0443\u0442 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0432 <code>SRAM</code>. \u0418\u043d\u044b\u043c\u0438 \u0441\u043b\u043e\u0432\u0430\u043c\u0438, \u043a\u043e\u0433\u0434\u0430 \u043d\u0430\u0448\u0430 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430 \u0431\u0443\u0434\u0435\u0442 \u043c\u0435\u043d\u044f\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 <code>loop_value_1</code>, \u043e\u043d\u0430 \u0431\u0443\u0434\u0435\u0442 \u044d\u0442\u043e \u0434\u0435\u043b\u0430\u0442\u044c \u0432 SRAM, \u0430 \u043d\u0435 \u043f\u044b\u0442\u0430\u0442\u044c\u0441\u044f \u043c\u0435\u043d\u044f\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0432\u043e \u0444\u043b\u0435\u0448-\u043f\u0430\u043c\u044f\u0442\u0438. \u0410 \u0447\u0442\u043e \u0437\u043d\u0430\u0447\u0438\u0442 \"\u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u0442\u0441\u044f \u0432 \u0440\u0435\u0433\u0438\u043e\u043d <code>Flash</code>\"? \u042d\u0442\u043e \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442, \u0447\u0442\u043e \u0432 \u0432\u044b\u0445\u043e\u0434\u043d\u043e\u043c \u0444\u0430\u0439\u043b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f, \u043a\u043e\u0442\u043e\u0440\u044b\u043c\u0438 \u0434\u043e\u043b\u0436\u043d\u044b \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435, \u0431\u0443\u0434\u0443\u0442 \u0437\u0430\u043f\u0438\u0441\u0430\u043d\u044b \u0432\u043e \u0444\u043b\u0435\u0448-\u043f\u0430\u043c\u044f\u0442\u044c.</p> <p>\u041d\u0430 \u0432\u044b\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u043d\u0438\u044f\u0445 \u043d\u0435 \u0431\u0443\u0434\u0435\u043c \u043e\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c\u0441\u044f, \u0442\u0443\u0442 \u043d\u0438\u0447\u0435\u0433\u043e \u0441\u043b\u043e\u0436\u043d\u043e\u0433\u043e. \u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u043d\u0430 \u0441\u0442\u0440\u043e\u0447\u043a\u0443 <code>_flash_data_start = LOADADDR(.data)</code>. \u042d\u0442\u0430 \u0441\u0442\u0440\u043e\u0447\u043a\u0430 \u043e\u0431\u044a\u044f\u0432\u043b\u044f\u0435\u0442 \u0441\u0438\u043c\u0432\u043e\u043b <code>_flash_data_start</code> \u0438 \u043f\u0440\u0438\u0441\u0432\u0430\u0438\u0432\u0430\u0435\u0442 \u0435\u043c\u0443 \u0430\u0434\u0440\u0435\u0441 \u043d\u0430\u0447\u0430\u043b\u0430 \u0441\u0435\u043a\u0446\u0438\u0438 <code>.data</code> \u0432\u043e \u0444\u043b\u0435\u0448-\u043f\u0430\u043c\u044f\u0442\u0438. \u0414\u0430\u043b\u0435\u0435 \u0438\u0434\u0451\u0442 \u0441\u0442\u0440\u043e\u0447\u043a\u0430 <code>_sram_data_start = .</code>. \u041e\u043d\u0430 \u043e\u0431\u044a\u044f\u0432\u043b\u044f\u0435\u0442 \u0441\u0438\u043c\u0432\u043e\u043b <code>_sram_data_start</code> \u0438 \u043f\u0440\u0438\u0441\u0432\u0430\u0438\u0432\u0430\u0435\u0442 \u0435\u043c\u0443 \u0430\u0434\u0440\u0435\u0441 \u043d\u0430\u0447\u0430\u043b\u0430 \u0441\u0435\u043a\u0446\u0438\u0438 <code>.data</code> \u0432 SRAM. \u041f\u043e\u0442\u043e\u043c \u0438\u0434\u0451\u0442 <code>*(.data)</code>, \u0441 \u044d\u0442\u0438\u043c \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441\u043e\u043c \u043c\u044b \u0443\u0436\u0435 \u0437\u043d\u0430\u043a\u043e\u043c\u044b, \u0432\u0441\u0435 \u0441\u0435\u043a\u0446\u0438\u0438 \u0441 \u0438\u043c\u0435\u043d\u0435\u043c <code>.data</code> \u0438\u0437 \u0432\u0441\u0435\u0445 \u0432\u0445\u043e\u0434\u043d\u044b\u0445 \u0444\u0430\u0439\u043b\u043e\u0432 (\u0432 \u043d\u0430\u0448\u0435\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u044d\u0442\u043e \u0442\u043e\u043b\u044c\u043a\u043e <code>loopc.o</code>) \u0431\u0443\u0434\u0443\u0442 \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u044b \u0432 \u0432\u044b\u0445\u043e\u0434\u043d\u0443\u044e \u0441\u0435\u043a\u0446\u0438\u044e <code>.data</code>. \u0418 \u043d\u0430\u043a\u043e\u043d\u0435\u0446 \u0438\u0434\u0451\u0442 \u0441\u0442\u0440\u043e\u0447\u043a\u0430 <code>_sram_data_end = .</code>. \u041e\u043d\u0430 \u043e\u0431\u044a\u044f\u0432\u043b\u044f\u0435\u0442 \u0441\u0438\u043c\u0432\u043e\u043b <code>_sram_data_end</code> \u0438 \u043f\u0440\u0438\u0441\u0432\u0430\u0438\u0432\u0430\u0435\u0442 \u0435\u043c\u0443 \u0430\u0434\u0440\u0435\u0441 \u043a\u043e\u043d\u0446\u0430 \u0441\u0435\u043a\u0446\u0438\u0438 <code>.data</code> \u0432 SRAM.</p> <p>\u0412 \u0434\u0430\u043b\u044c\u043d\u0435\u0439\u0448\u0435\u043c \u043c\u044b \u0441\u043c\u043e\u0436\u0435\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 <code>_flash_data_start</code>, <code>_sram_data_start</code> \u0438 <code>_sram_data_end</code> \u0432 \u043a\u043e\u0434\u0435, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u0443\u0434\u0435\u0442 \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u0438\u0437 \u0441\u0435\u043a\u0446\u0438\u0438 <code>.data</code> \u0438\u0437 \u0444\u043b\u0435\u0448-\u043f\u0430\u043c\u044f\u0442\u0438 \u0432 SRAM.</p> <p>\u0412\u0430\u0436\u043d\u043e \u043f\u043e\u043d\u0438\u043c\u0430\u0442\u044c, \u0447\u0442\u043e \u0432\u0441\u0435 \u044d\u0442\u0438 \u0441\u0438\u043c\u0432\u043e\u043b\u044b \u0432\u044b\u0447\u0438\u0441\u043b\u044f\u044e\u0442\u0441\u044f \u043b\u0438\u043d\u043a\u0435\u0440\u043e\u043c \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u043a\u043e\u043c\u043f\u043e\u043d\u043e\u0432\u043a\u0438 \u043a\u043e\u043d\u0435\u0447\u043d\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430 \u0438 \u0432 \u043d\u0451\u043c \u0431\u0443\u0434\u0443\u0442 \u043f\u0440\u0438\u0441\u0443\u0442\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u0432 \u0432\u0438\u0434\u0435 \u0433\u043e\u0442\u043e\u0432\u044b\u0445 \u043a\u043e\u043d\u0441\u0442\u0430\u043d\u0442. \u041a\u0430\u043a, \u043d\u0430\u0432\u0435\u0440\u043d\u043e\u0435, \u0443\u0436\u0435 \u0432\u0438\u0434\u043d\u043e, \u043b\u0438\u043d\u043a\u0435\u0440 \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c \u0432\u0435\u0441\u044c\u043c\u0430 \u043d\u0435\u0442\u0440\u0438\u0432\u0438\u0430\u043b\u044c\u043d\u0443\u044e \u0440\u043e\u043b\u044c. \u0418 \u0435\u0441\u043b\u0438 \u0432 \u043f\u0440\u043e\u0448\u043b\u044b\u0445 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430\u0445 \u043f\u0440\u0438 \u0431\u043e\u043b\u044c\u0448\u043e\u043c \u0436\u0435\u043b\u0430\u043d\u0438\u0438 \u0431\u0435\u0437 \u043d\u0435\u0433\u043e \u043c\u043e\u0436\u043d\u043e \u0431\u044b\u043b\u043e \u0431\u044b \u0438 \u043e\u0431\u043e\u0439\u0442\u0438\u0441\u044c, \u0441\u043e\u0431\u0440\u0430\u0432 \u043a\u043e\u043d\u0435\u0447\u043d\u044b\u0439 \u0444\u0430\u0439\u043b \u043f\u043e \u043a\u0443\u0441\u043e\u0447\u043a\u0430\u043c, \u0442\u043e \u0432 \u044d\u0442\u043e\u0439 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0435 \u0431\u0435\u0437 \u043b\u0438\u043d\u043a\u0435\u0440\u0430 \u043d\u0438\u043a\u0443\u0434\u0430.</p> <p>\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u044b \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442\u0441\u044f \u0441 \u043a\u043e\u0434\u0430, \u0430\u0434\u0440\u0435\u0441 \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u043e\u0431\u043e\u0437\u043d\u0430\u0447\u0435\u043d \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u043c <code>_reset_exception_handler</code>, \u0430 \u043d\u0430\u0448 \u043a\u043e\u0434 \u043d\u0430 C \u043e\u0431\u044a\u044f\u0432\u043b\u044f\u0435\u0442 \u0444\u0443\u043d\u043a\u0446\u0438\u044e <code>start</code>. \u0417\u0430\u0434\u0430\u0447\u0430 \u043a\u043e\u0434\u0430 <code>_reset_exception_handler</code> \u0441\u043e\u0441\u0442\u043e\u0438\u0442 \u0432 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0441\u0435\u043a\u0446\u0438\u0438 <code>.data</code> \u0438 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0443 \u043a <code>start</code>. \u0421\u0442\u043e\u0438\u0442 \u043e\u0442\u043c\u0435\u0442\u0438\u0442\u044c, \u0447\u0442\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u0441 \u043f\u043e\u0434\u0447\u0451\u0440\u043a\u0438\u0432\u0430\u043d\u0438\u0435\u043c \u0432 \u043a\u043e\u0434\u0435 \u043d\u0430 C \u043d\u0435 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f, \u0432\u0441\u0435 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u0442\u0430\u043a\u043e\u0433\u043e \u0440\u043e\u0434\u0430 \u0441\u0447\u0438\u0442\u0430\u044e\u0442\u0441\u044f \u0437\u0430\u0440\u0435\u0437\u0435\u0440\u0432\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u043c\u0438 \u0434\u043b\u044f \u0434\u0435\u0442\u0430\u043b\u0435\u0439 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438. \u0418\u043c\u0435\u043d\u043d\u043e \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u043c\u044b \u0438 \u043e\u0431\u044a\u044f\u0432\u043b\u044f\u0435\u043c \u0442\u0430\u043a\u0438\u0435 \u0441\u0438\u043c\u0432\u043e\u043b\u044b, \u0432 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u043c \u043a\u043e\u0434\u0435 \u043d\u0430 C \u043e\u043d\u0438 \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u044b \u043f\u043e\u044f\u0432\u0438\u0442\u044c\u0441\u044f. \u0415\u0441\u043b\u0438 \u0431\u044b \u043c\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043b\u0438 \u0438\u043c\u044f <code>reset_exception_handler</code> \u0438\u043b\u0438 <code>flash_data_start</code>, \u0442\u043e \u0432 \u043a\u043e\u0434\u0435 \u043d\u0430 C \u043d\u0438\u0447\u0435\u0433\u043e \u0431\u044b \u043d\u0435 \u043c\u0435\u0448\u0430\u043b\u043e \u043e\u0431\u044a\u044f\u0432\u0438\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e \u0441 \u0442\u0430\u043a\u0438\u043c \u0436\u0435 \u0438\u043c\u0435\u043d\u0435\u043c, \u0438 \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u0430\u0441\u044c \u0431\u044b \u043d\u0435\u043f\u0440\u0438\u044f\u0442\u043d\u0430\u044f \u043a\u043e\u043b\u043b\u0438\u0437\u0438\u044f. \u041a\u043e\u043d\u0435\u0447\u043d\u043e \u0432 \u043d\u0430\u0448\u0435\u043c \u043f\u0440\u043e\u0441\u0442\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u044d\u0442\u043e \u043d\u0435 \u0441\u043b\u0443\u0447\u0438\u0442\u0441\u044f, \u043d\u043e \u0432 \u043e\u0431\u0449\u0435\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u0441\u0442\u043e\u0438\u0442 \u0438\u043c\u0435\u0442\u044c \u044d\u0442\u043e \u0432 \u0432\u0438\u0434\u0443. \u041d\u0430\u0448 \u043b\u0438\u043d\u043a\u0435\u0440 \u0438 \u043d\u0430\u0448 \u0431\u0443\u0434\u0443\u0449\u0438\u0439 \u043a\u043e\u0434 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0441\u0435\u043a\u0446\u0438\u0438 <code>.data</code> \u043a\u0430\u043a \u0440\u0430\u0437 \u043e\u0442\u043d\u043e\u0441\u044f\u0442\u0441\u044f \u043a \u0442\u0430\u043a\u0438\u043c \u0434\u0435\u0442\u0430\u043b\u044f\u043c \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438.</p> <p>\u0418\u0442\u0430\u043a \u043f\u043e\u0440\u0430 \u043d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043a\u043e\u0434 <code>_reset_exception_handler</code>. \u041c\u044b \u044d\u0442\u043e \u0441\u0434\u0435\u043b\u0430\u0435\u043c \u043d\u0430 \u044f\u0437\u044b\u043a\u0435 \u0430\u0441\u0441\u0435\u043c\u0431\u043b\u0435\u0440\u0430, \u0447\u0442\u043e\u0431\u044b \u043a \u043c\u043e\u043c\u0435\u043d\u0442\u0443 \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u043a\u043e\u0434\u0430 \u043d\u0430 C \u0432\u0441\u0451 \u0443\u0436\u0435 \u0431\u044b\u043b\u043e \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u0438 \u0433\u043e\u0442\u043e\u0432\u043e \u043a \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044e.</p> <p><code>reset_exception_handler.s</code>:</p> <pre><code>.cpu cortex-m3\n.syntax unified\n.thumb\n\n.global _reset_exception_handler\n\n.text\n\n_reset_exception_handler:\nldr r0, =_flash_data_start\nldr r1, =_sram_data_start\nldr r2, =_sram_data_end\n\ncopy_loop:\ncmp r1, r2\nbge end_copy\nldr r3, [r0], #4\nstr r3, [r1], #4\nb copy_loop\n\nend_copy:\nb start\n</code></pre> <p>\u041f\u0441\u0435\u0432\u0434\u043e\u043a\u043e\u0434, \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0439 \u044d\u0442\u043e\u043c\u0443 \u043a\u043e\u0434\u0443, \u0432\u044b\u0433\u043b\u044f\u0434\u0438\u0442 \u0442\u0430\u043a:</p> <pre><code>_reset_exception_handler:\nr0 := _flash_data_start\nr1 := _sram_data_start\nr2 := _sram_data_end\n\ncopy_loop:\nif r1 &gt;= r2 then goto end_copy\nr3 := [r0]\nr0 := r0 + 4\n[r1] := r3\nr1 := r1 + 4\ngoto copy_loop\n\nend_copy:\ngoto start\n</code></pre> <p>\u0420\u0430\u0431\u043e\u0442\u0430 \u043f\u043e \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044e \u043d\u0430 \u044d\u0442\u043e\u043c \u0437\u0430\u043a\u043e\u043d\u0447\u0435\u043d\u0430. <code>Makefile</code> \u043f\u0440\u0438\u0432\u043e\u0434\u0438\u0442\u044c \u043d\u0435 \u0431\u0443\u0434\u0435\u043c, \u0442\u0430\u043c \u0432\u0441\u0451 \u0442\u0440\u0438\u0432\u0438\u0430\u043b\u044c\u043d\u043e. \u0421\u043e\u0431\u0435\u0440\u0451\u043c \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0443, \u043f\u0440\u043e\u0448\u044c\u0451\u043c \u0435\u0451 \u0432 \u043c\u0438\u043a\u0440\u043e\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440 \u0438 \u043f\u0440\u0438\u0441\u0442\u0443\u043f\u0438\u043c \u043a \u043e\u0442\u043b\u0430\u0434\u043a\u0435:</p> <pre><code>$ make flash\narm-none-eabi-gcc -mcpu=cortex-m3 -g -O0 -c -o loopc.o loopc.c\narm-none-eabi-ld -T linker.ld -o loopc.elf reset_exception_handler.o loopc.o\narm-none-eabi-objcopy -O binary loopc.elf loopc.bin\nst-flash write loopc.bin 0x08000000\nst-flash 1.7.0\n...\n2023-09-11T23:48:28 INFO common.c: Flash written and verified! jolly good!\n\n$ st-util --connect-under-reset\nst-util\n2023-09-11T23:50:13 WARN common.c: NRST is not connected\n2023-09-11T23:50:13 INFO common.c: F1xx Medium-density: 20 KiB SRAM, 64 KiB flash in at least 1 KiB pages.\n2023-09-11T23:50:13 INFO gdb-server.c: Listening at *:4242...\n</code></pre> <pre><code>$ arm-none-eabi-gdb\nGNU gdb (Arm GNU Toolchain 12.3.Rel1 (Build arm-12.35)) 13.2.90.20230627-git\n...\n(gdb) target remote 127.0.0.1:4242\nRemote debugging using 127.0.0.1:4242\nwarning: No executable has been specified and target does not support\ndetermining executable automatically.  Try using the \"file\" command.\n0x08000130 in ?? ()\n</code></pre> <p>\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430 $pc \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0440\u0430\u0432\u043d\u043e <code>0x08000130</code>.</p> <p>\u0422\u0435\u043f\u0435\u0440\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u043c \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0443, \u0447\u0442\u043e\u0431\u044b gdb \u043c\u043e\u0433 \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u0442\u044c \u0441\u0438\u043c\u0432\u043e\u043b\u044b \u0438 \u043e\u0442\u043b\u0430\u0434\u043e\u0447\u043d\u0443\u044e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e:</p> <pre><code>(gdb) symbol-file loopc.elf\nReading symbols from loopc.elf...\n</code></pre> <p>\u0423 gdb \u0435\u0441\u0442\u044c \u043e\u0447\u0435\u043d\u044c \u043f\u043e\u043b\u0435\u0437\u043d\u0430\u044f \u043a\u043e\u043c\u0430\u043d\u0434\u0430 <code>display</code>. \u041c\u044b \u0435\u0439 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u043c \u0444\u043e\u0440\u043c\u0430\u0442 \u0438 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435, \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u043e \u043a\u043e\u043c\u0430\u043d\u0434\u0435 <code>print</code>, \u0430 \u043e\u043d\u0430 \u0440\u0430\u0441\u043f\u0435\u0447\u0430\u0442\u044b\u0432\u0430\u0435\u0442 \u044d\u0442\u043e \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u043f\u0440\u0438 \u043a\u0430\u0436\u0434\u043e\u043c \u0448\u0430\u0433\u0435 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u044b. \u0412\u043e\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u0441\u044f \u044d\u0442\u043e\u0439 \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439 \u0434\u043b\u044f \u0442\u043e\u0433\u043e, \u0447\u0442\u043e\u0431\u044b \u0434\u0438\u0437\u0430\u0441\u0441\u0435\u043c\u0431\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u044e\u0449\u0438\u0439\u0441\u044f \u043a\u043e\u0434:</p> <pre><code>(gdb) display/6i $pc - 2\n1: x/6i $pc - 2\n   0x800012e:   movs    r0, r0\n=&gt; 0x8000130 &lt;_reset_exception_handler&gt;:    ldr r0, [pc, #20]   @ (0x8000148 &lt;end_copy+4&gt;)\n   0x8000132 &lt;_reset_exception_handler+2&gt;:  ldr r1, [pc, #24]   @ (0x800014c &lt;end_copy+8&gt;)\n   0x8000134 &lt;_reset_exception_handler+4&gt;:  ldr r2, [pc, #24]   @ (0x8000150 &lt;end_copy+12&gt;)\n   0x8000136 &lt;copy_loop&gt;:   cmp r1, r2\n   0x8000138 &lt;copy_loop+2&gt;: bge.n   0x8000144 &lt;end_copy&gt;\n</code></pre> <p>\u041c\u043e\u0436\u043d\u043e \u0440\u0430\u0441\u043f\u043e\u0437\u043d\u0430\u0442\u044c \u0432 \u044d\u0442\u043e\u043c \u043a\u043e\u0434\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u0444\u0430\u0439\u043b\u0430 startup.s. \u0422\u0430\u043a\u0436\u0435 \u043c\u043e\u0436\u043d\u043e \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u044c \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435, \u0447\u0442\u043e \u0440\u044f\u0434\u043e\u043c \u0441 \u0430\u0434\u0440\u0435\u0441\u0430\u043c\u0438 \u043f\u043e\u044f\u0432\u0438\u043b\u0438\u0441\u044c \u0438\u043c\u0435\u043d\u0430 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0442 \u044d\u0442\u0438\u043c \u0430\u0434\u0440\u0435\u0441\u0430\u043c.</p> <p>\u0421\u0434\u0435\u043b\u0430\u0435\u043c \u0448\u0430\u0433:</p> <pre><code>(gdb) stepi\n0x08000132 in _reset_exception_handler ()\n1: x/6i $pc - 2\n   0x8000130 &lt;_reset_exception_handler&gt;:    ldr r0, [pc, #20]   @ (0x8000148 &lt;end_copy+4&gt;)\n=&gt; 0x8000132 &lt;_reset_exception_handler+2&gt;:  ldr r1, [pc, #24]   @ (0x800014c &lt;end_copy+8&gt;)\n   0x8000134 &lt;_reset_exception_handler+4&gt;:  ldr r2, [pc, #24]   @ (0x8000150 &lt;end_copy+12&gt;)\n   0x8000136 &lt;copy_loop&gt;:   cmp r1, r2\n   0x8000138 &lt;copy_loop+2&gt;: bge.n   0x8000144 &lt;end_copy&gt;\n   0x800013a &lt;copy_loop+4&gt;: ldr.w   r3, [r0], #4\n</code></pre> <p>\u041a\u0430\u043a \u0438 \u043e\u0436\u0438\u0434\u0430\u043b\u043e\u0441\u044c, \u043a\u043e\u043c\u0430\u043d\u0434\u0430 <code>display</code> \u0440\u0430\u0441\u043f\u0435\u0447\u0430\u0442\u0430\u043b\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0451\u043d\u043d\u044b\u0439 \u043a\u043e\u0434. \u0422\u0435\u043f\u0435\u0440\u044c \u043d\u0430\u0436\u043c\u0451\u043c <code>&lt;Enter&gt;</code> \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0432\u0432\u043e\u0434\u044f:</p> <pre><code>(gdb)\n0x08000134 in _reset_exception_handler ()\n1: x/6i $pc - 2\n   0x8000132 &lt;_reset_exception_handler+2&gt;:  ldr r1, [pc, #24]   @ (0x800014c &lt;end_copy+8&gt;)\n=&gt; 0x8000134 &lt;_reset_exception_handler+4&gt;:  ldr r2, [pc, #24]   @ (0x8000150 &lt;end_copy+12&gt;)\n   0x8000136 &lt;copy_loop&gt;:   cmp r1, r2\n   0x8000138 &lt;copy_loop+2&gt;: bge.n   0x8000144 &lt;end_copy&gt;\n   0x800013a &lt;copy_loop+4&gt;: ldr.w   r3, [r0], #4\n</code></pre> <p>\u042d\u0442\u043e \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u043b\u043e \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0443\u044e \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044e \u0438 \u0441\u0434\u0435\u043b\u0430\u043b\u043e \u0435\u0449\u0451 \u043e\u0434\u0438\u043d \u0448\u0430\u0433 \u0432\u043f\u0435\u0440\u0451\u0434. \u041c\u043e\u0436\u043d\u043e \u0443\u0432\u0438\u0434\u0435\u0442\u044c, \u0447\u0442\u043e \u043f\u043e\u0441\u043b\u0435 \u0442\u043e\u0433\u043e, \u043a\u0430\u043a startup \u0441\u043a\u043e\u043f\u0438\u0440\u0443\u0435\u0442 \u043d\u0430\u0448\u0443 \u0441\u0435\u043a\u0446\u0438\u044e <code>.data</code>, \u043e\u043d \u043f\u0435\u0440\u0435\u0439\u0434\u0451\u0442 \u043d\u0430 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044e \u043f\u043e \u0430\u0434\u0440\u0435\u0441\u0443 <code>0x0800_0144</code> \u0441 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 end_copy. \u041d\u0435 \u0431\u0443\u0434\u0435\u043c \u0448\u0430\u0433\u0430\u0442\u044c \u0434\u0430\u043b\u044c\u0448\u0435, \u0430 \u043f\u043e\u0441\u0442\u0430\u0432\u0438\u043c \u043e\u0442\u043b\u0430\u0434\u043e\u0447\u043d\u0443\u044e \u0442\u043e\u0447\u043a\u0443 (breakpoint, \u0431\u0440\u0435\u0439\u043a\u043f\u043e\u0438\u043d\u0442) \u043d\u0430 \u044d\u0442\u043e\u0442 \u0430\u0434\u0440\u0435\u0441 \u0438 \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u043c \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u044b \u0434\u043e \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438:</p> <pre><code>(gdb) break end_copy\nBreakpoint 1 at 0x8000144\nNote: automatically using hardware breakpoints for read-only addresses.\n(gdb) continue\nContinuing.\n\nBreakpoint 1, 0x08000144 in end_copy ()\n1: x/6i $pc - 2\n   0x8000142 &lt;copy_loop+12&gt;:    b.n 0x8000136 &lt;copy_loop&gt;\n=&gt; 0x8000144 &lt;end_copy&gt;:    b.w 0x8000154 &lt;start&gt;\n   0x8000148 &lt;end_copy+4&gt;:  lsls    r0, r0, #6\n   0x800014a &lt;end_copy+6&gt;:  lsrs    r0, r0, #32\n   0x800014c &lt;end_copy+8&gt;:  movs    r4, r0\n   0x800014e &lt;end_copy+10&gt;: movs    r0, #0\n</code></pre> <p>\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0439 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0435\u0439 \u043c\u044b \u043f\u0435\u0440\u0435\u0439\u0434\u0451\u043c \u0443\u0436\u0435 \u0432 \u0441\u043a\u043e\u043c\u043f\u0438\u043b\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u043a\u043e\u0434 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 <code>start</code>. \u0410 \u043f\u0435\u0440\u0435\u0434 \u044d\u0442\u0438\u043c \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u043c, \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u043b\u0438 \u0441\u0435\u043a\u0446\u0438\u044f <code>.data</code> \u0432 SRAM \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u0430.</p> <pre><code>(gdb) print/z &amp;_flash_data_start\n$1 = 0x08000180\n(gdb) print/z &amp;_sram_data_start\n$2 = 0x20000004\n(gdb) print/z &amp;_sram_data_end\n$3 = 0x20000008\n(gdb) x/z 0x08000180\n0x8000180:  0x12345678\n(gdb) x/z 0x20000004\n0x20000004 &lt;loop_value_1&gt;:  0x12345678\n</code></pre> <p>\u0412\u0438\u0434\u043d\u043e, \u0447\u0442\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 <code>0x1234_5678</code> \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0431\u044b\u043b\u043e \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u0441 \u0444\u043b\u0435\u0448-\u043f\u0430\u043c\u044f\u0442\u0438 \u043f\u043e \u0430\u0434\u0440\u0435\u0441\u0443 <code>0x0800_0180</code> \u0432 SRAM \u043f\u043e \u0430\u0434\u0440\u0435\u0441\u0443 <code>0x2000_0004</code>. \u0422\u0430\u043a\u0436\u0435 gdb \u0437\u043d\u0430\u0435\u0442 \u043f\u0440\u043e \u0441\u0438\u043c\u0432\u043e\u043b <code>loop_value_1</code>, \u0442.\u0435. \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e \u0438\u0437 \u043a\u043e\u0434\u0430 \u043d\u0430 C.</p> <p>\u0422\u0435\u043f\u0435\u0440\u044c \u043f\u0435\u0440\u0435\u0439\u0434\u0451\u043c \u0432 \u0444\u0443\u043d\u043a\u0446\u0438\u044e start:</p> <pre><code>(gdb) stepi\nstart () at loopc.c:9\n9   {\n1: x/6i $pc - 2\n   0x8000152 &lt;end_copy+14&gt;: movs    r0, #0\n=&gt; 0x8000154 &lt;start&gt;:   push    {r7}\n   0x8000156 &lt;start+2&gt;: add r7, sp, #0\n   0x8000158 &lt;start+4&gt;: ldr r3, [pc, #20]   @ (0x8000170 &lt;start+28&gt;)\n   0x800015a &lt;start+6&gt;: ldr r3, [r3, #0]\n   0x800015c &lt;start+8&gt;: movs    r2, #3\n</code></pre> <p>\u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435, \u0447\u0442\u043e \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0447\u0435\u043d\u044c \u0432\u0430\u0436\u043d\u0430\u044f \u0432\u0435\u0449\u044c. gdb \u0440\u0430\u0441\u043f\u0435\u0447\u0430\u0442\u0430\u043b \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043d\u0430\u0448\u0435\u0439 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 <code>start</code>, \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u0430, \u0433\u0434\u0435 \u044d\u0442\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0430 <code>loopc.c</code> \u0438 \u043d\u043e\u043c\u0435\u0440 \u0441\u0442\u0440\u043e\u043a\u0438 <code>9</code>.</p> <p>\u041a\u043e\u043c\u0430\u043d\u0434\u043e\u0439 <code>list</code> \u043c\u043e\u0436\u043d\u043e \u0440\u0430\u0441\u043f\u0435\u0447\u0435\u0442\u0430\u0442\u044c \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0439 \u043a\u043e\u0434 \u0432 \u043e\u043a\u0440\u0435\u0441\u0442\u043d\u043e\u0441\u0442\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u043c\u043e\u0433\u043e \u043a\u043e\u0434\u0430:</p> <pre><code>(gdb) list\n4   static const uint32_t loop_increment = 3;\n5   static uint32_t loop_value_1 = loop_start;\n6   static uint32_t loop_value_2;\n7\n8   void start(void)\n9   {\n10      for (;;)\n11      {\n12          loop_value_2 = loop_value_1 + loop_increment;\n13          loop_value_1 = loop_value_2;\n</code></pre> <p>\u0422\u0435\u043f\u0435\u0440\u044c \u043c\u043e\u0436\u043d\u043e \u0443\u0431\u0440\u0430\u0442\u044c \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0434\u0438\u0437\u0430\u0441\u0441\u0435\u043c\u0431\u043b\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0433\u043e \u043a\u043e\u0434\u0430 \u0438 \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u0438\u0437 \u043a\u043e\u0434\u0430 \u043d\u0430 C:</p> <pre><code>(gdb) delete display 1\n(gdb) display loop_value_1\n2: loop_value_1 = 305419896\n(gdb) display loop_value_2\n3: loop_value_2 = 306559500\n</code></pre> <p>\u0414\u0430\u043b\u0435\u0435 \u0431\u0443\u0434\u0435\u043c \u0432\u043c\u0435\u0441\u0442\u043e \u043a\u043e\u043c\u0430\u043d\u0434\u044b <code>stepi</code> (step instruction) \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043a\u043e\u043c\u0430\u043d\u0434\u0443 <code>step</code>, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0448\u0430\u0433\u0430\u0435\u0442 \u043f\u043e \u0441\u0442\u0440\u043e\u043a\u0430\u043c C, \u0430 \u043d\u0435 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u043c \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f\u043c.</p> <pre><code>(gdb) step\n12          loop_value_2 = loop_value_1 + loop_increment;\n2: loop_value_1 = 305419896\n3: loop_value_2 = 306559500\n(gdb) step\n13          loop_value_1 = loop_value_2;\n2: loop_value_1 = 305419896\n3: loop_value_2 = 305419899\n(gdb) step\n12          loop_value_2 = loop_value_1 + loop_increment;\n2: loop_value_1 = 305419899\n3: loop_value_2 = 305419899\n</code></pre> <p>\u041d\u0430 \u044d\u0442\u043e\u043c \u0434\u0430\u043d\u043d\u0443\u044e \u0447\u0430\u0441\u0442\u044c \u043c\u043e\u0436\u043d\u043e \u0441\u0447\u0438\u0442\u0430\u0442\u044c \u0437\u0430\u0432\u0435\u0440\u0448\u0451\u043d\u043d\u043e\u0439. \u041c\u044b \u043d\u0430\u0443\u0447\u0438\u043b\u0438\u0441\u044c \u043a\u043e\u043c\u043f\u0438\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0438, \u0447\u0442\u043e \u043a\u0443\u0434\u0430 \u0431\u043e\u043b\u0435\u0435 \u0432\u0430\u0436\u043d\u043e, \u043a\u043e\u043c\u043f\u043e\u043d\u043e\u0432\u0430\u0442\u044c \u043a\u043e\u0434 \u043d\u0430 C, \u0430 \u0442\u0430\u043a\u0436\u0435 \u043e\u0442\u043b\u0430\u0436\u0438\u0432\u0430\u0442\u044c \u0435\u0433\u043e.</p>"},{"location":"5-blinkc/","title":"\u0427\u0430\u0441\u0442\u044c 5: \u041c\u0438\u0433\u0430\u0435\u043c \u043d\u0430 C","text":"<p>\u042d\u0442\u0430 \u0447\u0430\u0441\u0442\u044c \u0431\u0443\u0434\u0435\u0442 \u043a\u043e\u043c\u0431\u0438\u043d\u0430\u0446\u0438\u0435\u0439 \u0447\u0430\u0441\u0442\u0435\u0439 3 \u0438 4. \u041c\u044b \u043f\u0435\u0440\u0435\u043f\u0438\u0448\u0435\u043c \u043a\u043e\u0434 \u0438\u0437 \u0447\u0430\u0441\u0442\u0438 3 \u043d\u0430 C, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f \"\u0438\u043d\u0444\u0440\u0430\u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0443\" \u0434\u043b\u044f \u0441\u0431\u043e\u0440\u043a\u0438 \u0438\u0437 \u0447\u0430\u0441\u0442\u0438 4 \u0438 \u043f\u043e\u0437\u043d\u0430\u043a\u043e\u043c\u0438\u043c\u0441\u044f \u0441 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u043c\u0438 \u043d\u0435 \u0432\u0441\u0435\u0433\u0434\u0430 \u043e\u0447\u0435\u0432\u0438\u0434\u043d\u044b\u043c\u0438 \u043c\u043e\u043c\u0435\u043d\u0442\u0430\u043c\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0430\u0434\u043e \u043f\u043e\u043c\u043d\u0438\u0442\u044c \u043f\u0440\u0438 \u0440\u0430\u0431\u043e\u0442\u0435 \u0441 \u043c\u0438\u043a\u0440\u043e\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440\u043e\u043c \u0438\u0437 \u043a\u043e\u0434\u0430 \u043d\u0430 C.</p> <p>\u0421\u043a\u0440\u0438\u043f\u0442 \u043b\u0438\u043d\u043a\u0435\u0440\u0430 \u0438 \u0444\u0430\u0439\u043b <code>reset_exception_handler.s</code> \u043d\u0435 \u043f\u043e\u043c\u0435\u043d\u044f\u044e\u0442\u0441\u044f, \u043f\u0440\u0438\u0432\u0435\u0434\u0451\u043c \u043b\u0438\u0448\u044c \u043a\u043e\u0434 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u044b \u043d\u0430 C:</p> <p><code>blinkc.c</code>:</p> <pre><code>#include &lt;stdint.h&gt;\n\nstatic void enable_port_clock(void);\nstatic void configure_pin(void);\nstatic void toggle_pin(void);\n\nvoid start(void)\n{\n    enable_port_clock();\n    configure_pin();\n\n    // blink loop\n    for (;;)\n    {\n        // wait loop\n        for (uint32_t delay = 1000000; delay &gt; 0; delay--)\n        {\n        }\n\n        toggle_pin();\n    }\n}\n\nstatic void enable_port_clock(void)\n{\n    // enable I/O port C clock\n    uint32_t rcc_base_address = 0x40021000;\n    uint32_t rcc_apb2enr_address = rcc_base_address + 0x18;\n    uint32_t rcc_apb2enr_iopcen = 1 &lt;&lt; 4;\n\n    uint32_t *rcc_apb2enr_pointer = (uint32_t *)rcc_apb2enr_address;\n    uint32_t rcc_apb2enr_value = *rcc_apb2enr_pointer;\n    rcc_apb2enr_value |= rcc_apb2enr_iopcen;\n    *rcc_apb2enr_pointer = rcc_apb2enr_value;\n}\n\nstatic void configure_pin(void)\n{\n    // configure PC13 as open-drain output with 10 MHz speed\n    uint32_t gpioc_base_address = 0x40011000;\n    uint32_t gpioc_crh_address = gpioc_base_address + 0x04;\n    uint32_t gpiox_crh_mode13_0 = 1 &lt;&lt; 20;\n    uint32_t gpiox_crh_mode13_1 = 1 &lt;&lt; 21;\n    uint32_t gpiox_crh_cnf13_0 = 1 &lt;&lt; 22;\n    uint32_t gpiox_crh_cnf13_1 = 1 &lt;&lt; 23;\n\n    uint32_t *gpioc_crh_pointer = (uint32_t *)gpioc_crh_address;\n    uint32_t gpioc_crh_value = *gpioc_crh_pointer;\n    gpioc_crh_value &amp;= ~gpiox_crh_mode13_0;\n    gpioc_crh_value |= gpiox_crh_mode13_1;\n    gpioc_crh_value |= gpiox_crh_cnf13_0;\n    gpioc_crh_value &amp;= ~gpiox_crh_cnf13_1;\n    *gpioc_crh_pointer = gpioc_crh_value;\n}\n\nstatic void toggle_pin(void)\n{\n    // toggle PC13\n    uint32_t gpioc_base_address = 0x40011000;\n    uint32_t gpioc_odr_address = gpioc_base_address + 0x0c;\n    uint32_t gpiox_odr_odr13 = 1 &lt;&lt; 13;\n\n    uint32_t *gpioc_odr_pointer = (uint32_t *)gpioc_odr_address;\n    uint32_t gpioc_odr_value = *gpioc_odr_pointer;\n    gpioc_odr_value ^= gpiox_odr_odr13;\n    *gpioc_odr_pointer = gpioc_odr_value;\n}\n</code></pre> <p>\u041e\u0447\u0435\u043d\u044c \u0432\u0430\u0436\u043d\u044b\u0439 \u043d\u044e\u0430\u043d\u0441: \u043d\u0443\u0436\u043d\u043e \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u044c \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435, \u0447\u0442\u043e\u0431\u044b \u044d\u0442\u0430 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430 \u043a\u043e\u043c\u043f\u0438\u043b\u0438\u0440\u043e\u0432\u0430\u043b\u0430\u0441\u044c \u0431\u0435\u0437 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438, \u0441 \u0444\u043b\u0430\u0433\u043e\u043c <code>-O0</code>. \u0415\u0441\u043b\u0438 \u0432\u0441\u0451 \u0441\u0434\u0435\u043b\u0430\u043d\u043e \u0432\u0435\u0440\u043d\u043e, \u0442\u043e <code>make clean flash</code> \u043f\u0440\u043e\u0448\u044c\u0451\u0442 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0443 \u043d\u0430 \u043c\u0438\u043a\u0440\u043e\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440, \u0438 \u043e\u043d \u0437\u0430\u043c\u0438\u0433\u0430\u0435\u0442 \u0441\u0432\u0435\u0442\u043e\u0434\u0438\u043e\u0434\u043e\u043c.</p> <p>\u0415\u0441\u043b\u0438 \u0436\u0435 \u044d\u0442\u0443 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0443 \u0441\u043a\u043e\u043c\u043f\u0438\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441 \u0444\u043b\u0430\u0433\u043e\u043c <code>-O3</code> (\u043d\u0435 \u0437\u0430\u0431\u0443\u0434\u044c\u0442\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c <code>make clean</code>), \u0442\u043e \u043f\u0440\u043e\u0438\u0437\u043e\u0439\u0434\u0451\u0442 \u0441\u0442\u0440\u0430\u043d\u043d\u043e\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u0435. \u041f\u043e\u0441\u043b\u0435 \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u043c\u0438\u043a\u0440\u043e\u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440 \u0432\u043a\u043b\u044e\u0447\u0438\u0442 \u0441\u0432\u0435\u0442\u043e\u0434\u0438\u043e\u0434, \u0434\u0430 \u0442\u0430\u043a \u0438 \u043e\u0441\u0442\u0430\u0432\u0438\u0442 \u0435\u0433\u043e \u0432\u043a\u043b\u044e\u0447\u0451\u043d\u043d\u044b\u043c. \u0427\u0442\u043e\u0431\u044b \u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0441\u044f, \u0432 \u0447\u0451\u043c \u0434\u0435\u043b\u043e, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0435\u043c \u0434\u0438\u0437\u0430\u0441\u0441\u0435\u043c\u0431\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0442\u043e, \u0447\u0442\u043e \u043d\u0430\u043c \u0441\u043a\u043e\u043c\u043f\u0438\u043b\u0438\u0440\u043e\u0432\u0430\u043b gcc:</p> <pre><code>\nblinkc.o:     file format elf32-littlearm\n\n\nDisassembly of section .text:\n\n00000000 &lt;start&gt;:\n   0:   4906        ldr r1, [pc, #24]   @ (1c &lt;start+0x1c&gt;)\n   2:   4807        ldr r0, [pc, #28]   @ (20 &lt;start+0x20&gt;)\n   4:   684b        ldr r3, [r1, #4]\n   6:   6982        ldr r2, [r0, #24]\n   8:   f423 0310   bic.w   r3, r3, #9437184    @ 0x900000\n   c:   f042 0210   orr.w   r2, r2, #16\n  10:   f443 03c0   orr.w   r3, r3, #6291456    @ 0x600000\n  14:   6182        str r2, [r0, #24]\n  16:   604b        str r3, [r1, #4]\n  18:   e7fe        b.n 18 &lt;start+0x18&gt;\n  1a:   bf00        nop\n  1c:   40011000    .word   0x40011000\n  20:   40021000    .word   0x40021000\n</code></pre> <p>\u0412\u043f\u0435\u0447\u0430\u0442\u043b\u044f\u044e\u0449\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 \u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440\u0430, 57 \u0441\u0442\u0440\u043e\u043a \u043a\u043e\u0434\u0430 \u043d\u0430 C \u043e\u043d \u0441\u043a\u043e\u043c\u043f\u0438\u043b\u0438\u0440\u043e\u0432\u0430\u043b \u0432\u0441\u0435\u0433\u043e \u0432 10 \u043c\u0430\u0448\u0438\u043d\u043d\u044b\u0445 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0439. \u041f\u0440\u0438\u0432\u0435\u0434\u0451\u043c \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u044b\u0439 \u043f\u0441\u0435\u0432\u0434\u043e\u043a\u043e\u0434:</p> <pre><code>r1 := 40011000;\nr0 := 40021000;\nr3 := memory[r1 + 4];\nr2 := memory[r0 + 24];\nr1[20] := 0;\nr1[23] := 0;\nr2[5] := 1;\nr3[21] := 1;\nr3[22] := 1;\nmemory[r0 + 24] := r2;\nmemory[r1 + 4] := r3;\nloop: goto loop\n</code></pre> <p>\u0412\u0438\u0434\u043d\u043e, \u0447\u0442\u043e \u0438\u043c\u0435\u0435\u0442\u0441\u044f \u043a\u043e\u0434 \u0434\u043b\u044f \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u043f\u043e\u0440\u0442\u0430 C \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0432\u044b\u0432\u043e\u0434\u0430 PC13, \u043e\u0434\u043d\u0430\u043a\u043e \u043d\u0430\u0448 \u0446\u0438\u043a\u043b \u043c\u0438\u0433\u0430\u043d\u0438\u044f \u043a\u0443\u0434\u0430-\u0442\u043e \u043f\u0440\u043e\u043f\u0430\u043b. \u041e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440 \u0440\u0435\u0448\u0438\u043b, \u0447\u0442\u043e \u043d\u0430\u0448 \u0446\u0438\u043a\u043b \u0430\u0431\u0441\u043e\u043b\u044e\u0442\u043d\u043e \u0431\u0435\u0441\u043f\u043e\u043b\u0435\u0437\u043d\u044b\u0439 \u0438 \u0435\u0441\u043b\u0438 \u0435\u0433\u043e \u0443\u0431\u0440\u0430\u0442\u044c, \u0442\u043e \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430 \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0433\u043e\u0440\u0430\u0437\u0434\u043e \u0431\u044b\u0441\u0442\u0440\u0435\u0439. \u041d\u0435 \u0431\u0443\u0434\u0435\u043c \u0432\u0434\u0430\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u0434\u0435\u0431\u0440\u0438 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u0430 C \u0438 \u043d\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u043e\u0433\u043e \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f, \u043f\u0440\u043e\u0441\u0442\u043e \u0441\u043a\u0430\u0436\u0435\u043c, \u0447\u0442\u043e \u043d\u0430 \u0432\u0441\u0435\u0445 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0442 \u0441 \u043f\u0430\u043c\u044f\u0442\u044c\u044e, \u043d\u0443\u0436\u043d\u043e \u0441\u0442\u0430\u0432\u0438\u0442\u044c <code>volatile</code>. \u0412 \u044d\u0442\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440 \u0431\u0443\u0434\u0435\u0442 \u0437\u043d\u0430\u0442\u044c, \u0447\u0442\u043e \u043c\u044b \u043d\u0435 \u043f\u0440\u043e\u0441\u0442\u043e \u0442\u0430\u043a \u0431\u0430\u0439\u0442\u044b \u0442\u0443\u0434\u0430-\u0441\u044e\u0434\u0430 \u043f\u0435\u0440\u0435\u0441\u044b\u043b\u0430\u0435\u043c, \u0430 \u0434\u0435\u043b\u0430\u0435\u043c \u0432\u0430\u0436\u043d\u0443\u044e \u0440\u0430\u0431\u043e\u0442\u0443 \u0438 \u043d\u0435 \u0431\u0443\u0434\u0435\u0442 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u043d\u0430\u0448 \u043a\u043e\u0434.</p> <p>\u0418\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0439 \u043a\u043e\u0434:</p> <pre><code>#include &lt;stdint.h&gt;\n\nstatic void enable_port_clock(void);\nstatic void configure_pin(void);\nstatic void toggle_pin(void);\n\nvoid start(void)\n{\n    enable_port_clock();\n    configure_pin();\n\n    // blink loop\n    for (;;)\n    {\n        // wait loop\n        for (volatile uint32_t delay = 1000000; delay &gt; 0; delay--)\n        {\n        }\n\n        toggle_pin();\n    }\n}\n\nstatic void enable_port_clock(void)\n{\n    // enable I/O port C clock\n    uint32_t rcc_base_address = 0x40021000;\n    uint32_t rcc_apb2enr_address = rcc_base_address + 0x18;\n    uint32_t rcc_apb2enr_iopcen = 1 &lt;&lt; 4;\n\n    volatile uint32_t *rcc_apb2enr_pointer = (uint32_t *)rcc_apb2enr_address;\n    uint32_t rcc_apb2enr_value = *rcc_apb2enr_pointer;\n    rcc_apb2enr_value |= rcc_apb2enr_iopcen;\n    *rcc_apb2enr_pointer = rcc_apb2enr_value;\n}\n\nstatic void configure_pin(void)\n{\n    // configure PC13 as open-drain output with 10 MHz speed\n    uint32_t gpioc_base_address = 0x40011000;\n    uint32_t gpioc_crh_address = gpioc_base_address + 0x04;\n    uint32_t gpiox_crh_mode13_0 = 1 &lt;&lt; 20;\n    uint32_t gpiox_crh_mode13_1 = 1 &lt;&lt; 21;\n    uint32_t gpiox_crh_cnf13_0 = 1 &lt;&lt; 22;\n    uint32_t gpiox_crh_cnf13_1 = 1 &lt;&lt; 23;\n\n    volatile uint32_t *gpioc_crh_pointer = (uint32_t *)gpioc_crh_address;\n    uint32_t gpioc_crh_value = *gpioc_crh_pointer;\n    gpioc_crh_value &amp;= ~gpiox_crh_mode13_0;\n    gpioc_crh_value |= gpiox_crh_mode13_1;\n    gpioc_crh_value |= gpiox_crh_cnf13_0;\n    gpioc_crh_value &amp;= ~gpiox_crh_cnf13_1;\n    *gpioc_crh_pointer = gpioc_crh_value;\n}\n\nstatic void toggle_pin(void)\n{\n    // toggle PC13\n    uint32_t gpioc_base_address = 0x40011000;\n    uint32_t gpioc_odr_address = gpioc_base_address + 0x0c;\n    uint32_t gpiox_odr_odr13 = 1 &lt;&lt; 13;\n\n    volatile uint32_t *gpioc_odr_pointer = (uint32_t *)gpioc_odr_address;\n    uint32_t gpioc_odr_value = *gpioc_odr_pointer;\n    gpioc_odr_value ^= gpiox_odr_odr13;\n    *gpioc_odr_pointer = gpioc_odr_value;\n}\n</code></pre> <p>\u042d\u0442\u043e\u0442 \u043a\u043e\u0434 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043f\u0440\u0438 \u043b\u044e\u0431\u043e\u0439 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438.</p> <p>\u041f\u043e\u043c\u043d\u0438\u0442\u0435, \u0447\u0442\u043e \u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440 C \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0437\u043d\u0430\u0435\u0442 \u043e \u0442\u043e\u043c, \u0447\u0442\u043e \u043f\u0440\u0438 \u0437\u0430\u043f\u0438\u0441\u0438 \u0447\u0435\u0433\u043e-\u0442\u043e \u0432 \u043f\u0430\u043c\u044f\u0442\u044c \u0432\u044b \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442\u0435 \u0441 \u043f\u0435\u0440\u0438\u0444\u0435\u0440\u0438\u0439\u043d\u044b\u043c \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e\u043c. \u0414\u043b\u044f \u043d\u0435\u0433\u043e \u044d\u0442\u0438 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438 \u0432\u044b\u0433\u043b\u044f\u0434\u044f\u0442, \u043a\u0430\u043a \u043e\u0431\u044b\u0447\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430 \u0441 \u043e\u043f\u0435\u0440\u0430\u0442\u0438\u0432\u043d\u043e\u0439 \u043f\u0430\u043c\u044f\u0442\u044c\u044e \u0438 \u0431\u0435\u0437 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0443\u0441\u0438\u043b\u0438\u0439 \u043e\u043d \u043c\u043e\u0436\u0435\u0442 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0438 \u0432\u044b\u0431\u0440\u0430\u0441\u044b\u0432\u0430\u0442\u044c \u0432\u0430\u0448\u0438 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438, \u0435\u0441\u043b\u0438 \u043f\u043e\u0441\u0447\u0438\u0442\u0430\u0435\u0442, \u0447\u0442\u043e \u044d\u0442\u043e \u043f\u0440\u0438\u0432\u0435\u0434\u0451\u0442 \u043a \u0431\u043e\u043b\u0435\u0435 \u0431\u044b\u0441\u0442\u0440\u043e\u043c\u0443 \u043a\u043e\u0434\u0443. \u0412 \u0441\u043f\u043e\u0440\u043d\u044b\u0445 \u0441\u043b\u0443\u0447\u0430\u044f\u0445 \u043d\u0435 \u0441\u0442\u0435\u0441\u043d\u044f\u0439\u0442\u0435\u0441\u044c \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0442\u044c \u0441\u043a\u043e\u043c\u043f\u0438\u043b\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u043a\u043e\u0434 \u0434\u0438\u0437\u0430\u0441\u0441\u0435\u043c\u0431\u043b\u0435\u0440\u043e\u043c.</p>"}]}